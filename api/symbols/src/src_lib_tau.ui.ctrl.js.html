<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <link rel=stylesheet href="../../code.css" type="text/css"></head><body><pre><span class='linenumber'>   1</span> <span class="COMM">/*
<span class='linenumber'>   2</span>    Copyright (c) 2012 KT Corp.
<span class='linenumber'>   3</span>   
<span class='linenumber'>   4</span>    This program is free software: you can redistribute it and/or modify
<span class='linenumber'>   5</span>    it under the terms of the GNU Lesser General Public License as published by
<span class='linenumber'>   6</span>    the Free Software Foundation, either version 3 of the License, or
<span class='linenumber'>   7</span>    (at your option) any later version.
<span class='linenumber'>   8</span> 
<span class='linenumber'>   9</span>    This program is distributed in the hope that it will be useful,
<span class='linenumber'>  10</span>    but WITHOUT ANY WARRANTY; without even the implied warranty of
<span class='linenumber'>  11</span>    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<span class='linenumber'>  12</span>    GNU Lesser General Public License for more details.
<span class='linenumber'>  13</span> 
<span class='linenumber'>  14</span>    You should have received a copy of the GNU Lesser General Public License
<span class='linenumber'>  15</span>    along with This program.  If not, see &lt;http://www.gnu.org/licenses/>.
<span class='linenumber'>  16</span> */</span><span class="WHIT">
<span class='linenumber'>  17</span> </span><span class="COMM">/** @lends tau.ui.Controller */</span><span class="WHIT">
<span class='linenumber'>  18</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.Controller'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.rt.EventDelegator</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  19</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  20</span>    * 생성자, 주어진 Scene객체를 이용하여 Controller객체를 생성한다.
<span class='linenumber'>  21</span>    * 
<span class='linenumber'>  22</span>    * @class scene을 관리하는데 사용되는 기본 컨트럴러
<span class='linenumber'>  23</span>    * 컨트롤러는 scene을 관리하고 {@link tau.ui.Controller.init}, 
<span class='linenumber'>  24</span>    * {@link tau.ui.Controller.loadScene}, 
<span class='linenumber'>  25</span>    * {@link tau.ui.Controller.destroy} 라이프 사이클에 대한 콜백을 관리한다.
<span class='linenumber'>  26</span>    * 이 콜백은 사용자에 의해 오버라이드 될 수 있다. 그러나 직접 호출할 수 없다.
<span class='linenumber'>  27</span>    * &lt;p/>
<span class='linenumber'>  28</span>    * {@link tau.ui.Controller.loadScene} 는 사용자가 구현하는 주요한 함수이다.
<span class='linenumber'>  29</span>    * 컨트롤러는 {@link tau.ui.Controller.getScene} 호출에 의해 기본으로 제공하는 
<span class='linenumber'>  30</span>    * Scene을 가져온다. 
<span class='linenumber'>  31</span>    * 사용자가 scene을 생성해서 사용하고자 한다면 {@link tau.ui.Controller.setScene}을
<span class='linenumber'>  32</span>    * 호출하여 할당해 준다.
<span class='linenumber'>  33</span>    * @constructs
<span class='linenumber'>  34</span>    * @extends tau.rt.EventDelegator
<span class='linenumber'>  35</span>    * @param {Object} [opts] 컨트롤러 옵션
<span class='linenumber'>  36</span>    */</span><span class="WHIT">
<span class='linenumber'>  37</span> </span><span class="WHIT">  </span><span class="NAME">Controller</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">//$ tau.ui.Controller</span><span class="WHIT">
<span class='linenumber'>  38</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Delegators attached to this instance that needs hit testing */</span><span class="WHIT">
<span class='linenumber'>  39</span> </span><span class="WHIT">    </span><span class="NAME">this.$subDelegators</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  40</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Controller options */</span><span class="WHIT">
<span class='linenumber'>  41</span> </span><span class="WHIT">    </span><span class="NAME">this.$opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  42</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  43</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  44</span> 
<span class='linenumber'>  45</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  46</span>    * Controller의 Lifecycle을 시작한다. Lifecycle이 시작될 때 initialize메소드(init)
<span class='linenumber'>  47</span>    * 를 호출하여 Controller의 초기화 작업을 진행 될 수 있도록 한다. 이미 Lifecycle이
<span class='linenumber'>  48</span>    * 시작된 Controller는 더이상 initialize작업을 수행하지 않는다&lt;p/>
<span class='linenumber'>  49</span>    * 
<span class='linenumber'>  50</span>    * Controller의 Lifecycle이 시작되었는지 확인을 위해서는 &lt;code>$isStarted&lt;/code>
<span class='linenumber'>  51</span>    * property 값을 확인하면 된다.
<span class='linenumber'>  52</span>    */</span><span class="WHIT">
<span class='linenumber'>  53</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  54</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$isStarted</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  55</span> </span><span class="WHIT">      </span><span class="NAME">this.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  56</span> </span><span class="WHIT">      </span><span class="NAME">this.$isStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  57</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  58</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  59</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>  60</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  61</span>    * scene과 DOM을 클리어 하기 위한 컨트롤러의 destroy 콜백을 처리한다.
<span class='linenumber'>  62</span>    * &lt;p/>
<span class='linenumber'>  63</span>    * Frawmework 레벨 함수이다. 사용자는 직접 호출하지 않는다.
<span class='linenumber'>  64</span>    * @protected 
<span class='linenumber'>  65</span>    */</span><span class="WHIT">
<span class='linenumber'>  66</span> </span><span class="WHIT">  </span><span class="NAME">doDestroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  67</span> </span><span class="WHIT">    </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  68</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$subDelegators</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  69</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$subDelegators.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  70</span> </span><span class="WHIT">          </span><span class="NAME">this.$subDelegators</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  71</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  72</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  73</span> </span><span class="WHIT">      </span><span class="NAME">this.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  74</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">finally</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  75</span> </span><span class="WHIT">      </span><span class="NAME">this.unsubscribeEvent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  76</span> </span><span class="WHIT">      </span><span class="NAME">this.removeBubble</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  77</span> </span><span class="WHIT">      </span><span class="NAME">this.$isStarted</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  78</span> </span><span class="WHIT">      </span><span class="NAME">this.$subDelegators</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  79</span> </span><span class="WHIT">      </span><span class="NAME">this.$parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  80</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  81</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>  82</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>  83</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>  84</span>    * Controller의 Hierarchy를 구성한다. 파라미터로 받은 parent Controller를 현재
<span class='linenumber'>  85</span>    * Controller의 부모 Controller로 설정한다.&lt;/p>
<span class='linenumber'>  86</span>    * 주어진 Controller가 부모 Controller로 설정되면 Event Bubbling관계도 설정되어
<span class='linenumber'>  87</span>    * 자식 Controller에서 발생된 이벤트는 부모 Controller에서도 처리가 가능해진다.
<span class='linenumber'>  88</span>    * @param {tau.ui.Controller} parent 부모 Controller 객체
<span class='linenumber'>  89</span>    * @throws {TypeError} 명시된 파라미터가 tau.ui.Controller의 객체가 아닐 경우
<span class='linenumber'>  90</span>    */</span><span class="WHIT">
<span class='linenumber'>  91</span> </span><span class="WHIT">  </span><span class="NAME">setParent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  92</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">parent</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  93</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">' is not an instance of tau.ui.Controller: '</span><span class="WHIT">
<span class='linenumber'>  94</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  95</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>  96</span> </span><span class="WHIT">    </span><span class="NAME">this.$parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  97</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>  98</span> </span><span class="WHIT">      </span><span class="NAME">this.setBubble</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>  99</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 100</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 101</span> 
<span class='linenumber'> 102</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 103</span>    * 컨트롤러의 부모 컨트롤러를 반환한다.
<span class='linenumber'> 104</span>    * @returns {Object} 부모 컨트롤러 
<span class='linenumber'> 105</span>    */</span><span class="WHIT">
<span class='linenumber'> 106</span> </span><span class="WHIT">  </span><span class="NAME">getParent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 107</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$parent</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 108</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 109</span> 
<span class='linenumber'> 110</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 111</span>    * 컨트롤러의 제목을 반환한다. 설정되지 않은 경우 클래스명을 사용한다.
<span class='linenumber'> 112</span>    * @returns {String} 컨트롤러의 제목, 설정되지 않은 경우 클래스명
<span class='linenumber'> 113</span>    */</span><span class="WHIT">
<span class='linenumber'> 114</span> </span><span class="WHIT">  </span><span class="NAME">getTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 115</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$title</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.$classname</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// default title is its class name</span><span class="WHIT">
<span class='linenumber'> 116</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 117</span> 
<span class='linenumber'> 118</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 119</span>    * 컨트롤러의 제목을 설정한다.
<span class='linenumber'> 120</span>    * @param {String} title 컨트롤러 제목
<span class='linenumber'> 121</span>    * @returns {Boolean} 제목이 설정된 경우 true
<span class='linenumber'> 122</span>    */</span><span class="WHIT">
<span class='linenumber'> 123</span> </span><span class="WHIT">  </span><span class="NAME">setTitle</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">title</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 124</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">title</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 125</span> </span><span class="WHIT">      </span><span class="NAME">this.$title</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">title</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 126</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 127</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 128</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 129</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 130</span> 
<span class='linenumber'> 131</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 132</span>    * 컨트롤러에 있는 모드 하위{@link tau.rt.EventDelegator}을 반환한다. : 
<span class='linenumber'> 133</span>    * 컴포넌트 히트 테스트에서 사용됨. 
<span class='linenumber'> 134</span>    * @returns {Object} 하위(EventDelegators)을 가지는 Object 
<span class='linenumber'> 135</span>    */</span><span class="WHIT">
<span class='linenumber'> 136</span> </span><span class="WHIT">  </span><span class="NAME">getSubDelegators</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 137</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$subDelegators</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 138</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 139</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 140</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 141</span>    * 컨트롤러의 초기화 콜백 함수
<span class='linenumber'> 142</span>    * 초기화 수행을 하기 위해서는 오버라이드해야한다.
<span class='linenumber'> 143</span>    */</span><span class="WHIT">
<span class='linenumber'> 144</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 145</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 146</span> 
<span class='linenumber'> 147</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 148</span>    * 컨트롤러의 destroy 콜백 함수. 리소스를 클린업하기 위해 오버라이드해야한다.
<span class='linenumber'> 149</span>    */</span><span class="WHIT">
<span class='linenumber'> 150</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 151</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 152</span> 
<span class='linenumber'> 153</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 154</span> 
<span class='linenumber'> 155</span> 
<span class='linenumber'> 156</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'> 157</span> </span><span class="COMM">/** @lends tau.ui.SceneController */</span><span class="WHIT">
<span class='linenumber'> 158</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.SceneController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 159</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 160</span>    * 생성자, 주어진 Scene객체 또는 Scene파일을 이용하여 객체를 생성한다.
<span class='linenumber'> 161</span>    * 
<span class='linenumber'> 162</span>    * @class Navigator에서 메인 scene과 다음 두가지 추가적인 하부 scene을 관리하는데
<span class='linenumber'> 163</span>    * 사용되는 기본 컨트롤러이다. 
<span class='linenumber'> 164</span>    * &lt;pre>
<span class='linenumber'> 165</span>    *  NavigationBar - 스크린 네비게이션과 추가적인 Super-context 메뉴를 컨트롤하는 scene
<span class='linenumber'> 166</span>    *  Content - 컨트롤러에 관리되는 메인 컨텐트 scene
<span class='linenumber'> 167</span>    *  ToolBar - 메인 컨텐트의 밖에서 Super-context 메뉴를 컨트롤하는 데 필요한 scene 
<span class='linenumber'> 168</span>    * &lt;/pre>
<span class='linenumber'> 169</span>    * @constructs
<span class='linenumber'> 170</span>    * @extends tau.ui.Controller
<span class='linenumber'> 171</span>    * @param {Object} [opts] 컨트롤러 옵션
<span class='linenumber'> 172</span>    */</span><span class="WHIT">
<span class='linenumber'> 173</span> </span><span class="WHIT">  </span><span class="NAME">SceneController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">//$ tau.ui.SceneController</span><span class="WHIT">
<span class='linenumber'> 174</span> 
<span class='linenumber'> 175</span> </span><span class="WHIT">    </span><span class="COMM">// Prototype(cached) initScene not defined, set to load default named scene </span><span class="WHIT">
<span class='linenumber'> 176</span> </span><span class="WHIT">    </span><span class="COMM">// file name on next onLoadScene. (Set only on the first contructor call)</span><span class="WHIT">
<span class='linenumber'> 177</span> </span><span class="WHIT">    </span><span class="COMM">// Default scene url: &lt;ctrl path> + &lt;simple ctrl name> + '.scene.js' </span><span class="WHIT">
<span class='linenumber'> 178</span> </span><span class="WHIT">    </span><span class="NAME">this.$optionize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">this.$optionize</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 179</span> </span><span class="WHIT">      </span><span class="NAME">handler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 180</span> </span><span class="WHIT">        </span><span class="COMM">/** @inner dynamic scene file loading path */</span><span class="WHIT">
<span class='linenumber'> 181</span> </span><span class="WHIT">        </span><span class="NAME">scene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prop</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 182</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 183</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">arguments.callee.caller</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">this.loadScene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 184</span> </span><span class="WHIT">            </span><span class="NAME">this.clearScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 185</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scene.trim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="STRN">'/'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 186</span> </span><span class="WHIT">              </span><span class="NAME">this.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getCurrentContext</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getRealPath</span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 187</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 188</span> </span><span class="WHIT">              </span><span class="NAME">this.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.resolveURL</span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'> 189</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 190</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 191</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 192</span> </span><span class="WHIT">            </span><span class="NAME">this.setScene</span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 193</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 194</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 195</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 196</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'remix'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 197</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 198</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 199</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 200</span>    * 이벤트 Subsystem메소드를 Override한 메소드이다.
<span class='linenumber'> 201</span>    * SceneController에서 SCENELOADED이벤트가 발생하면 SceneController에 있는 시스템
<span class='linenumber'> 202</span>    * 메소드인 doDraw를 호출한다.&lt;p/>
<span class='linenumber'> 203</span>    * Scene은 Asynchronous하게 로딩되기 때문에 Scene의 로딩이 완료되기 전에 Draw가 진행
<span class='linenumber'> 204</span>    * 되면 화면이 정상적으로 그려지지 않는다. 따라서 &lt;code>tau.rt.Event.SCENELOADED&lt;/code>
<span class='linenumber'> 205</span>    * 이벤트를 받은 다음 이후 과정인 Draw를 수행해야 한다.
<span class='linenumber'> 206</span>    */</span><span class="WHIT">
<span class='linenumber'> 207</span> </span><span class="WHIT">  </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 208</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 209</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.SCENELOADED</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">// async call</span><span class="WHIT">
<span class='linenumber'> 210</span> </span><span class="WHIT">        </span><span class="NAME">this.doDraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 211</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 212</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 213</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.SceneController.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 214</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 215</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 216</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 217</span>    * Controller Lifecycle 메소드를 Override한다. initialize 작업을 완료한 후에
<span class='linenumber'> 218</span>    * Scene이 로딩되어 있지 않다면 Scene 로딩 작업을 수행한다. 이때 수행되는 Scene 로딩
<span class='linenumber'> 219</span>    * 작업은 Asynchronous하게 진행된다.
<span class='linenumber'> 220</span>    * @see tau.ui.Controller.doStart
<span class='linenumber'> 221</span>    */</span><span class="WHIT">
<span class='linenumber'> 222</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 223</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.SceneController.$super.doStart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 224</span> </span><span class="WHIT">    </span><span class="NAME">this.loadScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// load scene asynchronously if so, it returns no delay</span><span class="WHIT">
<span class='linenumber'> 225</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 226</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">comps.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// user loaded scene programmatically</span><span class="WHIT">
<span class='linenumber'> 227</span> </span><span class="WHIT">      </span><span class="NAME">this.sceneLoaded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 228</span> </span><span class="WHIT">      </span><span class="NAME">this.doDraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 229</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 230</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 231</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 232</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 233</span>    * SceneController가 소유하고 있는 Scene의 Drawing작업을 수행한다. 먼저 Drawing
<span class='linenumber'> 234</span>    * 작업을 수행하기 전에 Scene에 정의된 컴포넌트들이 모듀 Loading되어 있어야 하며 이 작업은
<span class='linenumber'> 235</span>    * Asynchronous하게 진행된다.&lt;p/>
<span class='linenumber'> 236</span>    * Drawing작업이 완려되면 &lt;code>tau.rt.Event.SCENEDRAWN&lt;/code> 이벤트가 발생된다.
<span class='linenumber'> 237</span>    */</span><span class="WHIT">
<span class='linenumber'> 238</span> </span><span class="WHIT">  </span><span class="NAME">doDraw</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 239</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getParent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 240</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">draw</span><span class="PUNC">(</span><span class="NAME">parent.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 241</span> </span><span class="WHIT">      </span><span class="NAME">this.sceneDrawn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 242</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.SCENEDRAWN</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 243</span> </span><span class="WHIT">      </span><span class="NAME">e.alwaysBubble</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 244</span> </span><span class="WHIT">      </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 245</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 246</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 247</span> 
<span class='linenumber'> 248</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 249</span>    * 현재 컨트롤러에 설정된 Navigation Bar를 반환한다.
<span class='linenumber'> 250</span>    * @returns {Object} 현재 컨트롤러에 할당된 Navigation Bar
<span class='linenumber'> 251</span>    */</span><span class="WHIT">
<span class='linenumber'> 252</span> </span><span class="WHIT">  </span><span class="NAME">getNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 253</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$navBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 254</span> </span><span class="WHIT">      </span><span class="NAME">this.$navBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 255</span> </span><span class="WHIT">      </span><span class="NAME">this.$navBar.setTitleItem</span><span class="PUNC">(</span><span class="NAME">this.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 256</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 257</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$navBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 258</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 259</span> 
<span class='linenumber'> 260</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 261</span>    * 현재 컨트롤러에 Navigation Bar에 설정한다.
<span class='linenumber'> 262</span>    * @param {Object} navBar Navigation Bar 객체
<span class='linenumber'> 263</span>    * @returns {Boolean} 설정되면 true
<span class='linenumber'> 264</span>    */</span><span class="WHIT">
<span class='linenumber'> 265</span> </span><span class="WHIT">  </span><span class="NAME">setNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">navBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 266</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">navBar</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 267</span> </span><span class="WHIT">      </span><span class="COMM">// Destroy old Navigation Bar</span><span class="WHIT">
<span class='linenumber'> 268</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$navBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 269</span> </span><span class="WHIT">        </span><span class="NAME">this.$navBar.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 270</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 271</span> </span><span class="WHIT">      </span><span class="NAME">this.$navBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 272</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 273</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 274</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 275</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 276</span> 
<span class='linenumber'> 277</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 278</span>    * 현재 컨트롤러에 설정된 Tool Bar를 반환한다.
<span class='linenumber'> 279</span>    * @returns {Object} 현재 컨트롤러에 설정된 Tool Bar
<span class='linenumber'> 280</span>    */</span><span class="WHIT">
<span class='linenumber'> 281</span> </span><span class="WHIT">  </span><span class="NAME">getToolBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 282</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.$toolBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 283</span> </span><span class="WHIT">      </span><span class="NAME">this.$toolBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 284</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 285</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$toolBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 286</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 287</span> 
<span class='linenumber'> 288</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 289</span>    * 현재 컨트롤러에 Tool Bar를 설정한다.
<span class='linenumber'> 290</span>    * @param {Object} toolBar Tool Bar 객체
<span class='linenumber'> 291</span>    * @returns {Boolean} 설정되었다면 true
<span class='linenumber'> 292</span>    */</span><span class="WHIT">
<span class='linenumber'> 293</span> </span><span class="WHIT">  </span><span class="NAME">setToolBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">toolBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 294</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tb</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$toolBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 295</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">toolBar</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.ToolBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 296</span> </span><span class="WHIT">      </span><span class="COMM">// Destroy old Tool Bar</span><span class="WHIT">
<span class='linenumber'> 297</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tb</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 298</span> </span><span class="WHIT">        </span><span class="NAME">tb.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 299</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 300</span> </span><span class="WHIT">      </span><span class="NAME">this.$toolBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">toolBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 301</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 302</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 303</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 304</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 305</span> 
<span class='linenumber'> 306</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 307</span>    * 컨트롤러에 연관된 scene을 반환한다.
<span class='linenumber'> 308</span>    * @returns {Object} 컨트롤러가 관리하는 scene 객체
<span class='linenumber'> 309</span>    */</span><span class="WHIT">
<span class='linenumber'> 310</span> </span><span class="WHIT">  </span><span class="NAME">getScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 311</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this.$scene</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 312</span> </span><span class="WHIT">      </span><span class="NAME">this.setScene</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 313</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 314</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$scene</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 315</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 316</span> 
<span class='linenumber'> 317</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 318</span>    * 컨트롤러에 scene을 설정한다.
<span class='linenumber'> 319</span>    * @param {Object} scene {@link tau.ui.Scene} 설정할 scene 객체
<span class='linenumber'> 320</span>    * @returns {Boolean} scene이 설정되었으면 true
<span class='linenumber'> 321</span>    */</span><span class="WHIT">
<span class='linenumber'> 322</span> </span><span class="WHIT">  </span><span class="NAME">setScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 323</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">scene</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.$scene</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 324</span> </span><span class="WHIT">      </span><span class="NAME">this.clearScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 325</span> </span><span class="WHIT">      </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.$subDelegators</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">pushUnique</span><span class="PUNC">(</span><span class="NAME">scene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 326</span> </span><span class="WHIT">      </span><span class="NAME">this.$scene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 327</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 328</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 329</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 330</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 331</span> 
<span class='linenumber'> 332</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 333</span>    * 컨트롤러에 scene을 제거한다.
<span class='linenumber'> 334</span>    */</span><span class="WHIT">
<span class='linenumber'> 335</span> </span><span class="WHIT">  </span><span class="NAME">clearScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 336</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$scene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// destroy/cleanup old scene</span><span class="WHIT">
<span class='linenumber'> 337</span> </span><span class="WHIT">      </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">this.$subDelegators</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="NAME">this.$scene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 338</span> </span><span class="WHIT">      </span><span class="NAME">this.$scene.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 339</span> </span><span class="WHIT">      </span><span class="NAME">this.$scene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 340</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 341</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 342</span> 
<span class='linenumber'> 343</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 344</span>    * scene과 DOM을 클리어 하기 위한 컨트롤러의 destroy 콜백을 처리한다.
<span class='linenumber'> 345</span>    * &lt;p/>
<span class='linenumber'> 346</span>    * Frawmework 레벨 함수이다. 사용자는 직접 호출하지 않는다.
<span class='linenumber'> 347</span>    * @protected 
<span class='linenumber'> 348</span>    */</span><span class="WHIT">
<span class='linenumber'> 349</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 350</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.SceneController.$super.destroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 351</span> </span><span class="WHIT">    </span><span class="NAME">this.clearScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 352</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 353</span> 
<span class='linenumber'> 354</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 355</span>    * &lt;code>{@link tau.ui.SceneController}&lt;/code> 인스턴스의 루트 DOM element는 Scene의 DOM element이다.
<span class='linenumber'> 356</span>    * @returns {HTMLElement} DOM scene을 위한 element
<span class='linenumber'> 357</span>    */</span><span class="WHIT">
<span class='linenumber'> 358</span> </span><span class="WHIT">  </span><span class="NAME">getDOM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 359</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 360</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 361</span> 
<span class='linenumber'> 362</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 363</span>    * 컨트롤러의 로드 scene 액션 콜백 함수
<span class='linenumber'> 364</span>    * 관리되는 scene의 컨텐츠를 수정하기 위해서는 오버라이드해야한다.
<span class='linenumber'> 365</span>    */</span><span class="WHIT">
<span class='linenumber'> 366</span> </span><span class="WHIT">  </span><span class="NAME">loadScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 367</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">classname</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">clazz</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filepath</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 368</span> </span><span class="WHIT">        </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 369</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'> 370</span> </span><span class="WHIT">    </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">_loadScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">//fallback method</span><span class="WHIT">
<span class='linenumber'> 371</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT">  </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">that.initScene</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 372</span> </span><span class="WHIT">        </span><span class="NAME">that.initScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 373</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 374</span> </span><span class="WHIT">      </span><span class="NAME">that.sceneLoaded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 375</span> </span><span class="WHIT">      </span><span class="NAME">that.doDraw</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 376</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 377</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">that.initScene</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 378</span> </span><span class="WHIT">      </span><span class="NAME">that.initScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// synchronous</span><span class="WHIT">
<span class='linenumber'> 379</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 380</span> </span><span class="WHIT">      </span><span class="NAME">classname</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">that.$classname</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 381</span> </span><span class="WHIT">      </span><span class="NAME">clazz</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$class.forName</span><span class="PUNC">(</span><span class="NAME">classname</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 382</span> </span><span class="WHIT">      </span><span class="NAME">filepath</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$filepath</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 383</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">tau.isFunction</span><span class="PUNC">(</span><span class="NAME">that.initScene</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 384</span> </span><span class="WHIT">          </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.hasOwnProperty</span><span class="PUNC">(</span><span class="STRN">'initScene'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 385</span> </span><span class="WHIT">        </span><span class="NAME">clazz.prototype.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 386</span> </span><span class="WHIT">          </span><span class="NAME">filepath.substring</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">filepath.lastIndexOf</span><span class="PUNC">(</span><span class="STRN">'/'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 387</span> </span><span class="WHIT">            </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">classname.substring</span><span class="PUNC">(</span><span class="NAME">classname.lastIndexOf</span><span class="PUNC">(</span><span class="STRN">'.'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'> 388</span> </span><span class="WHIT">              </span><span class="PUNC">.</span><span class="NAME">replace</span><span class="PUNC">(</span><span class="REGX">/[Cc]ontroller$/</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'.scene.js'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 389</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 390</span> </span><span class="WHIT">      </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ScriptHelper</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 391</span> </span><span class="WHIT">        </span><span class="NAME">callbackFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 392</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">'Scene file loaded: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">that.initScene</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">that</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 393</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">clazz.prototype.initScene</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 394</span> </span><span class="WHIT">            </span><span class="NAME">clazz.prototype.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.initScene</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 395</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 396</span> </span><span class="WHIT">            </span><span class="NAME">that.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.initScene</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 397</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 398</span> </span><span class="WHIT">          </span><span class="NAME">window.initScene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// delete imported initScene function</span><span class="WHIT">
<span class='linenumber'> 399</span> </span><span class="WHIT">          </span><span class="NAME">_loadScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 400</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 401</span> </span><span class="WHIT">        </span><span class="NAME">timeoutFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 402</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.debug</span><span class="PUNC">(</span><span class="STRN">'Scene file unavailable: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">that.initScene</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">that</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 403</span> </span><span class="WHIT">          </span><span class="NAME">_loadScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 404</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 405</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">load</span><span class="PUNC">(</span><span class="NAME">that.initScene</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 406</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 407</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 408</span> 
<span class='linenumber'> 409</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 410</span>    * 컨트롤러의 sceneLoaded 콜백 함수.
<span class='linenumber'> 411</span>    */</span><span class="WHIT">
<span class='linenumber'> 412</span> </span><span class="WHIT">  </span><span class="NAME">sceneLoaded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 413</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 414</span> 
<span class='linenumber'> 415</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 416</span>    * 컨트롤러의 sceneDrawn 콜백 함수.
<span class='linenumber'> 417</span>    */</span><span class="WHIT">
<span class='linenumber'> 418</span> </span><span class="WHIT">  </span><span class="NAME">sceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 419</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 420</span> 
<span class='linenumber'> 421</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 422</span>    * Activate modal scene and displays it on top of dimmed layer. You can
<span class='linenumber'> 423</span>    * specify various options along with the &lt;code>SceneController&lt;/code> to be
<span class='linenumber'> 424</span>    * used as ModalController.&lt;p/>
<span class='linenumber'> 425</span>    * The options which is plain JSON object can be used are as follow: &lt;br/>
<span class='linenumber'> 426</span>    * &lt;pre>
<span class='linenumber'> 427</span>    * {
<span class='linenumber'> 428</span>    *   layout: 'FULL'|'PAGE'|'FORM'
<span class='linenumber'> 429</span>    *          - specifies modal layout. default is 'FULL'
<span class='linenumber'> 430</span>    * 
<span class='linenumber'> 431</span>    *   animate: 'vertical' | 'horizontal'
<span class='linenumber'> 432</span>    *          - indicates that animation will be applied and it's value is
<span class='linenumber'> 433</span>    *            animation type to be used.
<span class='linenumber'> 434</span>    * }
<span class='linenumber'> 435</span>    * &lt;/pre>
<span class='linenumber'> 436</span>    * @param {tau.ui.Controller} ctrl any subclass of tau.ui.Controller calss 
<span class='linenumber'> 437</span>    * @param {Object} opts options to specify how the modal is applied
<span class='linenumber'> 438</span>    */</span><span class="WHIT">
<span class='linenumber'> 439</span> </span><span class="WHIT">  </span><span class="NAME">presentModal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 440</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mctrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModalController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 441</span> </span><span class="WHIT">    </span><span class="NAME">mctrl.present</span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 442</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 443</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 444</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 445</span>    * Dismisses current modal scene with the specified parameter which indicates
<span class='linenumber'> 446</span>    * whether animation is applied or not
<span class='linenumber'> 447</span>    * @param {Boolean} animated the flag that whether animation is applied or not 
<span class='linenumber'> 448</span>    */</span><span class="WHIT">
<span class='linenumber'> 449</span> </span><span class="WHIT">  </span><span class="NAME">dismissModal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">animated</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 450</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mctrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModalController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 451</span> </span><span class="WHIT">    </span><span class="NAME">mctrl.dismiss</span><span class="PUNC">(</span><span class="NAME">animated</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 452</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 453</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 454</span> 
<span class='linenumber'> 455</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'> 456</span> </span><span class="COMM">/** @lends tau.ui.ModalSceneController */</span><span class="WHIT">
<span class='linenumber'> 457</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.ModalSceneController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 458</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 459</span> </span><span class="WHIT">  </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.ui.ModalSceneController */</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 460</span> </span><span class="WHIT">    </span><span class="COMM">/** The layout of modal scene to be displayed */</span><span class="WHIT">
<span class='linenumber'> 461</span> </span><span class="WHIT">    </span><span class="NAME">LAYOUT</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 462</span> </span><span class="WHIT">      </span><span class="NAME">FULL</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'100'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'100'</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 463</span> </span><span class="WHIT">      </span><span class="NAME">PAGE</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">768</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'100'</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">// ipad fix, think more!</span><span class="WHIT">
<span class='linenumber'> 464</span> </span><span class="WHIT">      </span><span class="NAME">FORM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">540</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">575</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="COMM">// ipad fix, think more!</span><span class="WHIT">
<span class='linenumber'> 465</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 466</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 467</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 468</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 469</span>    * Constructor, creates new ModalSceneController instance.
<span class='linenumber'> 470</span>    * @class This class is used in the user module. Generally user application
<span class='linenumber'> 471</span>    * can retain only one ModalSceneController and this ModalSceneController
<span class='linenumber'> 472</span>    * is handling stack layered modal scene controllers.
<span class='linenumber'> 473</span>    *  
<span class='linenumber'> 474</span>    * @constructs
<span class='linenumber'> 475</span>    * @extends tau.ui.Controller
<span class='linenumber'> 476</span>    * @param {tau.rt.Module} module user application instance
<span class='linenumber'> 477</span>    * @see tau.rt.Module
<span class='linenumber'> 478</span>    */</span><span class="WHIT">
<span class='linenumber'> 479</span> </span><span class="WHIT">  </span><span class="NAME">ModalSceneController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 480</span> </span><span class="WHIT">    </span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">module</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 481</span> </span><span class="WHIT">    </span><span class="NAME">this._modals</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// maintain stack of modal controllers{ctrl: XX, opts:XX}</span><span class="WHIT">
<span class='linenumber'> 482</span> </span><span class="WHIT">    </span><span class="NAME">this._zIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">99993</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// higher than PickerComponent(99992)</span><span class="WHIT">
<span class='linenumber'> 483</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 484</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 485</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 486</span>    * initializes various instnace properties when this conntrollers' lifecycle
<span class='linenumber'> 487</span>    * is initiated. in addition in this method creates placeholder for dom
<span class='linenumber'> 488</span>    * elements to visualize modal scene direct below of application dom element.
<span class='linenumber'> 489</span>    */</span><span class="WHIT">
<span class='linenumber'> 490</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 491</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.ModalSceneController.$super.init.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 492</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.Module</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 493</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ReferenceError</span><span class="PUNC">(</span><span class="STRN">'Invalid current module: '</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 494</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 495</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 496</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cssText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">mask</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 497</span> </span><span class="WHIT">        </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 498</span> </span><span class="WHIT">        </span><span class="NAME">root</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._module.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 499</span> </span><span class="WHIT">        </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">root.getElementsByClassName</span><span class="PUNC">(</span><span class="STRN">'tau-modal'</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 500</span> </span><span class="WHIT">    </span><span class="NAME">this.setParent</span><span class="PUNC">(</span><span class="NAME">this._module</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 501</span> </span><span class="WHIT">    </span><span class="NAME">rt.onEvent</span><span class="PUNC">(</span><span class="STRN">'orientationchange'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 502</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// not defined, define it lazilly</span><span class="WHIT">
<span class='linenumber'> 503</span> </span><span class="WHIT">      </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 504</span> </span><span class="WHIT">      </span><span class="NAME">dom.setAttribute</span><span class="PUNC">(</span><span class="STRN">'class'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau-modal'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 505</span> </span><span class="WHIT">      </span><span class="NAME">root.appendChild</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 506</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 507</span> 
<span class='linenumber'> 508</span> </span><span class="WHIT">    </span><span class="NAME">mask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dom.getElementsByClassName</span><span class="PUNC">(</span><span class="STRN">'tau-modal-mask'</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 509</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">mask</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 510</span> </span><span class="WHIT">      </span><span class="NAME">mask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 511</span> </span><span class="WHIT">      </span><span class="NAME">cssText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'display:none; top:0px; left:0px; position:fixed;'</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'> 512</span> </span><span class="WHIT">          </span><span class="STRN">'width:100%; height:100%; opacity:0.6; background-color:#000000; '</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 513</span> </span><span class="WHIT">          </span><span class="STRN">'z-index:'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._zIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 514</span> </span><span class="WHIT">      </span><span class="NAME">mask.style.cssText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cssText</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 515</span> </span><span class="WHIT">      </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">mask</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'tau-modal-mask'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'> 516</span> </span><span class="WHIT">      </span><span class="NAME">dom.appendChild</span><span class="PUNC">(</span><span class="NAME">mask</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 517</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 518</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 519</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 520</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 521</span>    * Returns sub event delegators. The event delegator which will be returned
<span class='linenumber'> 522</span>    * is the only modal controller on topmost of modal controllers.
<span class='linenumber'> 523</span>    * @returns {tau.ui.Controller} topmost modal controler
<span class='linenumber'> 524</span>    */</span><span class="WHIT">
<span class='linenumber'> 525</span> </span><span class="WHIT">  </span><span class="NAME">getSubDelegators</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 526</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">modal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 527</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">modal</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">modal.ctrl</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 528</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 529</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 530</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 531</span>    * Handles dispatched events. If there are events not handled. it will
<span class='linenumber'> 532</span>    * bubbles up to the parent controllers.
<span class='linenumber'> 533</span>    * 
<span class='linenumber'> 534</span>    * @param {tau.rt.Event} e Mobello Event object
<span class='linenumber'> 535</span>    * @param {Object} payload event object associated with this event
<span class='linenumber'> 536</span>    */</span><span class="WHIT">
<span class='linenumber'> 537</span> </span><span class="WHIT">  </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 538</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 539</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.SCENEDRAWN</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'> 540</span> </span><span class="WHIT">        </span><span class="NAME">this.handleSceneDrawn</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 541</span> </span><span class="WHIT">      </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 542</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 543</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 544</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.ModalSceneController.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 545</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 546</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 547</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 548</span>    * Handles &lt;code>tau.rt.Event.SCENEDRAWN&lt;/code> event. This event will fired
<span class='linenumber'> 549</span>    * when the scene of current modal controller is drawn completely. In this
<span class='linenumber'> 550</span>    * method handles animation effect if the option for animated property of
<span class='linenumber'> 551</span>    * current controller is enabled.
<span class='linenumber'> 552</span>    * @param {tau.rt.Event} e tau.rt.Event.SCENEDRAWN
<span class='linenumber'> 553</span>    * @param {Object} payload payload object associated with this event
<span class='linenumber'> 554</span>    */</span><span class="WHIT">
<span class='linenumber'> 555</span> </span><span class="WHIT">  </span><span class="NAME">handleSceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 556</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">current</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 557</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">current.opts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">current.opts.animate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 558</span> </span><span class="WHIT">      </span><span class="NAME">this.animate</span><span class="PUNC">(</span><span class="NAME">current.opts.animate</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.ctxAware</span><span class="PUNC">(</span><span class="NAME">cleanup</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 559</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 560</span> </span><span class="WHIT">      </span><span class="NAME">cleanup.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 561</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 562</span> </span><span class="WHIT">    </span><span class="COMM">/** @private */</span><span class="WHIT">
<span class='linenumber'> 563</span> </span><span class="WHIT">    </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 564</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">old</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// before of current modal</span><span class="WHIT">
<span class='linenumber'> 565</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">old</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// hides active modal scene which will be under the hood!</span><span class="WHIT">
<span class='linenumber'> 566</span> </span><span class="WHIT">        </span><span class="NAME">old.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 567</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 568</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 569</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 570</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 571</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 572</span>    * If animation effect is set, actual animation operations take palace in this
<span class='linenumber'> 573</span>    * method. You can set animation type as 'vertical' or 'horizontal'. If you
<span class='linenumber'> 574</span>    * set 'vertical' as an animation type it delegate it actual work to the
<span class='linenumber'> 575</span>    * 'transitVertial' method and 'horizontal' then to the 'transitHorizontal'
<span class='linenumber'> 576</span>    * method.&lt;/p>
<span class='linenumber'> 577</span>    * If undefined animation type is set, &lt;code>ReferenceError&lt;/code> will be
<span class='linenumber'> 578</span>    * fired.
<span class='linenumber'> 579</span>    * @param {String} type animation type 'vertical' or 'horizontal' 
<span class='linenumber'> 580</span>    * @param {Boolean} visible if true modal scene is presented otherwise dismissed
<span class='linenumber'> 581</span>    * @param {Function} callbackFn call back function which is invoked when
<span class='linenumber'> 582</span>    * the animation terminates.
<span class='linenumber'> 583</span>    */</span><span class="WHIT">
<span class='linenumber'> 584</span> </span><span class="WHIT">  </span><span class="NAME">animate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">visible</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 585</span> </span><span class="WHIT">    </span><span class="NAME">type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">type.charAt</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toUpperCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">type.slice</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 586</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">fn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">[</span><span class="STRN">'transit'</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 587</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 588</span> </span><span class="WHIT">      </span><span class="NAME">fn.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">visible</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 589</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 590</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ReferenceError</span><span class="PUNC">(</span><span class="STRN">'Can not handle animation type: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 591</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 592</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 593</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 594</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 595</span>    * Identifies that this ModalSceneController has Controllers to manage. If
<span class='linenumber'> 596</span>    * this ModalSceneController has controllers to manage more than 0, then
<span class='linenumber'> 597</span>    * returns &lt;code>true&lt;/code>
<span class='linenumber'> 598</span>    * @returns {Boolean} true if this controller has controllers to manage
<span class='linenumber'> 599</span>    */</span><span class="WHIT">
<span class='linenumber'> 600</span> </span><span class="WHIT">  </span><span class="NAME">hasModals</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 601</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._modals.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 602</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 603</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 604</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 605</span>    * Pushes new &lt;code>tau.ui.Controller&lt;/code> as a modal controller. If there
<span class='linenumber'> 606</span>    * has been already the same controller in this ModalSceneController, then
<span class='linenumber'> 607</span>    * no action will take place. The object represented as the argument has the
<span class='linenumber'> 608</span>    * following format.
<span class='linenumber'> 609</span>    * &lt;pre>
<span class='linenumber'> 610</span>    * {
<span class='linenumber'> 611</span>    *   ctrl: the instance of subclass of tau.ui.Controller class
<span class='linenumber'> 612</span>    *   opts: plain JSON object which is used as an option
<span class='linenumber'> 613</span>    * }
<span class='linenumber'> 614</span>    * &lt;/pre>
<span class='linenumber'> 615</span>    * @param {Object} modal JSON Object representing modal object
<span class='linenumber'> 616</span>    */</span><span class="WHIT">
<span class='linenumber'> 617</span> </span><span class="WHIT">  </span><span class="NAME">pushModal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 618</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">modals</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._modals</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 619</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">modals.indexOf</span><span class="PUNC">(</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// push unique</span><span class="WHIT">
<span class='linenumber'> 620</span> </span><span class="WHIT">      </span><span class="NAME">modals.push</span><span class="PUNC">(</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 621</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 622</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 623</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 624</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 625</span>    * Removes topmoset modal object from the underlying modal stack.
<span class='linenumber'> 626</span>    * @returns {Object} modal object which is removed from the underlying stack
<span class='linenumber'> 627</span>    */</span><span class="WHIT">
<span class='linenumber'> 628</span> </span><span class="WHIT">  </span><span class="NAME">popModal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 629</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._modals.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 630</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 631</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 632</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 633</span>    * 
<span class='linenumber'> 634</span>    * @param key
<span class='linenumber'> 635</span>    * @returns
<span class='linenumber'> 636</span>    */</span><span class="WHIT">
<span class='linenumber'> 637</span> </span><span class="WHIT">  </span><span class="NAME">getDOM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 638</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._module.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getElementsByClassName</span><span class="PUNC">(</span><span class="STRN">'tau-modal'</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 639</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">'tau-modal-mask'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// default is root element</span><span class="WHIT">
<span class='linenumber'> 640</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">dom.getElementsByClassName</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 641</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 642</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 643</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 644</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 645</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 646</span>    * Returns the reference of modal object. If you do not specify argument,
<span class='linenumber'> 647</span>    * then returns the reference of the topmost modal object of the underlying
<span class='linenumber'> 648</span>    * stack. But if specify the index of the stack, it returns the reference
<span class='linenumber'> 649</span>    * of the modal object corresponding the specified index.&lt;p/>
<span class='linenumber'> 650</span>    * The index is applied in reverse order so, if you specify 1, then it returns
<span class='linenumber'> 651</span>    * the reference of the object indexed at (stack.length - 2). 
<span class='linenumber'> 652</span>    * @param {Number} idx the index of the stack in reverse order
<span class='linenumber'> 653</span>    * @returns {Object} the reference of the object at specified index.
<span class='linenumber'> 654</span>    */</span><span class="WHIT">
<span class='linenumber'> 655</span> </span><span class="WHIT">  </span><span class="NAME">peekModal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 656</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">idx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 657</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._modals</span><span class="PUNC">[</span><span class="NAME">this._modals.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">idx</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 658</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 659</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 660</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 661</span>    * Makes the current scene(whole screen) dimmed so that no user event will
<span class='linenumber'> 662</span>    * be accepted by the EventManager.
<span class='linenumber'> 663</span>    */</span><span class="WHIT">
<span class='linenumber'> 664</span> </span><span class="WHIT">  </span><span class="NAME">dim</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 665</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="STRN">'tau-modal-mask'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 666</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mask</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 667</span> </span><span class="WHIT">      </span><span class="NAME">mask.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'block'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 668</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 669</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 670</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 671</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 672</span>    * Removes the dimmed surface. After then The current scene will accept 
<span class='linenumber'> 673</span>    * user event.
<span class='linenumber'> 674</span>    */</span><span class="WHIT">
<span class='linenumber'> 675</span> </span><span class="WHIT">  </span><span class="NAME">undim</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 676</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">mask</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="STRN">'tau-modal-mask'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 677</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">mask</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 678</span> </span><span class="WHIT">      </span><span class="NAME">mask.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 679</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 680</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 681</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 682</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 683</span>    * Adjust scene dimension when the device orientation is changed.
<span class='linenumber'> 684</span>    * @param {Object} modal modal object
<span class='linenumber'> 685</span>    */</span><span class="WHIT">
<span class='linenumber'> 686</span> </span><span class="WHIT">  </span><span class="NAME">adjustDimension</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 687</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'0'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 688</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 689</span> </span><span class="WHIT">      </span><span class="NAME">modal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 690</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 691</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">modal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 692</span> 
<span class='linenumber'> 693</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dimension</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">width</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 694</span> </span><span class="WHIT">        </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">modal.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 695</span> </span><span class="WHIT">        </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'FULL'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 696</span> 
<span class='linenumber'> 697</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">modal.opts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">modal.opts.layout</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 698</span> </span><span class="WHIT">      </span><span class="NAME">layout</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">modal.opts.layout</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 699</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 700</span> </span><span class="WHIT">    </span><span class="NAME">dimension</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.ui.ModalSceneController.LAYOUT</span><span class="PUNC">[</span><span class="NAME">layout</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 701</span> </span><span class="WHIT">    </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dimension.width</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 702</span> </span><span class="WHIT">    </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dimension.height</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 703</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'100'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 704</span> </span><span class="WHIT">      </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 705</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 706</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'100'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 707</span> </span><span class="WHIT">      </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 708</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 709</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.removeProperty</span><span class="PUNC">(</span><span class="STRN">'-webkit-transform'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 710</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">top</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 711</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">left</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 712</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'%'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 713</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'%'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 714</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 715</span> 
<span class='linenumber'> 716</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 717</span>    * Enable or disable the processing of system events according to the state
<span class='linenumber'> 718</span>    * of specified argument &lt;code>enable&lt;/code>
<span class='linenumber'> 719</span>    * @param {Boolean} enable if &lt;code>true&lt;/code> Mobello platform ignores
<span class='linenumber'> 720</span>    *  system events
<span class='linenumber'> 721</span>    * @private
<span class='linenumber'> 722</span>    */</span><span class="WHIT">
<span class='linenumber'> 723</span> </span><span class="WHIT">  </span><span class="NAME">_shieldSystemEvents</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">enable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 724</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">eventMgr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$eventMgr</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 725</span> </span><span class="WHIT">    </span><span class="NAME">eventMgr.setEnable</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">enable</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// disable user event</span><span class="WHIT">
<span class='linenumber'> 726</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 727</span> 
<span class='linenumber'> 728</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 729</span>    * Makes the modal scene which is specified as argument to be shown. You can
<span class='linenumber'> 730</span>    * specify the layout and animation type as the options. For more information
<span class='linenumber'> 731</span>    * refer to {@link tau.ui.SceneController.presentModal}
<span class='linenumber'> 732</span>    * @param {tau.ui.Controller} ctrl the instance of 
<span class='linenumber'> 733</span>    * &lt;code>tau.ui.Controller&lt;/code> class to be used as a modal controller
<span class='linenumber'> 734</span>    * @param {Object} opts with this option object you can specify animation type
<span class='linenumber'> 735</span>    * and layout type.
<span class='linenumber'> 736</span>    * @see tau.ui.SceneController.presentModal
<span class='linenumber'> 737</span>    */</span><span class="WHIT">
<span class='linenumber'> 738</span> </span><span class="WHIT">  </span><span class="NAME">present</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 739</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.hasModals</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 740</span> </span><span class="WHIT">      </span><span class="NAME">this.dim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 741</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 742</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 743</span> </span><span class="WHIT">        </span><span class="NAME">old</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 744</span> </span><span class="WHIT">        </span><span class="NAME">zIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">old</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">old.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.zIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this._zIndex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 745</span> </span><span class="WHIT">    </span><span class="NAME">zIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.parseInt</span><span class="PUNC">(</span><span class="NAME">zIndex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 746</span> </span><span class="WHIT">    </span><span class="NAME">this.pushModal</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="STRN">'ctrl'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'opts'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 747</span> </span><span class="WHIT">    </span><span class="NAME">ctrl.setParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 748</span> </span><span class="WHIT">    </span><span class="COMM">// animation will be processed in handleSceneDrawn method</span><span class="WHIT">
<span class='linenumber'> 749</span> </span><span class="WHIT">    </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 750</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.zIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">zIndex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 751</span> </span><span class="WHIT">    </span><span class="NAME">dom.style.backgroundColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'#ffffff'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 752</span> </span><span class="WHIT">    </span><span class="NAME">this.adjustDimension</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 753</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">opts.animate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 754</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.visibility</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'hidden'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 755</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 756</span> </span><span class="WHIT">    </span><span class="NAME">ctrl.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 757</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 758</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 759</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 760</span>    * Dismisses the current modal scene and return to the previous modal scene
<span class='linenumber'> 761</span>    * or terminates the current modal scene and then return to the original
<span class='linenumber'> 762</span>    * scene that activated modal scene. 
<span class='linenumber'> 763</span>    * @param {Boolean} animated if true modal scene is dismissing with animation
<span class='linenumber'> 764</span>    * effect
<span class='linenumber'> 765</span>    */</span><span class="WHIT">
<span class='linenumber'> 766</span> </span><span class="WHIT">  </span><span class="NAME">dismiss</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">animate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 767</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tobe</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 768</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tobe</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// reveals to be modal scene!</span><span class="WHIT">
<span class='linenumber'> 769</span> </span><span class="WHIT">      </span><span class="NAME">this.adjustDimension</span><span class="PUNC">(</span><span class="NAME">tobe</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 770</span> </span><span class="WHIT">      </span><span class="NAME">tobe.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 771</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 772</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">current</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 773</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">animate</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">current.opts</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">current.opts.animate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 774</span> </span><span class="WHIT">      </span><span class="NAME">this._shieldSystemEvents</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 775</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">current.opts.animate</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 776</span> </span><span class="WHIT">        </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 777</span> </span><span class="WHIT">          </span><span class="NAME">this.animate</span><span class="PUNC">(</span><span class="NAME">current.opts.animate</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.ctxAware</span><span class="PUNC">(</span><span class="NAME">cleanup</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 778</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 779</span> </span><span class="WHIT">          </span><span class="NAME">this._shieldSystemEvents</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 780</span> </span><span class="WHIT">          </span><span class="NAME">tau.log.error</span><span class="PUNC">(</span><span class="STRN">'Can not animate: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 781</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 782</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 783</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 784</span> </span><span class="WHIT">      </span><span class="NAME">cleanup.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 785</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 786</span> </span><span class="WHIT">    </span><span class="COMM">/** @inner */</span><span class="WHIT">
<span class='linenumber'> 787</span> </span><span class="WHIT">    </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 788</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">popped</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.popModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 789</span> </span><span class="WHIT">      </span><span class="NAME">popped.ctrl.setParent</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 790</span> </span><span class="WHIT">      </span><span class="NAME">popped.ctrl.removeBubble</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 791</span> </span><span class="WHIT">      </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 792</span> </span><span class="WHIT">        </span><span class="NAME">popped.ctrl.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 793</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">finally</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 794</span> </span><span class="WHIT">        </span><span class="NAME">this._shieldSystemEvents</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 795</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 796</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.hasModals</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 797</span> </span><span class="WHIT">        </span><span class="NAME">this.undim</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 798</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 799</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 800</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 801</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 802</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 803</span>    * Handles animation change event
<span class='linenumber'> 804</span>    * @param {tau.rt.Event} e Orientation change event object
<span class='linenumber'> 805</span>    * @param {Object} payload payload object associated with this event
<span class='linenumber'> 806</span>    */</span><span class="WHIT">
<span class='linenumber'> 807</span> </span><span class="WHIT">  </span><span class="NAME">handleOrientationChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 808</span> </span><span class="WHIT">    </span><span class="NAME">this.adjustDimension</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 809</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 810</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 811</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 812</span>    * Handles the animation effect that transit current modal scene from bottom
<span class='linenumber'> 813</span>    * to top if &lt;code>visible&lt;/code> is true, otherwise then reverse order
<span class='linenumber'> 814</span>    * @param {Boolean} visible if true the modal scene show up with 
<span class='linenumber'> 815</span>    *  the animation effect 
<span class='linenumber'> 816</span>    * @param {Function} callbackFn callback function called when animation effect
<span class='linenumber'> 817</span>    * terminates.
<span class='linenumber'> 818</span>    * @see tau.ui.ModalSceneController.animate
<span class='linenumber'> 819</span>    */</span><span class="WHIT">
<span class='linenumber'> 820</span> </span><span class="WHIT">  </span><span class="NAME">transitVertical</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 821</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">anim</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 822</span> </span><span class="WHIT">        </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.peekModal</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 823</span> </span><span class="WHIT">        </span><span class="NAME">px</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dom.style.top.indexOf</span><span class="PUNC">(</span><span class="STRN">'px'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 824</span> </span><span class="WHIT">        </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">offset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 825</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">px</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 826</span> </span><span class="WHIT">      </span><span class="NAME">offset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">window.parseInt</span><span class="PUNC">(</span><span class="NAME">dom.style.top.substring</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">px</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 827</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 828</span> </span><span class="WHIT">        </span><span class="NAME">offset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'-'</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">offset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 829</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 830</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 831</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 832</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 833</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.visibility</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'visible'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 834</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 835</span> </span><span class="WHIT">    </span><span class="NAME">anim</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.fx.Transition</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 836</span> </span><span class="WHIT">      </span><span class="NAME">timingFunction</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'ease-in-out'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 837</span> </span><span class="WHIT">      </span><span class="NAME">duration</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.rt.hasTouch</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'0.25s'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'0.5s'</span><span class="WHIT">
<span class='linenumber'> 838</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 839</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'> 840</span> </span><span class="WHIT">    </span><span class="NAME">anim.setStyle</span><span class="PUNC">(</span><span class="STRN">'-webkit-transform'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'translateY('</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">offset</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px)'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 841</span> </span><span class="WHIT">      </span><span class="NAME">onEnd</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="WHIT">
<span class='linenumber'> 842</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 843</span> </span><span class="WHIT">    </span><span class="NAME">anim.animate</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 844</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 845</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 846</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 847</span>    * Handles the animation effect that transit current modal scene from left
<span class='linenumber'> 848</span>    * to right if &lt;code>visible&lt;/code> is true, otherwise then reverse order
<span class='linenumber'> 849</span>    * @param {Boolean} visible if true the modal scene show up with 
<span class='linenumber'> 850</span>    *  the animation effect 
<span class='linenumber'> 851</span>    * @param {Function} callbackFn callback function called when animation effect
<span class='linenumber'> 852</span>    * terminates.
<span class='linenumber'> 853</span>    * @see tau.ui.ModalSceneController.animate
<span class='linenumber'> 854</span>    */</span><span class="WHIT">
<span class='linenumber'> 855</span> </span><span class="WHIT">  </span><span class="NAME">transitHorizontal</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">visible</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callbackFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 856</span> </span><span class="WHIT">    </span><span class="COMM">//@ FIXME implement animation effect here</span><span class="WHIT">
<span class='linenumber'> 857</span> </span><span class="WHIT">    </span><span class="NAME">callbackFn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 858</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 859</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 860</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 861</span>    * Destorys current controller and terminates the lifecycle.
<span class='linenumber'> 862</span>    */</span><span class="WHIT">
<span class='linenumber'> 863</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 864</span> </span><span class="WHIT">    </span><span class="NAME">this._modals.splice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 865</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.ModalSceneController.$super.destroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 866</span> </span><span class="WHIT">    </span><span class="NAME">this.removeBubble</span><span class="PUNC">(</span><span class="NAME">this._module</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 867</span> </span><span class="WHIT">    </span><span class="NAME">this.setParent</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 868</span> </span><span class="WHIT">    </span><span class="NAME">this._module</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 869</span> </span><span class="WHIT">    </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unsubscribeEvent</span><span class="PUNC">(</span><span class="STRN">'orientationchange'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 870</span> </span><span class="WHIT">        </span><span class="NAME">this.handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 871</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 872</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 873</span> 
<span class='linenumber'> 874</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'> 875</span> </span><span class="COMM">/** @lends tau.ui.NavigationController */</span><span class="WHIT">
<span class='linenumber'> 876</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.NavigationController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 877</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 878</span> </span><span class="WHIT">  </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends NavigationController */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 879</span> </span><span class="WHIT">    </span><span class="COMM">/** $dom에서 toolbar DOM에 해당하는 key값 */</span><span class="WHIT">
<span class='linenumber'> 880</span> </span><span class="WHIT">    </span><span class="NAME">TOOLBAR_KEY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'toolBar'</span><span class="WHIT">
<span class='linenumber'> 881</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 882</span> 
<span class='linenumber'> 883</span> </span><span class="WHIT">  </span><span class="NAME">NavigationController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">//$ tau.ui.NavigationController</span><span class="WHIT">
<span class='linenumber'> 884</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Navigated controller list { ctrl, nav, tool } */</span><span class="WHIT">
<span class='linenumber'> 885</span> </span><span class="WHIT">    </span><span class="NAME">this.$list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 886</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Navigator DOM nodes */</span><span class="WHIT">
<span class='linenumber'> 887</span> </span><span class="WHIT">    </span><span class="NAME">this.$renderData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.renderer.initialize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 888</span> </span><span class="WHIT">    </span><span class="COMM">/** @private Event Manager used to disable input during animation */</span><span class="WHIT">
<span class='linenumber'> 889</span> </span><span class="WHIT">    </span><span class="NAME">this.$eventMgr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$eventMgr</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 890</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 891</span> 
<span class='linenumber'> 892</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 893</span>    * 이벤트 Subsystem의 메소드를 Override한다.&lt;p/>
<span class='linenumber'> 894</span>    * Scene 로딩은 Asynchronous하게 수행되어 SceneController에서 
<span class='linenumber'> 895</span>    * Drawing이 종료되었을 때 &lt;code>tau.rt.Event.SCENEDRAWN&lt;/code> 이벤트를 받아 다음
<span class='linenumber'> 896</span>    * Navigation작업을 수행하도록 한다.
<span class='linenumber'> 897</span>    */</span><span class="WHIT">
<span class='linenumber'> 898</span> </span><span class="WHIT">  </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 899</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 900</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 901</span> </span><span class="WHIT">      </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event.SCENEDRAWN</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'> 902</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">active.isDrawn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 903</span> </span><span class="WHIT">          </span><span class="NAME">this.handleSceneDrawn</span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 904</span> </span><span class="WHIT">          </span><span class="NAME">active.isDrawn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 905</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 906</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 907</span> </span><span class="WHIT">      </span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'> 908</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 909</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 910</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.NavigationController.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 911</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 912</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 913</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 914</span>    * Scene이 Drawring된 이후의 로직을 처리할 수 있도록 한다.(Scene Loading은
<span class='linenumber'> 915</span>    * Async로 처리되므로 Drawing 종료 시점을 알 수 없음)
<span class='linenumber'> 916</span>    * 
<span class='linenumber'> 917</span>    * @param {Object} active NavigationController에서 Active상태인 Controller의 정보 
<span class='linenumber'> 918</span>    * @private
<span class='linenumber'> 919</span>    */</span><span class="WHIT">
<span class='linenumber'> 920</span> </span><span class="WHIT">  </span><span class="NAME">handleSceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 921</span> </span><span class="WHIT">    </span><span class="COMM">// dummy function, child controller will override this method </span><span class="WHIT">
<span class='linenumber'> 922</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 923</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 924</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 925</span>    * Navigator에 푸쉬한 컨트롤러 갯수.
<span class='linenumber'> 926</span>    * @returns {Number} 현재 컨트롤러 갯수
<span class='linenumber'> 927</span>    */</span><span class="WHIT">
<span class='linenumber'> 928</span> </span><span class="WHIT">  </span><span class="NAME">getSize</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 929</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 930</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 931</span> 
<span class='linenumber'> 932</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 933</span>    * NavigationController에서 현재 유효한 NavigationBar를 반환한다.
<span class='linenumber'> 934</span>    * @returns {Object} 현재 유효한 {@link tau.ui.NavigationBar}
<span class='linenumber'> 935</span>    */</span><span class="WHIT">
<span class='linenumber'> 936</span> </span><span class="WHIT">  </span><span class="NAME">getActiveNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 937</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 938</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">active.nav</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 939</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 940</span> 
<span class='linenumber'> 941</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 942</span>    * NavigationController에서 현재 유효한 ToolBar를 반환한다.
<span class='linenumber'> 943</span>    * @returns {Object} 현재 유효한 {@link tau.ui.ToolBar}
<span class='linenumber'> 944</span>    */</span><span class="WHIT">
<span class='linenumber'> 945</span> </span><span class="WHIT">  </span><span class="NAME">getActiveToolBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 946</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 947</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">active.tool</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 948</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 949</span> 
<span class='linenumber'> 950</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 951</span>    * NavigationController에서 현재 유효한 컨트롤러를 반환한다.
<span class='linenumber'> 952</span>    * @returns {Object} 현재 유효한 {@link tau.ui.Controller}
<span class='linenumber'> 953</span>    */</span><span class="WHIT">
<span class='linenumber'> 954</span> </span><span class="WHIT">  </span><span class="NAME">getActiveController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 955</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 956</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">active.ctrl</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 957</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 958</span> 
<span class='linenumber'> 959</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 960</span>    * 관리하고 있는 모든 컨트롤러를 destroy한다.
<span class='linenumber'> 961</span>    */</span><span class="WHIT">
<span class='linenumber'> 962</span> </span><span class="WHIT">  </span><span class="NAME">doDestroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 963</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.NavigationController.$super.doDestroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 964</span> 
<span class='linenumber'> 965</span> </span><span class="WHIT">    </span><span class="COMM">// Destroy all sub controllers</span><span class="WHIT">
<span class='linenumber'> 966</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">item</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 967</span> </span><span class="WHIT">      </span><span class="NAME">item</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 968</span> </span><span class="WHIT">      </span><span class="NAME">item.ctrl.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 969</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">item.nav</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">item.nav.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 970</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">item.tool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">item.tool.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 971</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 972</span> </span><span class="WHIT">    </span><span class="NAME">this.renderer.release</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 973</span> </span><span class="WHIT">    </span><span class="NAME">this.$list</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 974</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 975</span> 
<span class='linenumber'> 976</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 977</span>    * 현재 컨트롤러에 있는 모든 하위{@link tau.rt.EventDelegator}을 반환한다.:
<span class='linenumber'> 978</span>    * 컨포넌틑 히트 테스트에서 사용됨.
<span class='linenumber'> 979</span>    * @returns {Array} 하위(EventDelegators)을 가지는 배열
<span class='linenumber'> 980</span>    */</span><span class="WHIT">
<span class='linenumber'> 981</span> </span><span class="WHIT">  </span><span class="NAME">getSubDelegators</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 982</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'> 983</span> </span><span class="WHIT">        </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationController.$super.getSubDelegators.apply</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'> 984</span> </span><span class="WHIT">            </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 985</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 986</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.ctrl</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">children.concat</span><span class="PUNC">(</span><span class="NAME">active.ctrl</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 987</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.nav</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">children.concat</span><span class="PUNC">(</span><span class="NAME">active.nav</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 988</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.tool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">children.concat</span><span class="PUNC">(</span><span class="NAME">active.tool</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 989</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 990</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">children</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 991</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 992</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'> 993</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'> 994</span>    * Controller Lifecycle메소드를 Override한다.
<span class='linenumber'> 995</span>    */</span><span class="WHIT">
<span class='linenumber'> 996</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 997</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getParent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 998</span> 
<span class='linenumber'> 999</span> </span><span class="WHIT">    </span><span class="NAME">tau.util.dom.pushElement</span><span class="PUNC">(</span><span class="NAME">parent.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1000</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.NavigationController.$super.doStart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1001</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1002</span> 
<span class='linenumber'>1003</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1004</span>    * NavigationController가 차지하는 영역에서 주어진 파라미터(key)에 따라 해당되는 DOM객체를
<span class='linenumber'>1005</span>    * 반환한다. 만약 key가 지정되지 않으면 현재 NavigationController의 최상위 DOM앨리먼트를
<span class='linenumber'>1006</span>    * 찾아 반환한다. 만약 NavigationController의 Content영역에 해당하는 DOM앨리먼트를
<span class='linenumber'>1007</span>    * 반환하고자 한다면 'tau.ui.CONTENT_KEY'를 사용하면 된다.
<span class='linenumber'>1008</span>    * 
<span class='linenumber'>1009</span>    * @param {String} key NavigationController의 각 영영에 해당되는 키 값
<span class='linenumber'>1010</span>    * @returns {HTMLElement} DOM element
<span class='linenumber'>1011</span>    */</span><span class="WHIT">
<span class='linenumber'>1012</span> </span><span class="WHIT">  </span><span class="NAME">getDOM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1013</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.renderer.getParentElement</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1014</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1015</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1016</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1017</span>    * 지정된 컨트롤러의 {@link tau.ui.NavigationBar}scene을 생성한다.
<span class='linenumber'>1018</span>    * @protected
<span class='linenumber'>1019</span>    * @param {Object} controller  Navigation Bar를 복사하기 위한 컨트롤러
<span class='linenumber'>1020</span>    * @param {Object} [opts] Navigation Bar옵션
<span class='linenumber'>1021</span>    * @returns {Object} 컨트롤러에 의해 생성된 Navigation Bar 인스턴스 
<span class='linenumber'>1022</span>    */</span><span class="WHIT">
<span class='linenumber'>1023</span> </span><span class="WHIT">  </span><span class="NAME">_createNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1024</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1025</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1026</span> 
<span class='linenumber'>1027</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1028</span>    * TODO: needs implementation for generic tool bar controls
<span class='linenumber'>1029</span>    * 지정된 컨트롤러의 {@link tau.ui.ToolBar} scene을 생성한다.
<span class='linenumber'>1030</span>    * @protected
<span class='linenumber'>1031</span>    * @param {Object} controller Tool Bar를 복사할 컨트롤러
<span class='linenumber'>1032</span>    * @param {Object} [opts] Tool Bar옵션
<span class='linenumber'>1033</span>    * @returns {Object} 지정된 컨트롤러의 의해 생성된 Tool Bar 인스턴스 
<span class='linenumber'>1034</span>    */</span><span class="WHIT">
<span class='linenumber'>1035</span> </span><span class="WHIT">  </span><span class="NAME">_createToolBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1036</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Scene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1037</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1038</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1039</span> 
<span class='linenumber'>1040</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'>1041</span> </span><span class="COMM">/** @lends tau.ui.SequenceNavigator */</span><span class="WHIT">
<span class='linenumber'>1042</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.SequenceNavigator'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.NavigationController</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1043</span> </span><span class="WHIT">  </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.ui.SequenceNavigator */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1044</span> </span><span class="WHIT">    </span><span class="COMM">// Default animation options</span><span class="WHIT">
<span class='linenumber'>1045</span> </span><span class="WHIT">    </span><span class="NAME">DEFAULT_ANIM_OPTS</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1046</span> </span><span class="WHIT">      </span><span class="NAME">duration</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">400</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1047</span> </span><span class="WHIT">      </span><span class="NAME">override</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1048</span> </span><span class="WHIT">      </span><span class="NAME">timingFunction</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'ease-in-out'</span><span class="WHIT">
<span class='linenumber'>1049</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1050</span> 
<span class='linenumber'>1051</span> </span><span class="WHIT">    </span><span class="COMM">/** $dom에서 navigationBar DOM에 해당하는 key값 */</span><span class="WHIT">
<span class='linenumber'>1052</span> </span><span class="WHIT">    </span><span class="NAME">NAVBAR_KEY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'navBar'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1053</span> </span><span class="WHIT">    </span><span class="NAME">EVENT_PUSH_START</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'pushStart'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1054</span> </span><span class="WHIT">    </span><span class="NAME">EVENT_PUSH_FINISH</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'pushFinish'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1055</span> </span><span class="WHIT">    </span><span class="NAME">EVENT_POP_START</span><span class="WHIT">   </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'popStart'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1056</span> </span><span class="WHIT">    </span><span class="NAME">EVENT_POP_FINISH</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'popFinish'</span><span class="WHIT">
<span class='linenumber'>1057</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1058</span> 
<span class='linenumber'>1059</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1060</span>    * 생성자, 새로운 객체를 생성한다.
<span class='linenumber'>1061</span>    * @class &lt;p/>{@link tau.ui.Controller}의 순차적인 네비게이션(depth) 이력을 관리한다.
<span class='linenumber'>1062</span>    * &lt;p/>
<span class='linenumber'>1063</span>    * 모바일 스크린 이동에 대해 두개의 일반적인 네비게이션 패러다임을 고려한다.
<span class='linenumber'>1064</span>    * {@link tau.ui.Controller}를 상속받아서 {@link tau.ui.Scene}을 관리하는 것이 아닌
<span class='linenumber'>1065</span>    * Navigator는 다른 {@link tau.ui.Controller}들을 관리한다.
<span class='linenumber'>1066</span>    * &lt;p/>
<span class='linenumber'>1067</span>    * {@link tau.ui.SequenceNavigator.pushController}가 호출될 때 마다 컨트롤러는
<span class='linenumber'>1068</span>    * Navigator의 스택에 푸쉬하고 {@link tau.ui.SequenceNavigator.popController}이 
<span class='linenumber'>1069</span>    * 호출될 때 마다 스택에서 제거되고 이전 컨트롤러의 scene은 사용자에게 반환된다.  
<span class='linenumber'>1070</span>    * &lt;p/>
<span class='linenumber'>1071</span>    * &lt;code>SequenceNavigator&lt;/code>는 네비게이션 이력뿐만 아니라 하위 컨트롤러의 상태를
<span class='linenumber'>1072</span>    * 관리한다. 게다가 자동적으로 생성되는 네비게이션 상용구 컨트롤을 지원한다.
<span class='linenumber'>1073</span>    * (이전 버튼, 네이게이션 제목)  
<span class='linenumber'>1074</span>    * &lt;p/>
<span class='linenumber'>1075</span>    * 내부적으로 &lt;code>SequenceNavigator&lt;/code>는 Navigation Bar, Tool Bar, 컨텐트 
<span class='linenumber'>1076</span>    * scene을 관리하기 위해 각각의 루트 DOM element를 관리한다.
<span class='linenumber'>1077</span>    * 그래서 푸쉬, 팝 되고 있는 컨트롤러는 특정한 scene 노드를 루트 element에 추가하고 
<span class='linenumber'>1078</span>    * 삭제한다.
<span class='linenumber'>1079</span>    * @param {Object} [opts] 컨트롤러 옵션
<span class='linenumber'>1080</span>    * @extends tau.ui.Controller
<span class='linenumber'>1081</span>    * @constructs
<span class='linenumber'>1082</span>    */</span><span class="WHIT">
<span class='linenumber'>1083</span> </span><span class="WHIT">  </span><span class="NAME">SequenceNavigator</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">//$ tau.ui.SequenceNavigator</span><span class="WHIT">
<span class='linenumber'>1084</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1085</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1086</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1087</span>    * SeqenceNavigator에서 이동할 다음 Scene으로의 Navigation작업을 수행한다.
<span class='linenumber'>1088</span>    * @param {Object} active 다음으로 이동할 Scene의 정보를 가지고 있는 Navigation객체
<span class='linenumber'>1089</span>    * @private
<span class='linenumber'>1090</span>    */</span><span class="WHIT">
<span class='linenumber'>1091</span> </span><span class="WHIT">  </span><span class="NAME">handleSceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1092</span> </span><span class="WHIT">    </span><span class="NAME">this.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Disable event handling during push</span><span class="WHIT">
<span class='linenumber'>1093</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1094</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">old</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1095</span> </span><span class="WHIT">    </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">pushDone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1096</span> </span><span class="WHIT">      </span><span class="NAME">that.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Re-enable event handling</span><span class="WHIT">
<span class='linenumber'>1097</span> </span><span class="WHIT">      </span><span class="NAME">active.opts.pushedFn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1098</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_CTRL_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">that</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1099</span> </span><span class="WHIT">      </span><span class="NAME">that.fireEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="STRN">'fg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'bg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">old</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1100</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">old</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1101</span> </span><span class="WHIT">        </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getClipboard</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cut</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1102</span> </span><span class="WHIT">            </span><span class="NAME">old.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">old.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1103</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1104</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1105</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1106</span> </span><span class="WHIT">    </span><span class="NAME">active.nav</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._createNavigationBar</span><span class="PUNC">(</span><span class="NAME">active.ctrl</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1107</span> </span><span class="WHIT">    </span><span class="NAME">active.nav.setTitleItem</span><span class="PUNC">(</span><span class="NAME">active.ctrl.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// be careful; async</span><span class="WHIT">
<span class='linenumber'>1108</span> </span><span class="WHIT">    </span><span class="NAME">this.renderer.renderPush</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">old</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">pushDone</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1109</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1110</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1111</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1112</span>    * Controller의 Lifecycle 메소드를 Override한다.&lt;p/>
<span class='linenumber'>1113</span>    * 
<span class='linenumber'>1114</span>    * 만약 SequenceNavigator의 RootController가 설정되어 있으면 RootController의
<span class='linenumber'>1115</span>    * Lifecycle을 시작시킨다. RootController가 설정되어 있지 않다면 오류가 발생된다.
<span class='linenumber'>1116</span>    * 
<span class='linenumber'>1117</span>    * @throws {EvalError} RootController가 설정되어 있지 않을 경우
<span class='linenumber'>1118</span>    * @see tau.ui.Controller.doStart
<span class='linenumber'>1119</span>    */</span><span class="WHIT">
<span class='linenumber'>1120</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1121</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.SequenceNavigator.$super.doStart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1122</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1123</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">EvalError</span><span class="PUNC">(</span><span class="STRN">'RootController of SequenceNavigator['</span><span class="WHIT">
<span class='linenumber'>1124</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.$classname</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'] has not been set!'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1125</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1126</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">ctrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1127</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ctrl.$isStarted</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1128</span> </span><span class="WHIT">      </span><span class="NAME">ctrl.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1129</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1130</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1131</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1132</span> </span><span class="WHIT">  </span><span class="COMM">/** 
<span class='linenumber'>1133</span>    * SequenceNavigator의 RootController를 설정한다. SequnceNavigator의 RootController
<span class='linenumber'>1134</span>    * 는 init() 메소드에서 먼저 설정이 되어야 한다.
<span class='linenumber'>1135</span>    * @param {Object} controller 컨트롤러
<span class='linenumber'>1136</span>    * @param {Object} opts Controller 설정을 위한 옵션 객체
<span class='linenumber'>1137</span>    * @throws {TypeError} 설정될 controller가 tau.ui.Controller의 객체가 아닐 경우
<span class='linenumber'>1138</span>    * @throws {EvalError} 이미 RootController가 설정되어 있을 경우
<span class='linenumber'>1139</span>    */</span><span class="WHIT">
<span class='linenumber'>1140</span> </span><span class="WHIT">  </span><span class="NAME">setRootController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1141</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1142</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">EvalError</span><span class="PUNC">(</span><span class="STRN">'RootController of SequenceNavigator('</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1143</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">') is already set'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1144</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1145</span> </span><span class="WHIT">    </span><span class="NAME">this._push</span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1146</span> </span><span class="WHIT">        </span><span class="NAME">pushedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.emptyFn</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1147</span> </span><span class="WHIT">        </span><span class="NAME">poppedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.emptyFn</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1148</span> </span><span class="WHIT">        </span><span class="NAME">hideNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this._hideNavigationBar</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1149</span> </span><span class="WHIT">        </span><span class="NAME">animation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">
<span class='linenumber'>1150</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1151</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1152</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1153</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1154</span>    * 
<span class='linenumber'>1155</span>    * @private
<span class='linenumber'>1156</span>    */</span><span class="WHIT">
<span class='linenumber'>1157</span> </span><span class="WHIT">  </span><span class="NAME">_push</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1158</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">controller</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1159</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified controller is not an instance of '</span><span class="WHIT">
<span class='linenumber'>1160</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'tau.ui.Controller: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">controller</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1161</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1162</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1163</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.$list.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">controller</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1164</span> </span><span class="WHIT">      </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Current controller being pushed</span><span class="WHIT">
<span class='linenumber'>1165</span> </span><span class="WHIT">      </span><span class="NAME">active.opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1166</span> </span><span class="WHIT">        </span><span class="NAME">pushedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.emptyFn</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1167</span> </span><span class="WHIT">        </span><span class="NAME">poppedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.emptyFn</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1168</span> </span><span class="WHIT">        </span><span class="NAME">hideNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this._hideNavigationBar</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1169</span> </span><span class="WHIT">        </span><span class="NAME">animation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT">
<span class='linenumber'>1170</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1171</span> </span><span class="WHIT">      </span><span class="NAME">controller.setParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1172</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1173</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1174</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1175</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1176</span> </span><span class="WHIT">  </span><span class="COMM">/** 
<span class='linenumber'>1177</span>    * Navigator에 컨트롤러를 푸쉬한다.
<span class='linenumber'>1178</span>    * &lt;p/>
<span class='linenumber'>1179</span>    * 컨트롤러를 푸쉬하는 것은 컨트롤러의 scene을 그리는 것과 동일하다. 새로운 scene은 랜더링되어야 하고
<span class='linenumber'>1180</span>    * 현재 보여지고 있는 scene은 사라져야 한다. 
<span class='linenumber'>1181</span>    * &lt;p/>
<span class='linenumber'>1182</span>    * 푸쉬된 컨트롤러의 Navigation Bar, Tool Bar, 컨텐트는 생성되거나 복사(사용자에 의해서)되어
<span class='linenumber'>1183</span>    * 랜더링되고 애니메이션된다. 그리고 스택에 저장할 것이다. 그리고 이전 컨트롤러 scene은 hidden될 것이다.
<span class='linenumber'>1184</span>    * &lt;pre>
<span class='linenumber'>1185</span>    * sequenceNavigator.pushController(
<span class='linenumber'>1186</span>    *   new tau.ui.SceneController({
<span class='linenumber'>1187</span>    *     title: 'My Scene Controller'
<span class='linenumber'>1188</span>    *   },
<span class='linenumber'>1189</span>    *   {
<span class='linenumber'>1190</span>    *     // Does not display the navigation bar
<span class='linenumber'>1191</span>    *     hideNavigationBar: true,
<span class='linenumber'>1192</span>    *
<span class='linenumber'>1193</span>    *     // Pushed done callback
<span class='linenumber'>1194</span>    *     pushedFn: function () {
<span class='linenumber'>1195</span>    *       tau.log('pushed My Scene Controller');
<span class='linenumber'>1196</span>    *     },
<span class='linenumber'>1197</span>    *
<span class='linenumber'>1198</span>    *     // Popped done callback
<span class='linenumber'>1199</span>    *     poppedFn: function () {
<span class='linenumber'>1200</span>    *       tau.log('popped My Scene Controller');
<span class='linenumber'>1201</span>    *     },
<span class='linenumber'>1202</span>    *
<span class='linenumber'>1203</span>    *     animation: true
<span class='linenumber'>1204</span>    *   }
<span class='linenumber'>1205</span>    * );
<span class='linenumber'>1206</span>    * &lt;/pre>
<span class='linenumber'>1207</span>    * @param {Object} controller 푸쉬할 컨트롤러
<span class='linenumber'>1208</span>    * @param {Object} [opts] push컨트롤러 옵션
<span class='linenumber'>1209</span>    */</span><span class="WHIT">
<span class='linenumber'>1210</span> </span><span class="WHIT">  </span><span class="NAME">pushController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1211</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1212</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1213</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ReferenceError</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1214</span> </span><span class="WHIT">          </span><span class="STRN">'RootController of SequenceNavigator must be initialized in init method: '</span><span class="WHIT">
<span class='linenumber'>1215</span> </span><span class="WHIT">          </span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">this.$classname</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1216</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1217</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.ctrl</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1218</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">EvalError</span><span class="PUNC">(</span><span class="STRN">'Specified controller('</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1219</span> </span><span class="WHIT">          </span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="STRN">') is double pushed:'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">this.$classname</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1220</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1221</span> </span><span class="WHIT">    </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._push</span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1222</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">controller.$isStarted</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1223</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.opts.animation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// prevent flickering</span><span class="WHIT">
<span class='linenumber'>1224</span> </span><span class="WHIT">        </span><span class="NAME">controller.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.visibility</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'hidden'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1225</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1226</span> </span><span class="WHIT">      </span><span class="NAME">controller.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1227</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1228</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1229</span> 
<span class='linenumber'>1230</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1231</span>    * 스택에서 최상위 컨트롤러를 꺼내고 이전에 저장된 컨트롤러의 scene을 출력한다.
<span class='linenumber'>1232</span>    * &lt;p/>
<span class='linenumber'>1233</span>    * 컨트롤러를 스택에서 꺼내는 작업은 scene을 draw하는 것도 동일하다. 즉 이전 scene은
<span class='linenumber'>1234</span>    * 스크린에 랜더링 되고 현재 scene은 화면에서 사라져야 한다.
<span class='linenumber'>1235</span>    * &lt;p/>
<span class='linenumber'>1236</span>    * 스택에서 꺼낸 컨트롤러는 애니메이션이 완료된 이후 destroy될 것이다.
<span class='linenumber'>1237</span>    * @param {Number} depth 컨트롤러 꺼낼 갯수 (default: 1)
<span class='linenumber'>1238</span>    * @param {Object} [opts] pop컨트롤러 옵션
<span class='linenumber'>1239</span>    * @returns {Object} 스택에서 꺼낸 컨트롤러 인스턴스
<span class='linenumber'>1240</span>    */</span><span class="WHIT">
<span class='linenumber'>1241</span> </span><span class="WHIT">  </span><span class="NAME">popController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">depth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1242</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1243</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1244</span> </span><span class="WHIT">          </span><span class="NAME">popped</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1245</span> </span><span class="WHIT">          </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1246</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">popped</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">popped.ctrl</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1247</span> </span><span class="WHIT">        </span><span class="NAME">this.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Disable event handling during pop</span><span class="WHIT">
<span class='linenumber'>1248</span> </span><span class="WHIT">        </span><span class="NAME">popped.opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">popped.opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Override options</span><span class="WHIT">
<span class='linenumber'>1249</span> 
<span class='linenumber'>1250</span> </span><span class="WHIT">        </span><span class="COMM">/** @inner Destroys (clears) out-going controllers and scenes  */</span><span class="WHIT">
<span class='linenumber'>1251</span> </span><span class="WHIT">        </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">popDone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1252</span> </span><span class="WHIT">          </span><span class="NAME">that.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Re-enable event handling</span><span class="WHIT">
<span class='linenumber'>1253</span> 
<span class='linenumber'>1254</span> </span><span class="WHIT">          </span><span class="COMM">// Clean up & destroy popped controller</span><span class="WHIT">
<span class='linenumber'>1255</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">content</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">that.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1256</span> </span><span class="WHIT">          </span><span class="NAME">content.removeChild</span><span class="PUNC">(</span><span class="NAME">popped.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1257</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">popped.nav</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">popped.nav.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1258</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">popped.tool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">popped.tool.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1259</span> </span><span class="WHIT">          </span><span class="COMM">/** @inner Delayed cleanup for slow controllers (e.g. big Table) */</span><span class="WHIT">
<span class='linenumber'>1260</span> </span><span class="WHIT">          </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1261</span> </span><span class="WHIT">            </span><span class="NAME">popped.ctrl.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1262</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">500</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1263</span> </span><span class="WHIT">          </span><span class="NAME">popped.opts.poppedFn</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1264</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>1265</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_CTRL_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">that</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1266</span> </span><span class="WHIT">          </span><span class="NAME">that.fireEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="STRN">'fg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'bg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">popped</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1267</span> </span><span class="WHIT">          </span><span class="COMM">// On deep pop, go to at-most, root controller</span><span class="WHIT">
<span class='linenumber'>1268</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">depth</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">that.$list.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1269</span> </span><span class="WHIT">            </span><span class="NAME">that.popController</span><span class="PUNC">(</span><span class="PUNC">--</span><span class="NAME">depth</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1270</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1271</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1272</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1273</span> </span><span class="WHIT">          </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getClipboard</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">paste</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1274</span> </span><span class="WHIT">              </span><span class="NAME">active.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1275</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1276</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>1277</span> </span><span class="WHIT">        </span><span class="COMM">// Draw popping animation</span><span class="WHIT">
<span class='linenumber'>1278</span> </span><span class="WHIT">        </span><span class="NAME">this.renderer.renderPop</span><span class="PUNC">(</span><span class="NAME">that.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">popped</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">popDone</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1279</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">popped.ctrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1280</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1281</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1282</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1283</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1284</span> 
<span class='linenumber'>1285</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1286</span>    * Navigator에서 현재 유효한 Context를 반환한다.
<span class='linenumber'>1287</span>    * @returns {Object} 현재 유효한 Object
<span class='linenumber'>1288</span>    */</span><span class="WHIT">
<span class='linenumber'>1289</span> </span><span class="WHIT">  </span><span class="NAME">getActive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1290</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// peek</span><span class="WHIT">
<span class='linenumber'>1291</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1292</span> 
<span class='linenumber'>1293</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1294</span>    * Navigation Bar을 숨긴다.
<span class='linenumber'>1295</span>    * @param {Boolean} value Navigation Bar을 숨긴다면 true
<span class='linenumber'>1296</span>    */</span><span class="WHIT">
<span class='linenumber'>1297</span> </span><span class="WHIT">  </span><span class="NAME">setHideNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1298</span> </span><span class="WHIT">    </span><span class="NAME">this._hideNavigationBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1299</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1300</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1301</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1302</span>    * 지정된 컨트롤러의 {@link tau.ui.NavigationBar}scene을 생성한다.
<span class='linenumber'>1303</span>    * @protected
<span class='linenumber'>1304</span>    * @param {Object} controller  Navigation Bar를 복사하기 위한 컨트롤러
<span class='linenumber'>1305</span>    * @param {Object} [opts] Navigation Bar옵션
<span class='linenumber'>1306</span>    * @returns {Object} 컨트롤러에 의해 생성된 Navigation Bar 인스턴스 
<span class='linenumber'>1307</span>    */</span><span class="WHIT">
<span class='linenumber'>1308</span> </span><span class="WHIT">  </span><span class="NAME">_createNavigationBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1309</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">navBar</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">leftItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">rightItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">titleItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">prev</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">backText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">eventPub</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1310</span> 
<span class='linenumber'>1311</span> </span><span class="WHIT">    </span><span class="COMM">// Clone the navigation scene from a scene controller if it's set</span><span class="WHIT">
<span class='linenumber'>1312</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.SceneController</span><span class="WHIT">
<span class='linenumber'>1313</span> </span><span class="WHIT">        </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">controller.$navBar</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1314</span> </span><span class="WHIT">      </span><span class="COMM">//TODO: Need a better way to clone (may contain circular references)</span><span class="WHIT">
<span class='linenumber'>1315</span> </span><span class="WHIT">      </span><span class="NAME">navBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.clone</span><span class="PUNC">(</span><span class="NAME">controller.getNavigationBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1316</span> </span><span class="WHIT">          </span><span class="PUNC">[</span><span class="STRN">'$bubbleTargets'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'_parent'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'$isDrawn'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'$subDelegators'</span><span class="PUNC">,</span><span class="STRN">'_source'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'$publishedEvents'</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1317</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1318</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">navBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1319</span> </span><span class="WHIT">      </span><span class="NAME">navBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1320</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1321</span> 
<span class='linenumber'>1322</span> </span><span class="WHIT">    </span><span class="COMM">// Create navigation buttons and titles</span><span class="WHIT">
<span class='linenumber'>1323</span> </span><span class="WHIT">    </span><span class="NAME">leftItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navBar.getMapItem</span><span class="PUNC">(</span><span class="NAME">tau.ui.NavigationBar.LEFT_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1324</span> </span><span class="WHIT">    </span><span class="NAME">rightItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navBar.getMapItem</span><span class="PUNC">(</span><span class="NAME">tau.ui.NavigationBar.RIGHT_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1325</span> </span><span class="WHIT">    </span><span class="NAME">titleItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navBar.getTitleItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1326</span> 
<span class='linenumber'>1327</span> </span><span class="WHIT">    </span><span class="COMM">// No Custom Left button set by controller: auto-generate using prev Scene</span><span class="WHIT">
<span class='linenumber'>1328</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">leftItem</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">this.$parent</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.SequenceNavigator</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1329</span> </span><span class="WHIT">        </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1330</span> </span><span class="WHIT">      </span><span class="NAME">leftItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Button</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">styleClass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">shape</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'back'</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1331</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1332</span> </span><span class="WHIT">        </span><span class="COMM">// Navigated sub scene: "Go Back" button pops the current controller</span><span class="WHIT">
<span class='linenumber'>1333</span> </span><span class="WHIT">        </span><span class="NAME">prev</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1334</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1335</span> </span><span class="WHIT">          </span><span class="COMM">// Navigation bar's button/title as back button</span><span class="WHIT">
<span class='linenumber'>1336</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prev.nav</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1337</span> </span><span class="WHIT">            </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.nav.getBackButtonText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Explicitly defined text</span><span class="WHIT">
<span class='linenumber'>1338</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">prev.nav.getTitleItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1339</span> </span><span class="WHIT">              </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.nav.getTitleItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Previous navigation title</span><span class="WHIT">
<span class='linenumber'>1340</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1341</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1342</span> </span><span class="WHIT">          </span><span class="COMM">// Controller's title as back button</span><span class="WHIT">
<span class='linenumber'>1343</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">prev.ctrl</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1344</span> </span><span class="WHIT">            </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.ctrl.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Previous Controller's title</span><span class="WHIT">
<span class='linenumber'>1345</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1346</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1347</span> </span><span class="WHIT">        </span><span class="NAME">leftItem.setLabel</span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">backText</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">backText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Back'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1348</span> </span><span class="WHIT">        </span><span class="NAME">navBar.setLeftItem</span><span class="PUNC">(</span><span class="NAME">leftItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1349</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1350</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1351</span> 
<span class='linenumber'>1352</span> </span><span class="WHIT">    </span><span class="COMM">// Automaticaly add pop controller handlers left button if none assigned</span><span class="WHIT">
<span class='linenumber'>1353</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">leftItem</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Button</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1354</span> </span><span class="WHIT">        </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">leftItem.getStyleClass</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="STRN">'back'</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">leftItem.getStyleClass</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">shape</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1355</span> </span><span class="WHIT">      </span><span class="COMM">/** @inner Pops current controller */</span><span class="WHIT">
<span class='linenumber'>1356</span> </span><span class="WHIT">      </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1357</span> </span><span class="WHIT">        </span><span class="NAME">controller.$parent.popController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1358</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1359</span> </span><span class="WHIT">      </span><span class="NAME">eventPub</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">leftItem.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1360</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventPub</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">eventPub._opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1361</span> </span><span class="WHIT">        </span><span class="NAME">eventPub._opts.defaultFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Only overwrite default function</span><span class="WHIT">
<span class='linenumber'>1362</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1363</span> </span><span class="WHIT">        </span><span class="NAME">leftItem.publishEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1364</span> </span><span class="WHIT">          </span><span class="NAME">defaultFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="COMM">// New back button event handling</span><span class="WHIT">
<span class='linenumber'>1365</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1366</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1367</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1368</span> 
<span class='linenumber'>1369</span> </span><span class="WHIT">    </span><span class="COMM">// Title  auto-generation</span><span class="WHIT">
<span class='linenumber'>1370</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">titleItem</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1371</span> </span><span class="WHIT">      </span><span class="NAME">navBar.setTitleItem</span><span class="PUNC">(</span><span class="NAME">controller.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1372</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1373</span> 
<span class='linenumber'>1374</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">rightItem</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1375</span> </span><span class="WHIT">      </span><span class="NAME">navBar.setRightItem</span><span class="PUNC">(</span><span class="NAME">rightItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1376</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1377</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">navBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1378</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1379</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1380</span> </span><span class="WHIT">  </span><span class="NAME">_setBackButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">backButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1381</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">prev</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1382</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">backText</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1383</span> </span><span class="WHIT">     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1384</span> </span><span class="WHIT">       </span><span class="COMM">// Navigation bar's button/title as back button</span><span class="WHIT">
<span class='linenumber'>1385</span> </span><span class="WHIT">       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">prev.nav</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.NavigationBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1386</span> </span><span class="WHIT">         </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.nav.getBackButtonText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Explicitly defined text</span><span class="WHIT">
<span class='linenumber'>1387</span> </span><span class="WHIT">         </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">prev.nav.getTitleItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1388</span> </span><span class="WHIT">           </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.nav.getTitleItem</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Previous navigation title</span><span class="WHIT">
<span class='linenumber'>1389</span> </span><span class="WHIT">         </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1390</span> </span><span class="WHIT">       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1391</span> </span><span class="WHIT">       </span><span class="COMM">// Controller's title as back button</span><span class="WHIT">
<span class='linenumber'>1392</span> </span><span class="WHIT">       </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">prev.ctrl</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1393</span> </span><span class="WHIT">         </span><span class="NAME">backText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">prev.ctrl.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Previous Controller's title</span><span class="WHIT">
<span class='linenumber'>1394</span> </span><span class="WHIT">       </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1395</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1396</span> </span><span class="WHIT">     </span><span class="WHIT">
<span class='linenumber'>1397</span> </span><span class="WHIT">     </span><span class="NAME">backButton.setLabel</span><span class="PUNC">(</span><span class="NAME">tau.isString</span><span class="PUNC">(</span><span class="NAME">backText</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">backText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'Back'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1398</span> </span><span class="WHIT">     </span><span class="WHIT">
<span class='linenumber'>1399</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1400</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>1401</span> </span><span class="WHIT">   </span><span class="NAME">_setBackButtonFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controller</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">backButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1402</span> </span><span class="WHIT">     </span><span class="COMM">//button insert Back button Function</span><span class="WHIT">
<span class='linenumber'>1403</span> </span><span class="WHIT">     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1404</span> </span><span class="WHIT">       </span><span class="NAME">controller.$parent.popController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1405</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1406</span> </span><span class="WHIT">     </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">eventPub</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">backButton.getEventPublisher</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1407</span> </span><span class="WHIT">     </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">eventPub</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">eventPub._opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1408</span> </span><span class="WHIT">       </span><span class="NAME">eventPub._opts.defaultFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Only overwrite default function</span><span class="WHIT">
<span class='linenumber'>1409</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1410</span> </span><span class="WHIT">       </span><span class="NAME">backButton.publishEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1411</span> </span><span class="WHIT">         </span><span class="NAME">defaultFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">backFn</span><span class="WHIT"> </span><span class="COMM">// New back button event handling</span><span class="WHIT">
<span class='linenumber'>1412</span> </span><span class="WHIT">       </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1413</span> </span><span class="WHIT">     </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1414</span> </span><span class="WHIT">   </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1415</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1416</span> 
<span class='linenumber'>1417</span> 
<span class='linenumber'>1418</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'>1419</span> </span><span class="COMM">/** @lends tau.ui.ParallelNavigator */</span><span class="WHIT">
<span class='linenumber'>1420</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.ParallelNavigator'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.NavigationController</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1421</span> 
<span class='linenumber'>1422</span> </span><span class="WHIT">  </span><span class="NAME">$static</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="COMM">/** @lends tau.ui.ParallelNavigator */</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1423</span> </span><span class="WHIT">    </span><span class="COMM">/** $dom에서 tabbar DOM에 해당하는 key값 */</span><span class="WHIT">
<span class='linenumber'>1424</span> </span><span class="WHIT">    </span><span class="NAME">TABBAR_KEY</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'tabBar'</span><span class="WHIT">
<span class='linenumber'>1425</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1426</span> 
<span class='linenumber'>1427</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1428</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1429</span>    * 생성자, 새로운 ParallelNavigator객체를 생성한다.
<span class='linenumber'>1430</span>    * @class &lt;p/>{@link tau.ui.Controller}의 병렬적인(tab) 네비게이션 상태를 관리한다.
<span class='linenumber'>1431</span>    * &lt;p/>
<span class='linenumber'>1432</span>    * 모바일 스크린 이동에 대해 두개의 일반적인 네비게이션 패러다임을 고려한다.
<span class='linenumber'>1433</span>    * {@link tau.ui.Controller}를 상속받아서 {@link tau.ui.Scene}을 관리하는 것이 아닌
<span class='linenumber'>1434</span>    * Navigator는 다른 {@link tau.ui.Controller}들을 관리한다.
<span class='linenumber'>1435</span>    * &lt;p/>
<span class='linenumber'>1436</span>    * {@link tau.ui.SequenceNavigator}와 달리 &lt;code>ParallelNavigator&lt;/code>는 정적인
<span class='linenumber'>1437</span>    * 컨트롤러들을 관리한다. 즉 선형목록에 저장한다. 그래서 컨트롤러의 그룹을 
<span class='linenumber'>1438</span>    * {@link tau.ui.ParallelNavigator@setControllers}을 통해 설정하면 탭바에 선택할 수 있는 아이템의 
<span class='linenumber'>1439</span>    * 숫자가 정해진다. 추가적으로 새로운 컨트롤러의 그룹이 리셋되지 않는한 한번 설정이 되면 새로운 컨트롤러는 추가될 수 없다.   
<span class='linenumber'>1440</span>    * 내부적으로 &lt;code>ParallelNavigator&lt;/code>는 Tab Bar, Tool Bar, 컨텐트 scene을 
<span class='linenumber'>1441</span>    * 관리하기 위해 각각의 루트 DOM element를 관리한다.
<span class='linenumber'>1442</span>    * 컨트롤러들의 그룹을 설정하는 것은 scene 노드들을 유효한 탭 scene을 가지는 각각의 루트 element에 추가하는 것이다.
<span class='linenumber'>1443</span>    * @constructs
<span class='linenumber'>1444</span>    * @param {Object} [opts] 컨트롤러 옵션
<span class='linenumber'>1445</span>    * @extends tau.ui.Controller
<span class='linenumber'>1446</span>    */</span><span class="WHIT">
<span class='linenumber'>1447</span> </span><span class="WHIT">  </span><span class="NAME">ParallelNavigator</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">//$ tau.ui.ParallelNavigator</span><span class="WHIT">
<span class='linenumber'>1448</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1449</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1450</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1451</span>    * Scene의 Drawing이 종료되었을 때 로직을 처리한다. Scene 로딩은 Async로 처리 되므로
<span class='linenumber'>1452</span>    * &lt;code>tau.rt.Event.SCENEDRAWN&lt;/code>이벤트를 받아 처리한다. 이벤트 처리 로직은
<span class='linenumber'>1453</span>    * 상위 클래스에 정의되어 있다.
<span class='linenumber'>1454</span>    * @private
<span class='linenumber'>1455</span>    */</span><span class="WHIT">
<span class='linenumber'>1456</span> </span><span class="WHIT">  </span><span class="NAME">handleSceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1457</span> </span><span class="WHIT">    </span><span class="NAME">this.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Disable event handling during push</span><span class="WHIT">
<span class='linenumber'>1458</span> </span><span class="WHIT">    </span><span class="NAME">active.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Enable display</span><span class="WHIT">
<span class='linenumber'>1459</span> 
<span class='linenumber'>1460</span> </span><span class="WHIT">    </span><span class="COMM">// Set selected Tab indicator</span><span class="WHIT">
<span class='linenumber'>1461</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$tabBar.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">comps.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1462</span> </span><span class="WHIT">      </span><span class="NAME">comps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setSelected</span><span class="PUNC">(</span><span class="NAME">this.$index</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1463</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1464</span> 
<span class='linenumber'>1465</span> </span><span class="WHIT">    </span><span class="COMM">// Draw tab bar</span><span class="WHIT">
<span class='linenumber'>1466</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.opts.hideTabBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1467</span> </span><span class="WHIT">      </span><span class="NAME">this.renderer.hideTabbar</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1468</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1469</span> </span><span class="WHIT">      </span><span class="NAME">this.renderer.showTabbar</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1470</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1471</span> </span><span class="WHIT">    </span><span class="NAME">this.$tabBar.draw</span><span class="PUNC">(</span><span class="NAME">this.renderer.getParentElement</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1472</span> </span><span class="WHIT">        </span><span class="NAME">tau.ui.ParallelNavigator.TABBAR_KEY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1473</span> 
<span class='linenumber'>1474</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active.tool</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1475</span> </span><span class="WHIT">      </span><span class="NAME">active.tool.draw</span><span class="PUNC">(</span><span class="NAME">this.renderer.getParentElement</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1476</span> </span><span class="WHIT">        </span><span class="NAME">tau.ui.NavigationController.TOOLBAR_KEY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1477</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1478</span> </span><span class="WHIT">    </span><span class="NAME">active.opts.indexedFn</span><span class="PUNC">(</span><span class="NAME">active.ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.$index</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// indexed callback</span><span class="WHIT">
<span class='linenumber'>1479</span> </span><span class="WHIT">    </span><span class="NAME">this.$eventMgr.setEnable</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="COMM">// Re-enable event handling</span><span class="WHIT">
<span class='linenumber'>1480</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1481</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$prev</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// prevent flickering</span><span class="WHIT">
<span class='linenumber'>1482</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.$prev.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1483</span> </span><span class="WHIT">      </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getClipboard</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cut</span><span class="PUNC">(</span><span class="NAME">dom.id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1484</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1485</span> </span><span class="WHIT">      </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.$prev</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// for memory efficiency</span><span class="WHIT">
<span class='linenumber'>1486</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1487</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1488</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1489</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1490</span>    * Controller Lifecycle메소드를 Override한다. init()에서 설정된 Controller가 있으면
<span class='linenumber'>1491</span>    * 첫(index 0)번째 Controller의 Lifecycle을 시작한다.
<span class='linenumber'>1492</span>    */</span><span class="WHIT">
<span class='linenumber'>1493</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1494</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.ParallelNavigator.$super.doStart.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1495</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1496</span> </span><span class="WHIT">      </span><span class="NAME">this.setIndex</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1497</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1498</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1499</span> 
<span class='linenumber'>1500</span> </span><span class="WHIT">  </span><span class="COMM">/** 
<span class='linenumber'>1501</span>    * Tab Bar에 의해 네이게이션될 컨트롤러들을 설정한다.
<span class='linenumber'>1502</span>    * &lt;p/>
<span class='linenumber'>1503</span>    * 컨트롤러 그룹은 {@link tau.ui.ParallelNavigator.createTabBar}를 통해 scene을 생성하는데 
<span class='linenumber'>1504</span>    * 사용될 것이다. 그리고 첫번째 인덱스의 컨트롤러는 선택된 탭으로 설정된다.
<span class='linenumber'>1505</span>    * @param {Array} controllers 컨트롤러 배열
<span class='linenumber'>1506</span>    * @param {Object} [opts] Default ParallelNavigator Controller옵션 
<span class='linenumber'>1507</span>    */</span><span class="WHIT">
<span class='linenumber'>1508</span> </span><span class="WHIT">  </span><span class="NAME">setControllers</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controllers</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1509</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1510</span> 
<span class='linenumber'>1511</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">controllers</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">controllers.length</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1512</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$list</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1513</span> </span><span class="WHIT">        </span><span class="NAME">this.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Remove previously set control items</span><span class="WHIT">
<span class='linenumber'>1514</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1515</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tab</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1516</span> </span><span class="WHIT">        </span><span class="NAME">tab</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1517</span> </span><span class="WHIT">          </span><span class="NAME">ctrl</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">controllers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1518</span> </span><span class="WHIT">          </span><span class="NAME">opts</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1519</span> </span><span class="WHIT">            </span><span class="NAME">indexedFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">tau.emptyFn</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1520</span> </span><span class="WHIT">            </span><span class="NAME">hideTabBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this._hideTabBar</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1521</span> </span><span class="WHIT">            </span><span class="NAME">animation</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT">
<span class='linenumber'>1522</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>1523</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1524</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tab.ctrl</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">tab.ctrl</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='linenumber'>1525</span> </span><span class="WHIT">            </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.$list.push</span><span class="PUNC">(</span><span class="NAME">tab</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1526</span> </span><span class="WHIT">          </span><span class="NAME">tab.ctrl.setParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1527</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1528</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1529</span> </span><span class="WHIT">      </span><span class="COMM">/** @private Tab bar */</span><span class="WHIT">
<span class='linenumber'>1530</span> </span><span class="WHIT">      </span><span class="NAME">this.$tabBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.TabBar</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">controllers</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">controllers</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1531</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1532</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1533</span> 
<span class='linenumber'>1534</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1535</span>    * 지정된 인덱스에 해당하는 컨트롤러로 탭 이동한다.
<span class='linenumber'>1536</span>    * &lt;p/>
<span class='linenumber'>1537</span>    * 컨트롤러 인덱스를 설정하는 것은 해당 인덱스의 컨트롤러를 랜더링하고 이전 컨트롤러를 삭제하는 것을 의미한다.
<span class='linenumber'>1538</span>    * &lt;pre>
<span class='linenumber'>1539</span>    * parallelNavigator.setIndex(
<span class='linenumber'>1540</span>    *   0,
<span class='linenumber'>1541</span>    *   {
<span class='linenumber'>1542</span>    *     // Does not display the tool bar
<span class='linenumber'>1543</span>    *     hideToolBar: true,
<span class='linenumber'>1544</span>    *
<span class='linenumber'>1545</span>    *     // Navigation index callback
<span class='linenumber'>1546</span>    *     indexedFn: function (ctrl, index) {
<span class='linenumber'>1547</span>    *       tau.log('indexed: ' + index + ', title: ' + ctrl.getTitle());
<span class='linenumber'>1548</span>    *     },
<span class='linenumber'>1549</span>    *
<span class='linenumber'>1550</span>    *     animation: false
<span class='linenumber'>1551</span>    *   }
<span class='linenumber'>1552</span>    * );
<span class='linenumber'>1553</span>    * &lt;/pre> 
<span class='linenumber'>1554</span>    * @param {Number} index 탭 이동할 컨트롤러 인덱스
<span class='linenumber'>1555</span>    * @param {Object} [opts] Indexed controller옵션
<span class='linenumber'>1556</span>    * @throws {RangeError} 명시된 index가 범위를 벗어났을 때
<span class='linenumber'>1557</span>    */</span><span class="WHIT">
<span class='linenumber'>1558</span> </span><span class="WHIT">  </span><span class="NAME">setIndex</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1559</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">index</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1560</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">RangeError</span><span class="PUNC">(</span><span class="STRN">'Specified index is out of range: '</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1561</span> </span><span class="WHIT">          </span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1562</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1563</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$index</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// if same index, do nothing </span><span class="WHIT">
<span class='linenumber'>1564</span> 
<span class='linenumber'>1565</span> </span><span class="WHIT">    </span><span class="NAME">this.$prev</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1566</span> </span><span class="WHIT">    </span><span class="NAME">this.$index</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// change active controller</span><span class="WHIT">
<span class='linenumber'>1567</span> 
<span class='linenumber'>1568</span> </span><span class="WHIT">    </span><span class="COMM">// Ensure to load new tab</span><span class="WHIT">
<span class='linenumber'>1569</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">active</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getActive</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1570</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1571</span> </span><span class="WHIT">      </span><span class="NAME">active.opts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">active.opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// override old opts</span><span class="WHIT">
<span class='linenumber'>1572</span> </span><span class="WHIT">      </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getClipboard</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">paste</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>1573</span> </span><span class="WHIT">          </span><span class="NAME">active.ctrl.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1574</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">active.ctrl.$isStarted</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1575</span> </span><span class="WHIT">        </span><span class="NAME">active.ctrl.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// progress asynchronously!</span><span class="WHIT">
<span class='linenumber'>1576</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1577</span> </span><span class="WHIT">        </span><span class="NAME">this.handleSceneDrawn</span><span class="PUNC">(</span><span class="NAME">active</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1578</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1579</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.rt.Event</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_CTRL_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1580</span> </span><span class="WHIT">      </span><span class="NAME">this.fireEvent</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="STRN">'fg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">active</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'bg'</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.$prev</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1581</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1582</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1583</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1584</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1585</span>    * 현재 컨트롤러에 설정된 TabBar를 반환한다.
<span class='linenumber'>1586</span>    * @returns {Object} 현재 컨트롤러에 할당된 TabBar
<span class='linenumber'>1587</span>    */</span><span class="WHIT">
<span class='linenumber'>1588</span> </span><span class="WHIT">  </span><span class="NAME">getTabBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1589</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$tabBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1590</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1591</span> 
<span class='linenumber'>1592</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1593</span>    * Navigator에서 현재 유효한 Context를 반환한다.
<span class='linenumber'>1594</span>    * @returns {Object} 현재 유효한 Object
<span class='linenumber'>1595</span>    */</span><span class="WHIT">
<span class='linenumber'>1596</span> </span><span class="WHIT">  </span><span class="NAME">getActive</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1597</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">this.$index</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1598</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1599</span> 
<span class='linenumber'>1600</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1601</span>    * Tab Bar을 숨긴다.
<span class='linenumber'>1602</span>    * @param {Boolean} value Tab Bar을 숨긴다면 true
<span class='linenumber'>1603</span>    */</span><span class="WHIT">
<span class='linenumber'>1604</span> </span><span class="WHIT">  </span><span class="NAME">setHideTabBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1605</span> </span><span class="WHIT">    </span><span class="NAME">this._hideTabBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1606</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.$list.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1607</span> </span><span class="WHIT">      </span><span class="NAME">this.$list</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">opts.hideTabBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._hideTabBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1608</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1609</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1610</span> 
<span class='linenumber'>1611</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1612</span>    * 컨트롤러에서 관리하는 모든 컨트롤러를 destroy한다.
<span class='linenumber'>1613</span>    */</span><span class="WHIT">
<span class='linenumber'>1614</span> </span><span class="WHIT">  </span><span class="NAME">doDestroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1615</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.ParallelNavigator.$super.doDestroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1616</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$tabBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1617</span> </span><span class="WHIT">      </span><span class="NAME">this.$tabBar.destroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1618</span> </span><span class="WHIT">      </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.$tabBar</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1619</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1620</span> </span><span class="WHIT">    </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.$index</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1621</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1622</span> 
<span class='linenumber'>1623</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1624</span>    * 현재 컨트롤러의 모든 하위{@link tau.rt.EventDelegator}을 반환한다.:
<span class='linenumber'>1625</span>    * 컨포넌트 히트 테스트에서 사용됨.
<span class='linenumber'>1626</span>    * @returns {Array} 하위(EventDelegators)을 가지는 배열
<span class='linenumber'>1627</span>    */</span><span class="WHIT">
<span class='linenumber'>1628</span> </span><span class="WHIT">  </span><span class="NAME">getSubDelegators</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1629</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.ui.ParallelNavigator.$super.getSubDelegators.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1630</span> </span><span class="WHIT">        </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1631</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.$tabBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1632</span> </span><span class="WHIT">      </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">children.concat</span><span class="PUNC">(</span><span class="NAME">this.$tabBar.getSubDelegators</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1633</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1634</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">children</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1635</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1636</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1637</span> 
<span class='linenumber'>1638</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'>1639</span> </span><span class="COMM">/** 
<span class='linenumber'>1640</span>  * @lends tau.ui.DashboardController
<span class='linenumber'>1641</span>  */</span><span class="WHIT">
<span class='linenumber'>1642</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.DashboardController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.SceneController</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1643</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1644</span>    * 주어진 &lt;code>Dashboard&lt;/code>파라미터를 이용하여 새로운 Controller객체를 생성한다.
<span class='linenumber'>1645</span>    * @class
<span class='linenumber'>1646</span>    * Dashboard의 UI를 구성하는 SceneController이다.
<span class='linenumber'>1647</span>    * &lt;p/>
<span class='linenumber'>1648</span>    * DashboardController 클래스는 Dashboard를 구헝하기 위해 
<span class='linenumber'>1649</span>    * UI Framework에서 기본으로 사용하는 SceneController이며 사용자가 직접 UI를
<span class='linenumber'>1650</span>    * 커스터마이징을 하기 위해서는 {@link tau.ui.DashboardController}를 상속받아
<span class='linenumber'>1651</span>    * 구현해야 한다. Custom 클래스를 global config 파일에 &lt;code>controller&lt;/code>
<span class='linenumber'>1652</span>    * 키로 등록해 주면 자동으로 인식한다.
<span class='linenumber'>1653</span>    * &lt;pre>
<span class='linenumber'>1654</span>    * $class('foo.ExtendedController').extend(tau.ui.DashboardController).define({
<span class='linenumber'>1655</span>    *   ...
<span class='linenumber'>1656</span>    * });
<span class='linenumber'>1657</span>    * &lt;/pre>
<span class='linenumber'>1658</span>    * @constructs
<span class='linenumber'>1659</span>    * @extends tau.ui.SceneController
<span class='linenumber'>1660</span>    * @param {tau.rt.Dashboard} Dashboard 객체
<span class='linenumber'>1661</span>    * @see tau.ui.SceneController
<span class='linenumber'>1662</span>    */</span><span class="WHIT">
<span class='linenumber'>1663</span> </span><span class="WHIT">  </span><span class="NAME">DashboardController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dashboard</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1664</span> </span><span class="WHIT">    </span><span class="NAME">this._db</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dashboard</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1665</span> </span><span class="WHIT">    </span><span class="NAME">this._panel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// dashboard panel</span><span class="WHIT">
<span class='linenumber'>1666</span> </span><span class="WHIT">    </span><span class="NAME">this._editable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1667</span> </span><span class="WHIT">    </span><span class="NAME">this._preinstalled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1668</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1669</span> </span><span class="WHIT">    </span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1670</span> </span><span class="WHIT">    </span><span class="NAME">this._swapTarget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1671</span> </span><span class="WHIT">    </span><span class="NAME">this._ul</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1672</span> </span><span class="WHIT">    </span><span class="NAME">this._movingShortcutsCount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1673</span> </span><span class="WHIT">    </span><span class="NAME">this._continuousMutation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="COMM">//dashboard.getContinuousMutation();</span><span class="WHIT">
<span class='linenumber'>1674</span> </span><span class="WHIT">    </span><span class="NAME">this._FORCE_SWINGBACK</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"FORCE_SWINGBACK"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1675</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1676</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1677</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1678</span>    * 
<span class='linenumber'>1679</span>    */</span><span class="WHIT">
<span class='linenumber'>1680</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1681</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// do not implement listener in init() method </span><span class="WHIT">
<span class='linenumber'>1682</span> </span><span class="WHIT">    </span><span class="NAME">rt.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1683</span> </span><span class="WHIT">    </span><span class="NAME">rt.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module.EVENT_BADGESET</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleBadgeChanage</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1684</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1685</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1686</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1687</span>    * &lt;code>tau.rt.Event.RT_INSTALLED&lt;/code> 이벤트를 처리한다. 만약 동일한
<span class='linenumber'>1688</span>    * App이 먼저 설치되어 있다면 경고창을 출력하고 현재 처리를 종료한다.
<span class='linenumber'>1689</span>    * 이때 전달되는 payload는 설치된 앱들의 config정보를 갖고 있는 배열이 된다.
<span class='linenumber'>1690</span>    * @param {tau.rt.Event} e &lt;code>tau.rt.Event.RT_INSTALLED&lt;/code>
<span class='linenumber'>1691</span>    * @param {Array} confs 설치할 App별 정보를 갖고 있는 configuration 객체
<span class='linenumber'>1692</span>    */</span><span class="WHIT">
<span class='linenumber'>1693</span> </span><span class="WHIT">  </span><span class="NAME">addShortcuts</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// callback from Dashboard</span><span class="WHIT">
<span class='linenumber'>1694</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1695</span> </span><span class="WHIT">        </span><span class="NAME">panel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._panel</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1696</span> </span><span class="WHIT">        </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1697</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">confs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1698</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._preinstalled</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._db.hasShortcut</span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1699</span> </span><span class="WHIT">        </span><span class="NAME">tau.alert</span><span class="PUNC">(</span><span class="STRN">'앱('</span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">title</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">')이 이미 설치되어 있습니다'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1700</span> </span><span class="WHIT">          </span><span class="NAME">title</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'경고'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1701</span> </span><span class="WHIT">          </span><span class="NAME">callbackFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="COMM">// none; need to fix</span><span class="WHIT">
<span class='linenumber'>1702</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1703</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1704</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1705</span> </span><span class="WHIT">      </span><span class="NAME">this._db.addShortcut</span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1706</span> </span><span class="WHIT">      </span><span class="NAME">appCtx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">rt.createStorageCtx</span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1707</span> </span><span class="WHIT">      </span><span class="NAME">shortcut</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Shortcut</span><span class="PUNC">(</span><span class="NAME">confs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1708</span> </span><span class="WHIT">      </span><span class="NAME">shortcut.setBadge</span><span class="PUNC">(</span><span class="NAME">appCtx.get</span><span class="PUNC">(</span><span class="STRN">'$badge'</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1709</span> </span><span class="WHIT">      </span><span class="NAME">panel.add</span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1710</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1711</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._preinstalled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// user installed</span><span class="WHIT">
<span class='linenumber'>1712</span> </span><span class="WHIT">      </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">panel.render</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">300</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// effect</span><span class="WHIT">
<span class='linenumber'>1713</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1714</span> </span><span class="WHIT">      </span><span class="NAME">panel.render</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1715</span> </span><span class="WHIT">      </span><span class="NAME">this._preinstalled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1716</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1717</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1718</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1719</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1720</span>    * Runtime에서 App이 삭제되면 발생되는 &lt;code>tau.rt.Event.RT_UNINSTALLED&lt;/code>
<span class='linenumber'>1721</span>    * 이벤트를 처리한다. 이때 전달되는 conf는 &lt;code>{name: xxx}&lt;/code>의
<span class='linenumber'>1722</span>    * 형태를 가진다. payload.name은 삭제된 app의 이름을 나타낸다.
<span class='linenumber'>1723</span>    * @param {Object} conf {name: xxx} 의 형태를 가진 객체
<span class='linenumber'>1724</span>    */</span><span class="WHIT">
<span class='linenumber'>1725</span> </span><span class="WHIT">  </span><span class="NAME">removeShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// callback from Dashboard</span><span class="WHIT">
<span class='linenumber'>1726</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._panel.findShortcut</span><span class="PUNC">(</span><span class="NAME">conf.name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1727</span> </span><span class="WHIT">    </span><span class="NAME">this._db.removeShortcut</span><span class="PUNC">(</span><span class="NAME">conf</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1728</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1729</span> </span><span class="WHIT">      </span><span class="NAME">this._panel.removeShortcut</span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1730</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1731</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1732</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1733</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1734</span>    * Override 메소드이며 &lt;code>Dashboard&lt;/code> 화면을 생성한다. 상속받은 클래스가 
<span class='linenumber'>1735</span>    * 이 메소드를 Override할 경우 반드시 super 메소드를 호출해 주어야 한다.
<span class='linenumber'>1736</span>    * @throws {TypeError} Custom 영역으로 생성한 객체가 컴포넌트로 표현되지 않을 경우 
<span class='linenumber'>1737</span>    * @see tau.ui.SceneController.loadScene
<span class='linenumber'>1738</span>    */</span><span class="WHIT">
<span class='linenumber'>1739</span> </span><span class="WHIT">  </span><span class="NAME">loadScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1740</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1741</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">custom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.loadHeader</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1742</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">custom</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">custom</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Component</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1743</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Header area of dashboard is not a Component: '</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1744</span> </span><span class="WHIT">          </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1745</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1746</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">custom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1747</span> </span><span class="WHIT">      </span><span class="NAME">scene.add</span><span class="PUNC">(</span><span class="NAME">custom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1748</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1749</span> </span><span class="WHIT">    </span><span class="COMM">// mixins to extend Panel component</span><span class="WHIT">
<span class='linenumber'>1750</span> </span><span class="WHIT">    </span><span class="NAME">this._panel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.loadShortcutPanel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1751</span> </span><span class="WHIT">    </span><span class="NAME">scene.add</span><span class="PUNC">(</span><span class="NAME">this._panel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1752</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">custom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.loadFooter</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1753</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">custom</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">custom</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Component</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1754</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Footer area of dashboard is not a Component: '</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1755</span> </span><span class="WHIT">          </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1756</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1757</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">custom</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1758</span> </span><span class="WHIT">      </span><span class="NAME">scene.add</span><span class="PUNC">(</span><span class="NAME">custom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1759</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">       </span><span class="WHIT">
<span class='linenumber'>1760</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1761</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1762</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1763</span>    * callback method which will be invoked when currnet scene is drawn
<span class='linenumber'>1764</span>    */</span><span class="WHIT">
<span class='linenumber'>1765</span> </span><span class="WHIT">  </span><span class="NAME">sceneDrawn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1766</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1767</span> </span><span class="WHIT">        </span><span class="NAME">installs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>1768</span> </span><span class="WHIT">        </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._db.getConfig</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">apps</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1769</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">apps.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1770</span> </span><span class="WHIT">      </span><span class="NAME">installs.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">sys</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1771</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1772</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1773</span> </span><span class="WHIT">    </span><span class="NAME">apps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getCached</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1774</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">apps.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1775</span> </span><span class="WHIT">      </span><span class="NAME">installs.push</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">name</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">apps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">sys</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1776</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1777</span> </span><span class="WHIT">    </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">install</span><span class="PUNC">(</span><span class="NAME">installs</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1778</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.DashboardController.$super.sceneDrawn.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1779</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1780</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1781</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1782</span>    * Scene이 로딩되었을 때 발생되는 이벤트를 처리한다. 이 메소드에서는
<span class='linenumber'>1783</span>    * Dashboard에서 발생되는 다양한 이벤트를 처리하기 위해 이벤트 리스너들을
<span class='linenumber'>1784</span>    * 등록한다. 
<span class='linenumber'>1785</span>    */</span><span class="WHIT">
<span class='linenumber'>1786</span> </span><span class="WHIT">  </span><span class="NAME">sceneLoaded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1787</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1788</span> </span><span class="WHIT">    </span><span class="NAME">scene.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.ui.Shortcut.EVENT_LONGPRESS</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleLongPress</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1789</span> </span><span class="WHIT">    </span><span class="NAME">scene.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TOUCHSTART</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleTouchStart</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1790</span> </span><span class="WHIT">    </span><span class="NAME">scene.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TOUCHEND</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleTouchEnd</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1791</span> </span><span class="WHIT">    </span><span class="NAME">scene.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.ui.Shortcut.EVENT_DELETE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleShortcutDelete</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1792</span> </span><span class="WHIT">    </span><span class="COMM">// table does not occupy whole screen, so listen to tap event for scene area</span><span class="WHIT">
<span class='linenumber'>1793</span> </span><span class="WHIT">    </span><span class="NAME">scene.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.TAP</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleBoardTap</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1794</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1795</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1796</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1797</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1798</span>    * 사용자가 Shortcut을 오랫동안 누르고 있을 때 발생되는 
<span class='linenumber'>1799</span>    * &lt;code>tau.ui.Shortcut.EVENT_LONGPRESS&lt;/code>이벤트를 처리한다. 현재
<span class='linenumber'>1800</span>    * Shortcut들이 삭제가능한 상태가 아니라면 삭제가능하도록 Badge를
<span class='linenumber'>1801</span>    * 출력한다. 
<span class='linenumber'>1802</span>    * @param {tau.rt.Event} e &lt;code>tau.ui.Shortcut.EVENT_LONGPRESS&lt;/code>
<span class='linenumber'>1803</span>    * @param {Number} payload Shortcut이 눌려진 시간(ms) 
<span class='linenumber'>1804</span>    */</span><span class="WHIT">
<span class='linenumber'>1805</span> </span><span class="WHIT">  </span><span class="NAME">handleLongPress</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>1806</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1807</span> </span><span class="WHIT">      </span><span class="NAME">this._editable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._editable</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1808</span> </span><span class="WHIT">      </span><span class="NAME">this.toggleDeletable</span><span class="PUNC">(</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1809</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1810</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1811</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">payload.event.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">target</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1812</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">target.getAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="NAME">tau.ui.Shortcut.ICON_CLASS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._movingShortcutsCount</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1813</span> </span><span class="WHIT">      </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target.parentNode.parentNode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1814</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1815</span> </span><span class="WHIT">        </span><span class="NAME">this.makeMutable</span><span class="PUNC">(</span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1816</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1817</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1818</span> </span><span class="WHIT">           </span><span class="NAME">this.swingback</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>1819</span> </span><span class="WHIT">           </span><span class="NAME">e.preventDefault</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1820</span> </span><span class="WHIT">           </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1821</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1822</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1823</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1824</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1825</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1826</span> </span><span class="WHIT">  </span><span class="NAME">makeMutable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1827</span> </span><span class="WHIT">    </span><span class="NAME">this._editable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1828</span> </span><span class="WHIT">    </span><span class="NAME">this.toggleDeletable</span><span class="PUNC">(</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1829</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1830</span> </span><span class="WHIT">    </span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1831</span> </span><span class="WHIT">    </span><span class="NAME">this.toggleVibrate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1832</span> 
<span class='linenumber'>1833</span> </span><span class="WHIT">    </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'moving'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1834</span> </span><span class="WHIT">    </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">this._drifter.firstChild.firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'moving_inner'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">           </span><span class="WHIT">
<span class='linenumber'>1835</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1836</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1837</span> </span><span class="WHIT">  </span><span class="NAME">toggleVibrate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1838</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.querySelectorAll</span><span class="PUNC">(</span><span class="STRN">".shortcuts"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1839</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1840</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">divs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1841</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1842</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'replacable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1843</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.addClass</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild.firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'replacable_inner'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1844</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1845</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1846</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">divs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1847</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">continue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1848</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.removeClass</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'replacable'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1849</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.removeClass</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild.firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'replacable_inner'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1850</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1851</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1852</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1853</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1854</span> </span><span class="WHIT">  </span><span class="NAME">handleTouchStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1855</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">target</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1856</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">target.getAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="NAME">tau.ui.Shortcut.ICON_CLASS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._movingShortcutsCount</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1857</span> </span><span class="WHIT">      </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target.parentNode.parentNode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1858</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1859</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1860</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1861</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1862</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1863</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1864</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1865</span>    * 
<span class='linenumber'>1866</span>    * @param e
<span class='linenumber'>1867</span>    * @param payload
<span class='linenumber'>1868</span>    * @returns {Boolean}
<span class='linenumber'>1869</span>    */</span><span class="WHIT">
<span class='linenumber'>1870</span> </span><span class="WHIT">  </span><span class="NAME">handleTouchEnd</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1871</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.touches</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">target</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1872</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">target.getAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="NAME">tau.ui.Shortcut.ICON_CLASS</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._movingShortcutsCount</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>1873</span> </span><span class="WHIT">      </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target.parentNode.parentNode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1874</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>1875</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1876</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1877</span> </span><span class="WHIT">          </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1878</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1879</span> </span><span class="WHIT">        </span><span class="NAME">this.shiftItems</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1880</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1881</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1882</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1883</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1884</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1885</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1886</span>    * 
<span class='linenumber'>1887</span>    * @param fs
<span class='linenumber'>1888</span>    */</span><span class="WHIT">
<span class='linenumber'>1889</span> </span><span class="WHIT">  </span><span class="NAME">swingback</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">fs</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1890</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this._continuousMutation</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">fs</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">this._FORCE_SWINGBACK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1891</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1892</span> </span><span class="WHIT">        </span><span class="NAME">tau.util.dom.removeClass</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'moving'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1893</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter.firstChild</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1894</span> </span><span class="WHIT">          </span><span class="NAME">tau.util.dom.removeClass</span><span class="PUNC">(</span><span class="NAME">this._drifter.firstChild.firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'moving_inner'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1895</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1896</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1897</span> </span><span class="WHIT">      </span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1898</span> </span><span class="WHIT">      </span><span class="NAME">this.toggleVibrate</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1899</span> </span><span class="WHIT">      </span><span class="NAME">this._editable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1900</span> </span><span class="WHIT">      </span><span class="NAME">this.toggleDeletable</span><span class="PUNC">(</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1901</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1902</span> </span><span class="WHIT">    </span><span class="NAME">this._swapTarget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1903</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1904</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1905</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1906</span>    * 
<span class='linenumber'>1907</span>    * @param newItem
<span class='linenumber'>1908</span>    * @param targetItem
<span class='linenumber'>1909</span>    */</span><span class="WHIT">
<span class='linenumber'>1910</span> </span><span class="WHIT">  </span><span class="NAME">swapItems</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">newItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetItem</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1911</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newItem.style.top</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1912</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newItem.style.left</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1913</span> 
<span class='linenumber'>1914</span> </span><span class="WHIT">    </span><span class="NAME">this._swapTarget</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">targetItem</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1915</span> </span><span class="WHIT">    </span><span class="NAME">this.moveItemToPosition</span><span class="PUNC">(</span><span class="NAME">targetItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newTop</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">newLeft</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1916</span> </span><span class="WHIT">    </span><span class="NAME">this.moveItemToAnotherItemPosition</span><span class="PUNC">(</span><span class="NAME">newItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1917</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1918</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1919</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1920</span>    * 
<span class='linenumber'>1921</span>    * @param newItem
<span class='linenumber'>1922</span>    * @param targetItem
<span class='linenumber'>1923</span>    */</span><span class="WHIT">
<span class='linenumber'>1924</span> </span><span class="WHIT">  </span><span class="NAME">shiftItems</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">newItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetItem</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1925</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._ul.children</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1926</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">newItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1927</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">targetItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1928</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"DESC"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"ASC"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1929</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">startIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1930</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">endIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">newIndex</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">targetIndex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1931</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1932</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">targetTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">targetItem.style.top</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1933</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">targetLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">targetItem.style.left</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1934</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1935</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"ASC"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1936</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">startIndex</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">endIndex</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1937</span> </span><span class="WHIT">        </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild.style.webkitTransitionDelay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NUMB">30</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"ms"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1938</span> </span><span class="WHIT">        </span><span class="NAME">this.moveItemToAnotherItemPosition</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>1939</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1940</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1941</span> </span><span class="WHIT">      </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">endIndex</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">></span><span class="NAME">startIndex</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">--</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1942</span> </span><span class="WHIT">        </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild.style.webkitTransitionDelay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NUMB">30</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"ms"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1943</span> </span><span class="WHIT">        </span><span class="NAME">this.moveItemToAnotherItemPosition</span><span class="PUNC">(</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>1944</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1945</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1946</span> 
<span class='linenumber'>1947</span> </span><span class="WHIT">    </span><span class="NAME">this.moveItemToPosition</span><span class="PUNC">(</span><span class="NAME">newItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetItem</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetTop</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetLeft</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1948</span> 
<span class='linenumber'>1949</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1950</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1951</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1952</span>    * @private
<span class='linenumber'>1953</span>    * @param e
<span class='linenumber'>1954</span>    * @param t
<span class='linenumber'>1955</span>    * @param x
<span class='linenumber'>1956</span>    * @param y
<span class='linenumber'>1957</span>    */</span><span class="WHIT">
<span class='linenumber'>1958</span> </span><span class="WHIT">  </span><span class="NAME">_ontransitionEnd</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1959</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.propertyName</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"-webkit-transform"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1960</span> </span><span class="WHIT">      </span><span class="NAME">e.target.style.webkitTransitionTimingFunction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1961</span> </span><span class="WHIT">      </span><span class="NAME">e.target.style.webkitTransitionDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1962</span> </span><span class="WHIT">      </span><span class="NAME">e.target.style.webkitTransform</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1963</span> </span><span class="WHIT">      </span><span class="NAME">e.target.style.cssText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"top:"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">e.target.style.top</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px;left:"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">e.target.style.left</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px;"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"width:"</span><span class="PUNC">+</span><span class="NAME">this.widthAlpha</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px;height:"</span><span class="PUNC">+</span><span class="NAME">this.heightAlpha</span><span class="PUNC">+</span><span class="STRN">"px;"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1964</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>1965</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>1966</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._swapTarget</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>1967</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.parentElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1968</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1969</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1970</span> </span><span class="WHIT">            </span><span class="NAME">a</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._drifter.parentElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1971</span> </span><span class="WHIT">            </span><span class="NAME">bIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1972</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1973</span> </span><span class="WHIT">          </span><span class="NAME">this._ul.insertBefore</span><span class="PUNC">(</span><span class="NAME">this._ul.children</span><span class="PUNC">[</span><span class="NAME">bIndex</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1974</span> </span><span class="WHIT">          </span><span class="NAME">this._ul.insertBefore</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._ul.children</span><span class="PUNC">[</span><span class="NAME">bIndex</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">nextSibling</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1975</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>1976</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">t.parentElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1977</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">this._drifter</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.indexOf</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1978</span> </span><span class="WHIT">            </span><span class="NAME">target</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">target.nextSibling</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1979</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1980</span> </span><span class="WHIT">          </span><span class="NAME">this._ul.insertBefore</span><span class="PUNC">(</span><span class="NAME">this._drifter.parentElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>1981</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1982</span> </span><span class="WHIT">        </span><span class="NAME">this.swingback</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1983</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1984</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>1985</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>1986</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>1987</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>1988</span>    * 
<span class='linenumber'>1989</span>    * @param item
<span class='linenumber'>1990</span>    * @returns {Number}
<span class='linenumber'>1991</span>    */</span><span class="WHIT">
<span class='linenumber'>1992</span> </span><span class="WHIT">  </span><span class="NAME">indexOf</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">item</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1993</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._ul.children</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1994</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">divs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1995</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">item</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">firstChild</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>1996</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>1997</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1998</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>1999</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2000</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2001</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2002</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2003</span>    * 
<span class='linenumber'>2004</span>    */</span><span class="WHIT">
<span class='linenumber'>2005</span> </span><span class="WHIT">  </span><span class="NAME">setInitialPosition</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2006</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.querySelectorAll</span><span class="PUNC">(</span><span class="STRN">".shortcuts"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2007</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">&lt;</span><span class="NAME">divs.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2008</span> </span><span class="WHIT">      </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.top</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetTop</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.top</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2009</span> </span><span class="WHIT">      </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.left</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offsetLeft</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">divs</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">style.left</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2010</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2011</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2012</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2013</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2014</span>    * 
<span class='linenumber'>2015</span>    * @param o1
<span class='linenumber'>2016</span>    * @param o2
<span class='linenumber'>2017</span>    */</span><span class="WHIT">
<span class='linenumber'>2018</span> </span><span class="WHIT">  </span><span class="NAME">moveItemToAnotherItemPosition</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2019</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">o1.style.top</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">o1.style.left</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2020</span> </span><span class="WHIT">      </span><span class="NAME">this.setInitialPosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2021</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2022</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">o2.style.top</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">o2.style.left</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2023</span> </span><span class="WHIT">      </span><span class="NAME">this.setInitialPosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2024</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2025</span> </span><span class="WHIT">    </span><span class="NAME">this.moveItemToPosition</span><span class="PUNC">(</span><span class="NAME">o1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2.style.top</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2.style.left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2026</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2027</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2028</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2029</span>    * 
<span class='linenumber'>2030</span>    * @param o1
<span class='linenumber'>2031</span>    * @param o2
<span class='linenumber'>2032</span>    * @param top
<span class='linenumber'>2033</span>    * @param left
<span class='linenumber'>2034</span>    */</span><span class="WHIT">
<span class='linenumber'>2035</span> </span><span class="WHIT">  </span><span class="NAME">moveItemToPosition</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">left</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2036</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">o1.style.top</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">o1.style.left</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2037</span> </span><span class="WHIT">      </span><span class="NAME">this.setInitialPosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2038</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2039</span> 
<span class='linenumber'>2040</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2041</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tempY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">top</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">o1.style.top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2042</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tempX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">o1.style.left</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2043</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2044</span> </span><span class="WHIT">    </span><span class="NAME">o1.style.webkitTransitionTimingFunction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"ease-in"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2045</span> </span><span class="WHIT">    </span><span class="NAME">o1.style.webkitTransitionDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"0.5s"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2046</span> </span><span class="WHIT">    </span><span class="NAME">o1.style.webkitTransform</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"translate3d("</span><span class="PUNC">+</span><span class="NAME">tempX</span><span class="PUNC">+</span><span class="STRN">"px, "</span><span class="PUNC">+</span><span class="NAME">tempY</span><span class="PUNC">+</span><span class="STRN">"px, 0)"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2047</span> </span><span class="WHIT">    </span><span class="NAME">this._movingShortcutsCount</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2048</span> </span><span class="WHIT">    </span><span class="NAME">o1.addEventListener</span><span class="PUNC">(</span><span class="STRN">"webkitTransitionEnd"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2049</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.propertyName</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"-webkit-transform"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2050</span> </span><span class="WHIT">        </span><span class="NAME">self._ontransitionEnd</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">o2</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tempY</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tempX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2051</span> </span><span class="WHIT">        </span><span class="NAME">e.target.removeEventListener</span><span class="PUNC">(</span><span class="STRN">"webkitTransitionEnd"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments.callee</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2052</span> </span><span class="WHIT">        </span><span class="NAME">self._movingShortcutsCount</span><span class="PUNC">--</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2053</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2054</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2055</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2056</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2057</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2058</span>    * 사용자가 Shortcut의 삭제 Badge를 터치했을 때 발생되는 이벤트를 처리한다.
<span class='linenumber'>2059</span>    * 이때 같이 전달 받는 payload는 없음(undefined)
<span class='linenumber'>2060</span>    * @param e {tau.rt.Event} e &lt;code>tau.ui.Shortcut.EVENT_DELETE&lt;/code>
<span class='linenumber'>2061</span>    * @param payload
<span class='linenumber'>2062</span>    */</span><span class="WHIT">
<span class='linenumber'>2063</span> </span><span class="WHIT">  </span><span class="NAME">handleShortcutDelete</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2064</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2065</span> </span><span class="WHIT">    </span><span class="NAME">tau.confirm</span><span class="PUNC">(</span><span class="STRN">'앱('</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">shortcut.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">')을 삭제하시겠습니까?'</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2066</span> </span><span class="WHIT">      </span><span class="NAME">title</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'확인'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2067</span> </span><span class="WHIT">      </span><span class="NAME">callbackFn</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">returnVal</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2068</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">returnVal</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2069</span> </span><span class="WHIT">          </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2070</span> </span><span class="WHIT">            </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fireEvent</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2071</span> </span><span class="WHIT">                </span><span class="NAME">tau.rt.Event.RT_UNINSTALL</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">shortcut.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2072</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">200</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2073</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2074</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2075</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2076</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2077</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2078</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2079</span>    * 사용자가 Dashboard의 Shortcut을 터치했을 때 발생하는 이벤트를 처리한다. 사용자가
<span class='linenumber'>2080</span>    * 터치한 Shortcut을 확인하고 해당 앱을 실행시킨다. 만약 Shortcut이 아닌 Board를
<span class='linenumber'>2081</span>    * 터치했을 때 현재 Editing모드이면 Editing모드를 해제한다.
<span class='linenumber'>2082</span>    * @param {tau.rt.Event} e 사용자가 Shortcut을 터치했을 때 발생하는 TAP 이벤트
<span class='linenumber'>2083</span>    */</span><span class="WHIT">
<span class='linenumber'>2084</span> </span><span class="WHIT">  </span><span class="NAME">handleBoardTap</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2085</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this._movingShortcutsCount</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2086</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2087</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2088</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2089</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">src</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Shortcut</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2090</span> </span><span class="WHIT">      </span><span class="NAME">this._editable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2091</span> </span><span class="WHIT">      </span><span class="NAME">this.toggleDeletable</span><span class="PUNC">(</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2092</span> </span><span class="WHIT">      </span><span class="NAME">this.swingback</span><span class="PUNC">(</span><span class="NAME">this._FORCE_SWINGBACK</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2093</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">src</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Shortcut</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this._editable</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2094</span> </span><span class="WHIT">      </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">fireEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_START</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2095</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2096</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2097</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2098</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2099</span>    * 기기의 Orientation이 변경되었을 때 Dashboard의 Short Layout을 변경한다.
<span class='linenumber'>2100</span>    * @param {tau.rt.Event} e Orientation Change 이벤트
<span class='linenumber'>2101</span>    */</span><span class="WHIT">
<span class='linenumber'>2102</span> </span><span class="WHIT">  </span><span class="NAME">handleOrientationChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2103</span> </span><span class="WHIT">    </span><span class="NAME">this.swingback</span><span class="PUNC">(</span><span class="NAME">this._FORCE_SWINGBACK</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2104</span> </span><span class="WHIT">    </span><span class="NAME">this._panel.render</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2105</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2106</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2107</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2108</span>    * Module에 badge 값이 변경되었을 경우 발생되는 이벤트를 처리한다. 이때 변경되는 bage의
<span class='linenumber'>2109</span>    * 값은 payload로 전달된다.
<span class='linenumber'>2110</span>    * @see tau.rt.Module.EVENT_BADGESET
<span class='linenumber'>2111</span>    * @param {tau.rt.Event} e Badge가 변경되었을 때 발생되는 이벤트
<span class='linenumber'>2112</span>    */</span><span class="WHIT">
<span class='linenumber'>2113</span> </span><span class="WHIT">  </span><span class="NAME">handleBadgeChanage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2114</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcut</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2115</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">src</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.rt.Module</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2116</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._panel.findShortcut</span><span class="PUNC">(</span><span class="NAME">src.getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2117</span> </span><span class="WHIT">        </span><span class="NAME">shortcut.setBadge</span><span class="PUNC">(</span><span class="NAME">payload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// payload is badge value;</span><span class="WHIT">
<span class='linenumber'>2118</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2119</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2120</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2121</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2122</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2123</span>    * flag의 상태에 따라 Shortcut에 삭제 Badge를 출력하거나 삭제한다.
<span class='linenumber'>2124</span>    * @param {Boolean} flag true이면 삭제 Badge를 출력 그렇지 않으면 삭제
<span class='linenumber'>2125</span>    */</span><span class="WHIT">
<span class='linenumber'>2126</span> </span><span class="WHIT">  </span><span class="NAME">toggleDeletable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">flag</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2127</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">  </span><span class="NAME">this._panel.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2128</span> </span><span class="WHIT">    </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">shortcuts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2129</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcuts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isMutable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2130</span> </span><span class="WHIT">        </span><span class="NAME">shortcuts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">deletable</span><span class="PUNC">(</span><span class="NAME">flag</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2131</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2132</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2133</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2134</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2135</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2136</span>    * Dashboard를 커스터마이징하기 위한 확장 메소드이며 기본으로 제공되는 Dashboard를
<span class='linenumber'>2137</span>    * 커스터마이징하고자 할 경우 이 메소드를 Override해서 구현한다. 이 메소드에서 생성되는
<span class='linenumber'>2138</span>    * UI는 Dashboard에서 상단에 위치하게 된다. 이 메소드를 통해 반환되는 객체는
<span class='linenumber'>2139</span>    * &lt;code>tau.ui.Component&lt;/code>의 인스턴스이어야 한다.
<span class='linenumber'>2140</span>    * @return {tau.ui.Component} Dashboard의 상단에 추가할 UI
<span class='linenumber'>2141</span>    */</span><span class="WHIT">
<span class='linenumber'>2142</span> </span><span class="WHIT">  </span><span class="NAME">loadHeader</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2143</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2144</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">banner</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Panel</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">baseStyleClass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'tau-dashboard-banner'</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2145</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">logo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Label</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2146</span> </span><span class="WHIT">      </span><span class="NAME">text</span><span class="PUNC">:</span><span class="STRN">"Mobello"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2147</span> </span><span class="WHIT">      </span><span class="NAME">styles</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2148</span> </span><span class="WHIT">        </span><span class="NAME">padding</span><span class="PUNC">:</span><span class="STRN">"5px"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2149</span> </span><span class="WHIT">        </span><span class="NAME">font</span><span class="PUNC">:</span><span class="STRN">"20px/1.5em TrebuchetMS"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2150</span> </span><span class="WHIT">        </span><span class="NAME">color</span><span class="PUNC">:</span><span class="STRN">"white"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2151</span> </span><span class="WHIT">        </span><span class="STRN">"font-weight"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"bold"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2152</span> </span><span class="WHIT">        </span><span class="STRN">"text-shadow"</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"0 -1px 0 rgba(0,0,0,0.3)"</span><span class="WHIT">
<span class='linenumber'>2153</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2154</span> </span><span class="WHIT">    </span><span class="NAME">banner.add</span><span class="PUNC">(</span><span class="NAME">logo</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2155</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2156</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">banner</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2157</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2158</span> 
<span class='linenumber'>2159</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2160</span>    * Dashboard에 Shortcut을 출력하는 Panel을 생성하여 반환한다. Dashboard를 커스터마이징
<span class='linenumber'>2161</span>    * 하고자 할 경우 상속받은 클래스에서 이 메소드를 Override하지 않도록 권고한다. 이 메소드를
<span class='linenumber'>2162</span>    * 통해 생성되는 Panel은 UI Framework에서 제공하는 동작을 구현하고 있으므로 사용자가
<span class='linenumber'>2163</span>    * 직접 수정할 경우 예기치 않는 오류가 발생할 수 있다.
<span class='linenumber'>2164</span>    * @returns {tau.ui.Panel} Shortcut이 출력되는 Panel 객체
<span class='linenumber'>2165</span>    */</span><span class="WHIT">
<span class='linenumber'>2166</span> </span><span class="WHIT">  </span><span class="NAME">loadShortcutPanel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2167</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2168</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">db</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._db</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2169</span> </span><span class="WHIT">        </span><span class="NAME">panel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Panel</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">styles</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'100%'</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2170</span> </span><span class="WHIT">        </span><span class="NAME">overrides</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// override methods definition</span><span class="WHIT">
<span class='linenumber'>2171</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'>2172</span>        * 현재 Shortcut Panel에 출력을 위한 컬럼개수를 반환한다. 만약 Device의 넓이가
<span class='linenumber'>2173</span>        * 최대 Shortcut을 출력할 수 있는 개수를 초과할 경우 최대 출력 가능한 컬럼 개수를
<span class='linenumber'>2174</span>        * 반환한다.
<span class='linenumber'>2175</span>        * @private
<span class='linenumber'>2176</span>        */</span><span class="WHIT">
<span class='linenumber'>2177</span> </span><span class="WHIT">      </span><span class="NAME">_getCols</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2178</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.senseOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2179</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cols</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">o</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">'landscape'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">db.getMaxCols</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">db.getCols</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2180</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">availcols</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.parseInt</span><span class="PUNC">(</span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">70</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2181</span> </span><span class="WHIT">        </span><span class="COMM">//70px is optimal width of shortcut</span><span class="WHIT">
<span class='linenumber'>2182</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">availcols</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">cols</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">availcols</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">cols</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2183</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2184</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2185</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'>2186</span>        * Shortcut을 Rendering하기 위해 Layout을 잡는다.
<span class='linenumber'>2187</span>        * @private
<span class='linenumber'>2188</span>        */</span><span class="WHIT">
<span class='linenumber'>2189</span> </span><span class="WHIT">      </span><span class="NAME">render</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">refresh</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2190</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2191</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2192</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2193</span> </span><span class="WHIT">        </span><span class="NAME">self.widthAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">80</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2194</span> </span><span class="WHIT">        </span><span class="NAME">self.heightAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">90</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2195</span> 
<span class='linenumber'>2196</span> </span><span class="WHIT">        </span><span class="NAME">self.widthMin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">80</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2197</span> </span><span class="WHIT">        </span><span class="NAME">self.widthMax</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">200</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2198</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2199</span> </span><span class="WHIT">        </span><span class="NAME">self.heightMin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">90</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2200</span> </span><span class="WHIT">        </span><span class="NAME">self.heightMax</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.isIPad</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">120</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">self.heightMin</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2201</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2202</span> </span><span class="WHIT">        </span><span class="NAME">self.ipadPortraitWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">768</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2203</span> </span><span class="WHIT">        </span><span class="NAME">self.ipadLandScapeHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">768</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2204</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2205</span> </span><span class="WHIT">        </span><span class="NAME">self.widthAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">self.ipadPortraitWidth</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2206</span> </span><span class="WHIT">        </span><span class="NAME">self.widthAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">self.widthAlpha</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">self.widthMin</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">self.widthMax</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2207</span> </span><span class="WHIT">        </span><span class="NAME">self.heightAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">self.ipadLandScapeHeight</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2208</span> </span><span class="WHIT">        </span><span class="NAME">self.heightAlpha</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">self.heightAlpha</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">self.heightMin</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">self.heightMax</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2209</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2210</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2211</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2212</span> </span><span class="WHIT">            </span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDrawableComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">            </span><span class="WHIT">
<span class='linenumber'>2213</span> 
<span class='linenumber'>2214</span> </span><span class="WHIT">        </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2215</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dashboardSection</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.firstChild</span><span class="PUNC">;</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2216</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">dashboardSection</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">refresh</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2217</span> 
<span class='linenumber'>2218</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">refresh</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">dashboardSection</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// fix location here!</span><span class="WHIT">
<span class='linenumber'>2219</span> </span><span class="WHIT">            </span><span class="NAME">parent.removeChild</span><span class="PUNC">(</span><span class="NAME">dashboardSection</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2220</span> </span><span class="WHIT">            </span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2221</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2222</span> </span><span class="WHIT">          </span><span class="NAME">dashboardSection</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2223</span> </span><span class="WHIT">          </span><span class="NAME">parent.appendChild</span><span class="PUNC">(</span><span class="NAME">dashboardSection</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2224</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2225</span> </span><span class="WHIT">          </span><span class="NAME">self._ul</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"ul"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2226</span> </span><span class="WHIT">          </span><span class="NAME">dashboardSection.appendChild</span><span class="PUNC">(</span><span class="NAME">self._ul</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2227</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2228</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2229</span> </span><span class="WHIT">          </span><span class="NAME">dashboardSection.setAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"tau-dashboard_section"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2230</span> 
<span class='linenumber'>2231</span> </span><span class="WHIT">          </span><span class="NAME">self._ul.setAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"tau-dashboard_ul"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2232</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2233</span> 
<span class='linenumber'>2234</span> </span><span class="WHIT">        </span><span class="NAME">self._ul</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dashboardSection.firstChild</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2235</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">li</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2236</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">subDiv</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2237</span> 
<span class='linenumber'>2238</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">comps.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2239</span> </span><span class="WHIT">        </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2240</span> </span><span class="WHIT">          </span><span class="NAME">comp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">refresh</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">comps</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">comps.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2241</span> </span><span class="WHIT">          </span><span class="NAME">comp.clear</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2242</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2243</span> </span><span class="WHIT">          </span><span class="NAME">li</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"li"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2244</span> </span><span class="WHIT">          </span><span class="NAME">li.setAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"dashboard_li"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2245</span> </span><span class="WHIT">          </span><span class="NAME">li.setAttribute</span><span class="PUNC">(</span><span class="STRN">"shortcut_name"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">comp._name</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2246</span> </span><span class="WHIT">          </span><span class="NAME">li.style.width</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">self.widthAlpha</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2247</span> </span><span class="WHIT">          </span><span class="NAME">li.style.height</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">self.heightAlpha</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2248</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2249</span> </span><span class="WHIT">          </span><span class="NAME">subDiv</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2250</span> </span><span class="WHIT">          </span><span class="NAME">subDiv.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">self.widthAlpha</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2251</span> </span><span class="WHIT">          </span><span class="NAME">subDiv.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">self.heightAlpha</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2252</span> </span><span class="WHIT">          </span><span class="NAME">subDiv.setAttribute</span><span class="PUNC">(</span><span class="STRN">"class"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"shortcuts movable"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2253</span> </span><span class="WHIT">          </span><span class="NAME">li.appendChild</span><span class="PUNC">(</span><span class="NAME">subDiv</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2254</span> </span><span class="WHIT">          </span><span class="NAME">self._ul.appendChild</span><span class="PUNC">(</span><span class="NAME">li</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2255</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2256</span> </span><span class="WHIT">          </span><span class="NAME">comp.draw</span><span class="PUNC">(</span><span class="NAME">subDiv</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2257</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">       </span><span class="WHIT">
<span class='linenumber'>2258</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2259</span> </span><span class="WHIT">        </span><span class="NAME">self.setInitialPosition</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2260</span> </span><span class="COMM">//        if(self._drifter){</span><span class="WHIT">
<span class='linenumber'>2261</span> </span><span class="COMM">//          self.makeMutable();</span><span class="WHIT">
<span class='linenumber'>2262</span> </span><span class="COMM">//        }</span><span class="WHIT">
<span class='linenumber'>2263</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">refresh</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2264</span> </span><span class="WHIT">          </span><span class="NAME">this.balloonConfig</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2265</span> </span><span class="WHIT">              </span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2266</span> </span><span class="WHIT">                </span><span class="NAME">initialPosTop</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">200</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2267</span> </span><span class="WHIT">                </span><span class="NAME">initialPosLeft</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">30</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2268</span> </span><span class="WHIT">                </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"addToHomeIpad"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2269</span> </span><span class="WHIT">                </span><span class="NAME">translateAmount</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">210</span><span class="WHIT">
<span class='linenumber'>2270</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2271</span> </span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2272</span> </span><span class="WHIT">              </span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2273</span> </span><span class="WHIT">                </span><span class="NAME">initialPosTop</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">200</span><span class="PUNC">,</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2274</span> </span><span class="WHIT">                </span><span class="NAME">initialPosLeft</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">40</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2275</span> </span><span class="WHIT">                </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"addToHomeIphone"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2276</span> </span><span class="WHIT">                </span><span class="NAME">translateAmount</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">417</span><span class="WHIT">                </span><span class="WHIT">
<span class='linenumber'>2277</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2278</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2279</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPad</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tau.rt.isIPhone</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2280</span> </span><span class="WHIT">            </span><span class="NAME">this.balloonConfig.OSVersion</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">navigator.appVersion.match</span><span class="PUNC">(</span><span class="REGX">/OS (\d+_\d+)/i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2281</span> </span><span class="WHIT">            </span><span class="NAME">this.balloonConfig.OSVersion</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.balloonConfig.OSVersion</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="NAME">this.balloonConfig.OSVersion</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">replace</span><span class="PUNC">(</span><span class="STRN">'_'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'.'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2282</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2283</span> </span><span class="WHIT">            </span><span class="NAME">this.balloonConfig.OSVersion</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2284</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2285</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2286</span> </span><span class="WHIT">          </span><span class="NAME">this.balloonConfig.firstVisit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">localStorage.getItem</span><span class="PUNC">(</span><span class="STRN">'addToHomeVisit'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2287</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2288</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">self.balloon</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2289</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">window.navigator.standalone</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2290</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPad</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tau.rt.isIPhone</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2291</span> </span><span class="WHIT">            </span><span class="COMM">//window.navigator.standalone === false){</span><span class="WHIT">
<span class='linenumber'>2292</span> </span><span class="WHIT">            </span><span class="COMM">//when navigator.standalone is NOT undefined and is false.</span><span class="WHIT">
<span class='linenumber'>2293</span> </span><span class="WHIT">             </span><span class="NAME">this.showBalloon</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2294</span> </span><span class="WHIT">                </span><span class="STRN">"Install this web app on your device: tap '%icon' and "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='linenumber'>2295</span> </span><span class="WHIT">                </span><span class="STRN">"then 'Add to Home Screen'."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2296</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2297</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.balloonConfig.firstVisit</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2298</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">self.balloon</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2299</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">window.navigator.standalone</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2300</span> </span><span class="WHIT">              </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPad</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">tau.rt.isIPhone</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2301</span> </span><span class="WHIT">            </span><span class="NAME">this.showBalloon</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2302</span> </span><span class="WHIT">                </span><span class="STRN">"Long touch this portion to open 'system dock'"</span><span class="WHIT">
<span class='linenumber'>2303</span> </span><span class="WHIT">                </span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">20</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2304</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2305</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2306</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2307</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2308</span> </span><span class="WHIT">      </span><span class="NAME">showBalloon</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">position</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">spacer</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">delay</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">addSession</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2309</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cfg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.rt.isIPad</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.balloonConfig.top</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.balloonConfig.bottom</span><span class="PUNC">;</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2310</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2311</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2312</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.id</span><span class="PUNC">=</span><span class="STRN">'addToHomeScreen'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2313</span> </span><span class="WHIT">         </span><span class="WHIT">
<span class='linenumber'>2314</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cfg.className</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2315</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.style.cssText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'position:absolute; top:'</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">cfg.initialPosTop</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'px; left:'</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">cfg.initialPosLeft</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2316</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">text.replace</span><span class="PUNC">(</span><span class="STRN">'%icon'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.balloonConfig.OSVersion</span><span class="WHIT"> </span><span class="PUNC">>=</span><span class="WHIT"> </span><span class="NUMB">4.2</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'&lt;span class="addToHomeShare">&lt;/span>'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'&lt;span class="addToHomePlus">+&lt;/span>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2317</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.innerHTML</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span class="addToHomeArrow">&lt;/span>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2318</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.innerHTML</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span class="addToHomeClose">\u00D7&lt;/span>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2319</span> 
<span class='linenumber'>2320</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">sceneDOM</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">self.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2321</span> </span><span class="WHIT">        </span><span class="NAME">sceneDOM.appendChild</span><span class="PUNC">(</span><span class="NAME">self.balloon</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2322</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2323</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2324</span> 
<span class='linenumber'>2325</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPhone</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2326</span> </span><span class="WHIT">          </span><span class="NAME">cfg.initialPosLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">self.balloon.offsetWidth</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2327</span> </span><span class="WHIT">          </span><span class="NAME">self.balloon.style.cssText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'position:absolute; top:'</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">cfg.initialPosTop</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'px; left:'</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">cfg.initialPosLeft</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2328</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2329</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2330</span> </span><span class="WHIT">        </span><span class="NAME">self.balloon.addEventListener</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2331</span> </span><span class="WHIT">          </span><span class="NAME">sceneDOM.removeChild</span><span class="PUNC">(</span><span class="NAME">e.currentTarget</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2332</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">addSession</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2333</span> </span><span class="WHIT">            </span><span class="NAME">localStorage.setItem</span><span class="PUNC">(</span><span class="STRN">'addToHomeVisit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2334</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2335</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2336</span> </span><span class="WHIT">        </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2337</span> </span><span class="WHIT">          </span><span class="NAME">self.balloon.style.webkitTransitionDuration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"1s"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2338</span> </span><span class="WHIT">          </span><span class="NAME">self.balloon.style.webkitTransitionTimingFunction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"ease-out"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2339</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">tau.rt.isIPhone</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2340</span> </span><span class="WHIT">            </span><span class="NAME">cfg.translateAmount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">cfg.initialPosTop</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">self.balloon.offsetHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2341</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2342</span> </span><span class="WHIT">          </span><span class="NAME">self.balloon.style.webkitTransform</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'translate3d(0,'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cfg.translateAmount</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.isNumber</span><span class="PUNC">(</span><span class="NAME">spacer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">spacer</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px,0)'</span><span class="PUNC">;</span><span class="WHIT">              </span><span class="WHIT">
<span class='linenumber'>2343</span> </span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2344</span> </span><span class="WHIT">          </span><span class="NAME">self.balloon.addEventListener</span><span class="PUNC">(</span><span class="STRN">"webkitTransitionEnd"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2345</span> </span><span class="WHIT">            </span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2346</span> </span><span class="WHIT">              </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">self.balloon</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2347</span> </span><span class="WHIT">                </span><span class="NAME">sceneDOM.removeChild</span><span class="PUNC">(</span><span class="NAME">e.target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2348</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">addSession</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2349</span> </span><span class="WHIT">                  </span><span class="NAME">localStorage.setItem</span><span class="PUNC">(</span><span class="STRN">'addToHomeVisit'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2350</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">       </span><span class="WHIT">
<span class='linenumber'>2351</span> </span><span class="WHIT">              </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2352</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">5000</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2353</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2354</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tau.isNumber</span><span class="PUNC">(</span><span class="NAME">delay</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">delay</span><span class="PUNC">:</span><span class="NUMB">2000</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2355</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2356</span> 
<span class='linenumber'>2357</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'>2358</span>        * 현재 Panel에 출력된 Shortcut 컴포넌트들 중에서 주어진 이름의 Shortcut을 찾아
<span class='linenumber'>2359</span>        * 반환한다. 만약 해당하는 이름(name)의 Shurtcut컴포넌트가 존재하지 않으면
<span class='linenumber'>2360</span>        * null을 반환한다.
<span class='linenumber'>2361</span>        * @param {String} name Shurtcut컴포넌트의 이름
<span class='linenumber'>2362</span>        * @private
<span class='linenumber'>2363</span>        */</span><span class="WHIT">
<span class='linenumber'>2364</span> </span><span class="WHIT">      </span><span class="NAME">findShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2365</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2366</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">len</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">shortcuts.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">len</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2367</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2368</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2369</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2370</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2371</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2372</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2373</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2374</span> </span><span class="WHIT">      </span><span class="COMM">/**
<span class='linenumber'>2375</span>        * Dashboard에서 지정된 Shortcut을 삭제한다. 삭제된 Shortcut 자리에는
<span class='linenumber'>2376</span>        * 이후에 있는 Shortcut들이 자동으로 자리를 채우게 된다.
<span class='linenumber'>2377</span>        * @param {tau.ui.Shortcut} shortcut 삭제하고자 하는 Shortcut 객체
<span class='linenumber'>2378</span>        * @private
<span class='linenumber'>2379</span>        */</span><span class="WHIT">
<span class='linenumber'>2380</span> </span><span class="WHIT">      </span><span class="NAME">removeShortcut</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">          </span><span class="WHIT">
<span class='linenumber'>2381</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">shortcuts</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2382</span> </span><span class="WHIT">            </span><span class="NAME">idx</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">shortcuts.indexOf</span><span class="PUNC">(</span><span class="NAME">shortcut</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2383</span> </span><span class="WHIT">            </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">shortcut.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2384</span> </span><span class="WHIT">            </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dom.parentNode</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2385</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">selfIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">self.indexOf</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2386</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">drifterIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">self.indexOf</span><span class="PUNC">(</span><span class="NAME">self._drifter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2387</span> </span><span class="WHIT">        </span><span class="NAME">shortcuts.splice</span><span class="PUNC">(</span><span class="NAME">idx</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2388</span> </span><span class="WHIT">        </span><span class="NAME">parent.removeChild</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2389</span> </span><span class="WHIT">        </span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// parent is always TD tag</span><span class="WHIT">
<span class='linenumber'>2390</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent.nextSibling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2391</span> </span><span class="WHIT">            </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.nextSibling</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2392</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent.parentNode.nextSibling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2393</span> </span><span class="WHIT">            </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.parentNode.nextSibling.firstChild</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2394</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// last one - empty node so, delete it!</span><span class="WHIT">
<span class='linenumber'>2395</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent.parentNode.childNodes.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2396</span> </span><span class="WHIT">              </span><span class="NAME">parent.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2397</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// remove TR tag</span><span class="WHIT">
<span class='linenumber'>2398</span> </span><span class="WHIT">              </span><span class="NAME">parent.parentNode.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">parent.parentNode</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2399</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2400</span> </span><span class="WHIT">            </span><span class="NAME">parent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2401</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2402</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2403</span> </span><span class="WHIT">            </span><span class="NAME">dom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parent.firstChild</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2404</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">parent.previousSibling</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2405</span> </span><span class="WHIT">              </span><span class="NAME">parent.previousSibling.appendChild</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2406</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="COMM">// first</span><span class="WHIT">
<span class='linenumber'>2407</span> </span><span class="WHIT">              </span><span class="NAME">parent.parentNode.previousSibling.lastChild.appendChild</span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2408</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2409</span> </span><span class="WHIT">            </span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="NAME">shift</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">150</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2410</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2411</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2412</span> 
<span class='linenumber'>2413</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">drifterIndex</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">drifterIndex</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">selfIndex</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2414</span> </span><span class="WHIT">          </span><span class="NAME">self.swingback</span><span class="PUNC">(</span><span class="NAME">self._FORCE_SWINGBACK</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2415</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">selfIndex</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2416</span> </span><span class="WHIT">            </span><span class="NAME">self._drifter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">self._ul.children</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2417</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">selfIndex</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2418</span> </span><span class="WHIT">            </span><span class="NAME">self._drifter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">self._ul.children</span><span class="PUNC">[</span><span class="NAME">selfIndex</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2419</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2420</span> </span><span class="WHIT">          </span><span class="NAME">self.makeMutable</span><span class="PUNC">(</span><span class="NAME">self._drifter.firstChild</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2421</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2422</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2423</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2424</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">tau.mixin</span><span class="PUNC">(</span><span class="NAME">panel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">overrides</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2425</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2426</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2427</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2428</span>    * Dashboard를 커스터마이징하기 위한 확장 메소드이며 기본으로 제공되는 Dashboard를
<span class='linenumber'>2429</span>    * 커스터마이징하고자 할 경우 이 메소드를 Override해서 구현한다. 이 메소드에서 생성되는
<span class='linenumber'>2430</span>    * UI는 Dashboard에서 하단에 위치하게 된다. 이 메소드를 통해 반환되는 객체는
<span class='linenumber'>2431</span>    * &lt;code>tau.ui.Component&lt;/code>의 인스턴스이어야 한다.
<span class='linenumber'>2432</span>    * @return {tau.ui.Component} Dashboard의 하단에 추가할 UI
<span class='linenumber'>2433</span>    */</span><span class="WHIT">
<span class='linenumber'>2434</span> </span><span class="WHIT">  </span><span class="NAME">loadFooter</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2435</span> </span><span class="WHIT">    </span><span class="COMM">// do nothing</span><span class="WHIT">
<span class='linenumber'>2436</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2437</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2438</span> </span><span class="WHIT">  </span><span class="COMM">/** 
<span class='linenumber'>2439</span>    * Lifecycle 메소드로서 Dashboard 앱에 종료될 때 호출되는 Callback메소드이다. 
<span class='linenumber'>2440</span>    */</span><span class="WHIT">
<span class='linenumber'>2441</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2442</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2443</span> </span><span class="WHIT">    </span><span class="NAME">rt.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2444</span> </span><span class="WHIT">    </span><span class="NAME">rt.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Module.EVENT_BADGESET</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleBadgeChanage</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2445</span> </span><span class="WHIT">    </span><span class="NAME">rt.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_INSTALLED</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.handleInstallation</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2446</span> </span><span class="WHIT">    </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._db</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2447</span> </span><span class="WHIT">    </span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this._panel</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2448</span> </span><span class="WHIT">    </span><span class="NAME">tau.log.info</span><span class="PUNC">(</span><span class="STRN">'Destroying \"$dashboard\"'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2449</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2450</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2451</span> 
<span class='linenumber'>2452</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'>2453</span> </span><span class="COMM">/**
<span class='linenumber'>2454</span>  * @lends tau.ui.TableSceneController
<span class='linenumber'>2455</span>  */</span><span class="WHIT">
<span class='linenumber'>2456</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.TableSceneController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.SceneController</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2457</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2458</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2459</span>    * Instantiate new TableSceneController object
<span class='linenumber'>2460</span>    * @class
<span class='linenumber'>2461</span>    * Defines class for TableSceneController. TableSceneController is convenient
<span class='linenumber'>2462</span>    * controller when you make a scene using tau.ui.Table component. In this class
<span class='linenumber'>2463</span>    * there are several useful method when loading model into the table compoent
<span class='linenumber'>2464</span>    * or making specific table cell and so on. In these cases when you extend
<span class='linenumber'>2465</span>    * this class, you can simply override corresponding method defined in the
<span class='linenumber'>2466</span>    * super class.
<span class='linenumber'>2467</span>    * @constructs
<span class='linenumber'>2468</span>    * @extends tau.ui.SceneController
<span class='linenumber'>2469</span>    * @see tau.ui.SceneController
<span class='linenumber'>2470</span>    */</span><span class="WHIT">
<span class='linenumber'>2471</span> </span><span class="WHIT">  </span><span class="NAME">TableSceneController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2472</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2473</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2474</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2475</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2476</span>    * Initializes TableSceneController before doing actual woark. In this method
<span class='linenumber'>2477</span>    * &lt;code>tau.rt.Event.RT_CTRL_CHANGE&lt;/code> event is registered on the Runtime
<span class='linenumber'>2478</span>    * to handle changing controller in the SequenceNavigator.
<span class='linenumber'>2479</span>    * @overrides
<span class='linenumber'>2480</span>    */</span><span class="WHIT">
<span class='linenumber'>2481</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2482</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.TableSceneController.$super.init.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2483</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2484</span> </span><span class="WHIT">    </span><span class="NAME">rt.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.RT_CTRL_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.controllerChanged</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2485</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2486</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2487</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2488</span>    * load default table component
<span class='linenumber'>2489</span>    */</span><span class="WHIT">
<span class='linenumber'>2490</span> </span><span class="WHIT">  </span><span class="NAME">loadScene</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2491</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getTable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2492</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">table</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// table component can be set in init() method</span><span class="WHIT">
<span class='linenumber'>2493</span> </span><span class="WHIT">      </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">add</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">tau.ui.Table</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2494</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2495</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2496</span> 
<span class='linenumber'>2497</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2498</span>    * callback method. this method will be called back after current scene is
<span class='linenumber'>2499</span>    * loaded.
<span class='linenumber'>2500</span>    * @overrides
<span class='linenumber'>2501</span>    */</span><span class="WHIT">
<span class='linenumber'>2502</span> </span><span class="WHIT">  </span><span class="NAME">sceneLoaded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2503</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getTable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2504</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">table</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Table</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2505</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified Component is not Table Component: '</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2506</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.currentStack</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2507</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2508</span> </span><span class="WHIT">    </span><span class="NAME">table.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.ui.Table.EVENT_MODEL_LOAD</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._handleModelLoad</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2509</span> </span><span class="WHIT">    </span><span class="NAME">table.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.ui.Table.EVENT_CELL_LOAD</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._handleCellLoad</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2510</span> </span><span class="WHIT">    </span><span class="NAME">table.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.SELECTCHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._handleCellSelected</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2511</span> </span><span class="WHIT">    </span><span class="NAME">table.loadModel</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2512</span> 
<span class='linenumber'>2513</span> </span><span class="WHIT">    </span><span class="NAME">this._orientation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.senseOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">','</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2514</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2515</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2516</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2517</span>    * event handler method for &lt;code>tau.ui.Table.EVENT_MODEL_LOAD&lt;/code>. This
<span class='linenumber'>2518</span>    * method calls loadModel() method internally and the return value of 
<span class='linenumber'>2519</span>    * that method is greater than 0 then calls &lt;code>addNumOfCells&lt;/code> method
<span class='linenumber'>2520</span>    * to initiate making table cells.
<span class='linenumber'>2521</span>    * @private
<span class='linenumber'>2522</span>    * @param {tau.rt.Event} e &lt;code>tau.ui.Table.EVENT_MODEL_LOAD&lt;/code>
<span class='linenumber'>2523</span>    * @param {Object} payload payload object
<span class='linenumber'>2524</span>    */</span><span class="WHIT">
<span class='linenumber'>2525</span> </span><span class="WHIT">  </span><span class="NAME">_handleModelLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2526</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2527</span> </span><span class="WHIT">        </span><span class="NAME">count</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.loadModel</span><span class="PUNC">(</span><span class="NAME">payload.start</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload.size</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2528</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">count</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">count</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2529</span> </span><span class="WHIT">      </span><span class="NAME">table.addNumOfCells</span><span class="PUNC">(</span><span class="NAME">count</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2530</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2531</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2532</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2533</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2534</span>    * event handler method for &lt;code>tau.ui.Table.EVENT_CELL_LOAD&lt;/code>. This
<span class='linenumber'>2535</span>    * method calls &lt;code>makeTableCell&lt;/code> method internally and the return
<span class='linenumber'>2536</span>    * of that method is an instance of &lt;code>tau.ui.TableCell&lt;/code> then adds
<span class='linenumber'>2537</span>    * that cell into the table component.
<span class='linenumber'>2538</span>    * @private 
<span class='linenumber'>2539</span>    * @param {tau.rt.Event} e &lt;code>tau.ui.Table.EVENT_CELL_LOAD&lt;/code>
<span class='linenumber'>2540</span>    * @param {Object} payload payload object 
<span class='linenumber'>2541</span>    */</span><span class="WHIT">
<span class='linenumber'>2542</span> </span><span class="WHIT">  </span><span class="NAME">_handleCellLoad</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2543</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2544</span> </span><span class="WHIT">        </span><span class="NAME">cell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.makeTableCell</span><span class="PUNC">(</span><span class="NAME">payload.index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload.offset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2545</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cell</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">cell</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.TableCell</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2546</span> </span><span class="WHIT">      </span><span class="NAME">table.add</span><span class="PUNC">(</span><span class="NAME">cell</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2547</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2548</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2549</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2550</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2551</span>    * event handler method for &lt;code>tau.rt.Event.SELECTCHANGE&lt;/code>. This
<span class='linenumber'>2552</span>    * method will be invoked when a user touch table cell and make a call to 
<span class='linenumber'>2553</span>    * &lt;code>cellSelected()&lt;/code> method internally.
<span class='linenumber'>2554</span>    * @private
<span class='linenumber'>2555</span>    * @param {tau.rt.Event} e &lt;code>tau.rt.Event.SELECTCHANGE&lt;/code>
<span class='linenumber'>2556</span>    * @param {Object } payload payload object 
<span class='linenumber'>2557</span>    */</span><span class="WHIT">
<span class='linenumber'>2558</span> </span><span class="WHIT">  </span><span class="NAME">_handleCellSelected</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2559</span> </span><span class="WHIT">    </span><span class="NAME">this.cellSelected</span><span class="PUNC">(</span><span class="NAME">payload.current</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload.before</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2560</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2561</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2562</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2563</span>    * Returns table instance maintained by this controller.
<span class='linenumber'>2564</span>    * @returns {tau.ui.Table} table component
<span class='linenumber'>2565</span>    */</span><span class="WHIT">
<span class='linenumber'>2566</span> </span><span class="WHIT">  </span><span class="NAME">getTable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2567</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">comps</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getComponents</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2568</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">comps.length</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">comps.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">comps</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2569</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2570</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2571</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2572</span>    * event handler for &lt;code>tau.rt.Event.RT_CTRL_CHANGE&lt;/code>. This method
<span class='linenumber'>2573</span>    * handles clearing focus on table component when this controller is poped
<span class='linenumber'>2574</span>    * in the &lt;code>SequenceNavigator&lt;/code> 
<span class='linenumber'>2575</span>    * @param {tau.rt.Event} e &lt;code>tau.rt.Event.RT_CTRL_CHANGE&lt;/code>
<span class='linenumber'>2576</span>    * @param {Object} payload payload object
<span class='linenumber'>2577</span>    */</span><span class="WHIT">
<span class='linenumber'>2578</span> </span><span class="WHIT">  </span><span class="NAME">controllerChanged</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">payload</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2579</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">table</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2580</span> </span><span class="WHIT">        </span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2581</span> </span><span class="WHIT">        </span><span class="NAME">src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">e.getSource</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2582</span> </span><span class="WHIT">        </span><span class="NAME">ceil</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">payload.fg.ctrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2583</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">src</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.SequenceNavigator</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2584</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2585</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2586</span> </span><span class="WHIT">    </span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cur</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2587</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">ceil</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// if hits ceil controller</span><span class="WHIT">
<span class='linenumber'>2588</span> </span><span class="WHIT">        </span><span class="NAME">table</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getTable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2589</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">table</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2590</span> </span><span class="WHIT">          </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.senseOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.getHeight</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">','</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">tau.getWidth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2591</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">o</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">this._orientation</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2592</span> </span><span class="WHIT">            </span><span class="NAME">this._orientation</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2593</span> </span><span class="WHIT">            </span><span class="NAME">table.refresh</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2594</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2595</span> </span><span class="WHIT">          </span><span class="NAME">table.clearSelection</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2596</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2597</span> </span><span class="WHIT">        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2598</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2599</span> </span><span class="WHIT">      </span><span class="NAME">cur</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cur.getParent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2600</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2601</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2602</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2603</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2604</span>    * Loads model data. when this method is invoked it implies that the table
<span class='linenumber'>2605</span>    * component ready for loading data sync or async
<span class='linenumber'>2606</span>    * @param {Integer } start start index of rows to load
<span class='linenumber'>2607</span>    * @param {Integer} size the amount of cells to load 
<span class='linenumber'>2608</span>    * @returns {Number} the number of cells that has been loaded
<span class='linenumber'>2609</span>    */</span><span class="WHIT">
<span class='linenumber'>2610</span> </span><span class="WHIT">  </span><span class="NAME">loadModel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">start</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">size</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2611</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2612</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2613</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2614</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2615</span>    * Create TableCell and returns created new one. You can override this method
<span class='linenumber'>2616</span>    * to implement making new table cells. The first parameter 
<span class='linenumber'>2617</span>    * &lt;code>index&lt;/code> indicates the ralative index based on 
<span class='linenumber'>2618</span>    * &lt;code>offset&lt;/code>. The offset value is accumulated if table cells
<span class='linenumber'>2619</span>    * are appended when a user clicks more cell
<span class='linenumber'>2620</span>    * @param {Number} index relative index based on offset 
<span class='linenumber'>2621</span>    * @param {Number} offset accumulated count of table cells
<span class='linenumber'>2622</span>    * @returns {tau.ui.TableCell} newly created table cell object
<span class='linenumber'>2623</span>    */</span><span class="WHIT">
<span class='linenumber'>2624</span> </span><span class="WHIT">  </span><span class="NAME">makeTableCell</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">offset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2625</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2626</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2627</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2628</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2629</span>    * Invoked when a user clicks table cell which was not selected before. You
<span class='linenumber'>2630</span>    * can override this method to implement custom logic.
<span class='linenumber'>2631</span>    * @param {tau.ui.TableCell} current TableCell object selected current
<span class='linenumber'>2632</span>    * @param {tau.ui.TableCell} before TableCell object selected before
<span class='linenumber'>2633</span>    */</span><span class="WHIT">
<span class='linenumber'>2634</span> </span><span class="WHIT">  </span><span class="NAME">cellSelected</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">current</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">before</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2635</span> </span><span class="WHIT">    </span><span class="COMM">// do nothing</span><span class="WHIT">
<span class='linenumber'>2636</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2637</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2638</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2639</span>    * 
<span class='linenumber'>2640</span>    */</span><span class="WHIT">
<span class='linenumber'>2641</span> </span><span class="WHIT">  </span><span class="NAME">destroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2642</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.TableSceneController.$super.destroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2643</span> </span><span class="WHIT">    </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">unsubscribeEvent</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2644</span> </span><span class="WHIT">        </span><span class="NAME">tau.rt.Event.RT_CTRL_CHANGE</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.controllerChanged</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2645</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2646</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2647</span> 
<span class='linenumber'>2648</span> </span><span class="COMM">//------------------------------------------------------------------------------</span><span class="WHIT">
<span class='linenumber'>2649</span> </span><span class="COMM">/** @lends tau.ui.PopoverController */</span><span class="WHIT">
<span class='linenumber'>2650</span> </span><span class="NAME">$class</span><span class="PUNC">(</span><span class="STRN">'tau.ui.PopoverController'</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">extend</span><span class="PUNC">(</span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">define</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2651</span> 
<span class='linenumber'>2652</span> </span><span class="WHIT">  </span><span class="NAME">$static</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2653</span> </span><span class="WHIT">    </span><span class="NAME">CONTENT_KEY</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'content'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2654</span> </span><span class="WHIT">    </span><span class="NAME">MASKING_KEY</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'masking'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2655</span> </span><span class="WHIT">    </span><span class="NAME">DIRECTION_KEY</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'direction'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2656</span> </span><span class="WHIT">    </span><span class="NAME">UP_DIRECTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'up'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2657</span> </span><span class="WHIT">    </span><span class="NAME">DOWN_DIRECTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'down'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2658</span> </span><span class="WHIT">    </span><span class="NAME">LEFT_DIRECTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'left'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2659</span> </span><span class="WHIT">    </span><span class="NAME">RIGHT_DIRECTION</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'right'</span><span class="WHIT">
<span class='linenumber'>2660</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2661</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2662</span>    * 생성자, 새로운 PopoverController객체를 생성한다.
<span class='linenumber'>2663</span>    * &lt;p/>{@link tau.ui.Controller} 플로팅된 Layer형태 나타나게 한다.
<span class='linenumber'>2664</span>    * &lt;p/>
<span class='linenumber'>2665</span>    * 현재 스크린에 대한 포커스를 잃지 않고 작은 영역에 추가적인 내용을 보여주기 위한 용도로 사용한다.
<span class='linenumber'>2666</span>    * &lt;code>PopoverController&lt;/code>는 플로팅 한 영역을 잡아주는 역할을 하며, 그 안에 내용은 
<span class='linenumber'>2667</span>    * &lt;code>presentCtrl&lt;/code> 함수에 전달되는 
<span class='linenumber'>2668</span>    * {@link tau.ui.Controller}들이 채우는 역할을 한다.
<span class='linenumber'>2669</span>    * &lt;p/>
<span class='linenumber'>2670</span>    * &lt;code>PopoverController&lt;/code>의 크기는 생성자에 전달되는 width, height를 객체 타입으로 아래와 같이 전달한다. 
<span class='linenumber'>2671</span>    * size값을 생성자에 전달하지 않으면 기본값은 width 300px , height 500px로 지정되어 있다.
<span class='linenumber'>2672</span>    * @class 
<span class='linenumber'>2673</span>    * @constructs
<span class='linenumber'>2674</span>    * @extends tau.ui.Controller
<span class='linenumber'>2675</span>    * @example 
<span class='linenumber'>2676</span>    *  var popoverCtrl = new tau.ui.PopoverController({
<span class='linenumber'>2677</span>    *  width = '300px',
<span class='linenumber'>2678</span>    *  height = '500px'
<span class='linenumber'>2679</span>    * });
<span class='linenumber'>2680</span>    * @param {String} [opts.width] PopoverController의 넓이 크기(px단위)  
<span class='linenumber'>2681</span>    * @param {String} [opts.height] PopoverController의 높이 크기(px단위) 
<span class='linenumber'>2682</span>    * 
<span class='linenumber'>2683</span>    * 
<span class='linenumber'>2684</span>    */</span><span class="WHIT">
<span class='linenumber'>2685</span> </span><span class="WHIT">  </span><span class="NAME">PopoverController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">size</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2686</span> </span><span class="WHIT">    </span><span class="NAME">this._directionSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//direction 삼각형 만드는 border사이즈.</span><span class="WHIT">
<span class='linenumber'>2687</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">borderWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.util.dom.getStyleFromCssRule</span><span class="PUNC">(</span><span class="STRN">'.tau-popoverController'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'border-width'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2688</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">paddingWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.util.dom.getStyleFromCssRule</span><span class="PUNC">(</span><span class="STRN">'.tau-popoverController'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'padding'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2689</span> </span><span class="WHIT">    </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//content를 감싸는 껍데기의 두께(border와 padding으로 구성됨).  </span><span class="WHIT">
<span class='linenumber'>2690</span> </span><span class="WHIT">    </span><span class="COMM">//px support 체크</span><span class="WHIT">
<span class='linenumber'>2691</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">borderWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2692</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'px'</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">borderWidth.substring</span><span class="PUNC">(</span><span class="NAME">borderWidth.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2693</span> </span><span class="WHIT">        </span><span class="NAME">borderWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">borderWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2694</span> </span><span class="WHIT">        </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">borderWidth</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2695</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2696</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Only Support pixel unit , Modify border-width of tau-popoverController '</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2697</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2698</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2699</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2700</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">paddingWidth</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2701</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="STRN">'px'</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">paddingWidth.substring</span><span class="PUNC">(</span><span class="NAME">paddingWidth.length</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2702</span> </span><span class="WHIT">        </span><span class="NAME">paddingWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">paddingWidth</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2703</span> </span><span class="WHIT">        </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">paddingWidth</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2704</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2705</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Only Support pixel unit , Modify padding of tau-popoverController '</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2706</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2707</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2708</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2709</span> </span><span class="WHIT">    </span><span class="COMM">//width 총합 체크 </span><span class="WHIT">
<span class='linenumber'>2710</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2711</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2712</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">size</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2713</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">size</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">'object'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2714</span> </span><span class="WHIT">        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified size is not object type '</span><span class="WHIT">
<span class='linenumber'>2715</span> </span><span class="WHIT">            </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">size</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2716</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2717</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2718</span> </span><span class="WHIT">    </span><span class="NAME">this.size</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2719</span> </span><span class="WHIT">        </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">size.width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2720</span> </span><span class="WHIT">        </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">size.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="WHIT">
<span class='linenumber'>2721</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2722</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2723</span> </span><span class="WHIT">      </span><span class="NAME">this.size</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'306px'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'506px'</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2724</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2725</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2726</span> </span><span class="WHIT">    </span><span class="NAME">this._controller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2727</span> </span><span class="WHIT">    </span><span class="NAME">this._targetComponent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2728</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2729</span> </span><span class="WHIT">    </span><span class="NAME">this.visible</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2730</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2731</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2732</span>    * Override 메소드이며 초기화 작업을 수행한다.
<span class='linenumber'>2733</span>    * @see tau.ui.Controller.init
<span class='linenumber'>2734</span>    */</span><span class="WHIT">
<span class='linenumber'>2735</span> </span><span class="WHIT">  </span><span class="NAME">init</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2736</span> </span><span class="WHIT">    </span><span class="NAME">this.$renderData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.renderer.initialize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2737</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2738</span> </span><span class="WHIT">    </span><span class="NAME">rt.onEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2739</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2740</span> </span><span class="WHIT">    </span><span class="COMM">//Chrome Browser Bug about CSS</span><span class="WHIT">
<span class='linenumber'>2741</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cssRules</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.styleSheets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cssRules</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">document.styleSheets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">rules</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2742</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cssRules</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2743</span> </span><span class="WHIT">           </span><span class="WHIT">
<span class='linenumber'>2744</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rootDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2745</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2746</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">$themeMgr._getDefaultThemeName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2747</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2748</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">'ios'</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">themeName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2749</span> </span><span class="WHIT">        </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">14</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2750</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2751</span> </span><span class="WHIT">        </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">6</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2752</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2753</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2754</span> </span><span class="WHIT">      </span><span class="NAME">this.size.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.size.width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2755</span> </span><span class="WHIT">      </span><span class="NAME">this.size.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.size.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2756</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2757</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2758</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2759</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2760</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2761</span>    * doStart 함수는 lifecycle 관련 메소드로 시스템이 호출하므로 직접적으로 호출하지 않는다.
<span class='linenumber'>2762</span>    */</span><span class="WHIT">
<span class='linenumber'>2763</span> </span><span class="WHIT">  </span><span class="NAME">doStart</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2764</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.PopoverController.$super.doStart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2765</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2766</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2767</span>    * propagateEvent 함수는 Event관 메소드로 시스템이 호출하므로 직접적으로 호출하지 않는다.
<span class='linenumber'>2768</span>    */</span><span class="WHIT">
<span class='linenumber'>2769</span> </span><span class="WHIT">  </span><span class="NAME">propagateEvent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2770</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.PopoverController.$super.propagateEvent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2771</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2772</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2773</span>    * PopoverController가 차지하는 영역에서 주어진 파라미터(key)에 따라 해당되는 DOM객체를
<span class='linenumber'>2774</span>    * 반환한다. 만약 key가 지정되지 않으면 현재 PopoverController 최상위 DOM앨리먼트를
<span class='linenumber'>2775</span>    * 찾아 반환한다. 만약 PopoverController Content영역에 해당하는 DOM앨리먼트를
<span class='linenumber'>2776</span>    * 반환하고자 한다면 'tau.ui.CONTENT_KEY'를 사용하면 된다.
<span class='linenumber'>2777</span>    * 
<span class='linenumber'>2778</span>    * @param {String} key NavigationController의 각 영영에 해당되는 키 값
<span class='linenumber'>2779</span>    * @returns {HTMLElement} DOM element
<span class='linenumber'>2780</span>    */</span><span class="WHIT">
<span class='linenumber'>2781</span> </span><span class="WHIT">  </span><span class="NAME">getDOM</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2782</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.renderer.getParentElement</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2783</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2784</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2785</span>    * 현재 컨트롤러의 모든 하위{@link tau.rt.EventDelegator}을 반환한다.:
<span class='linenumber'>2786</span>    * 컨포넌트 히트 테스트에서 사용됨.
<span class='linenumber'>2787</span>    * @returns {Array} 하위(EventDelegators)을 가지는 배열
<span class='linenumber'>2788</span>    */</span><span class="WHIT">
<span class='linenumber'>2789</span> </span><span class="WHIT">  </span><span class="NAME">getSubDelegators</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2790</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">children</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>2791</span> </span><span class="WHIT">      </span><span class="NAME">tau.ui.PopoverController.$super.getSubDelegators.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2792</span> </span><span class="WHIT">    </span><span class="NAME">children.push</span><span class="PUNC">(</span><span class="NAME">this._controller</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2793</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">children</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2794</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2795</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2796</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2797</span>    * PopoverController가 현재 보여지는 상태인지 리턴한다.
<span class='linenumber'>2798</span>    * 
<span class='linenumber'>2799</span>    * @param {String} key NavigationController의 각 영영에 해당되는 키 값
<span class='linenumber'>2800</span>    * @returns {Boolean} Popover의 보여지는 상태값
<span class='linenumber'>2801</span>    */</span><span class="WHIT">
<span class='linenumber'>2802</span> </span><span class="WHIT">  </span><span class="NAME">isVisible</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2803</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.visible</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2804</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2805</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2806</span>    * &lt;code>PopoverController&lt;/code>를 화면에 표시하게 하는 함수이다.
<span class='linenumber'>2807</span>    * &lt;code>presentCtrl&lt;/code>함수는 2개의 필수 파라미터를 필요로 한다. 
<span class='linenumber'>2808</span>    * 1번째는 플로팅된 영역에 내용을 채워주는 controller이다.
<span class='linenumber'>2809</span>    * 2번째는 &lt;code>PopoverController&lt;/code>의 위치의 기준점에 해당하는 component이다.
<span class='linenumber'>2810</span>    * &lt;p/>
<span class='linenumber'>2811</span>    * popover된 &lt;code>PopoverController&lt;/code>의 삭제 처리는 두가지 방법으로 설정할 수 있다.
<span class='linenumber'>2812</span>    * toggle방식과 masking 방식이다. toggle 방식은 생성 이벤트가 다시 호출 되면 이미 생성된 
<span class='linenumber'>2813</span>    * &lt;code>PopoverController&lt;/code>가 삭제된다. masking 방식은 &lt;code>PopoverController&lt;/code>의 
<span class='linenumber'>2814</span>    * 영역이외 부분을 터치하게 되면 자동으로 &lt;code>PopoverController&lt;/code>는 삭제 처리 된다. toggle은 기본 값이다.
<span class='linenumber'>2815</span>    * masking 처리를 하려면 opts값에 masking : true 값을 입력하면 된다. 
<span class='linenumber'>2816</span>    * &lt;p/>
<span class='linenumber'>2817</span>    * &lt;code>PopoverController&lt;/code>가 나타날 때 파라미터인 component에 기준으로 어느 쪽에 표시되게 할 지 설정할 수 있다. 
<span class='linenumber'>2818</span>    * 방향은 상하좌우 4가지로 설정할 수 있다. DOWN 방향이 기본 값이다.
<span class='linenumber'>2819</span>    * &lt;pre>
<span class='linenumber'>2820</span>    * {
<span class='linenumber'>2821</span>    *  masking: true | false, 
<span class='linenumber'>2822</span>    *      - default false
<span class='linenumber'>2823</span>    *  direction: tau.ui.PopoverController.UP_DIRECTION
<span class='linenumber'>2824</span>    *       | tau.ui.PopoverController.DOWN_DIRECTION
<span class='linenumber'>2825</span>    *       | tau.ui.PopoverController.LEFT_DIRECTION
<span class='linenumber'>2826</span>    *       | tau.ui.PopoverController.RIGHT_DIRECTION 
<span class='linenumber'>2827</span>    *      - default tau.ui.PopoverController.DOWN_DIRECTION
<span class='linenumber'>2828</span>    * 
<span class='linenumber'>2829</span>    * }
<span class='linenumber'>2830</span>    * &lt;/pre> 
<span class='linenumber'>2831</span>    * &lt;p/>
<span class='linenumber'>2832</span>    * !! 주의 사항 !!
<span class='linenumber'>2833</span>    * 파라미터로 전달되는 controller는 &lt;code>PopoverController&lt;/code>가 삭제될 때 같이 삭제 처리 된다.
<span class='linenumber'>2834</span>    * 따라서 &lt;code>PopoverController&lt;/code>를 나타나게 하는 이벤트에서 controller의 생성자함수를 통해 
<span class='linenumber'>2835</span>    * 새로 생성해서 파라미터로 전달 하여야 한다.
<span class='linenumber'>2836</span>    * 
<span class='linenumber'>2837</span>    * @example
<span class='linenumber'>2838</span>    * this.button.OnEvent(tau.ui.Event.TAP,function () {
<span class='linenumber'>2839</span>    *  this.popover = new PopoverController({ width : '200px', height : '300px' });
<span class='linenumber'>2840</span>    *  var ctrl = new com.web.PopoverScene(); //사용자가 만든 controller
<span class='linenumber'>2841</span>    *  this.popover.presentCtrl(ctrl, this.tabbarButton, {
<span class='linenumber'>2842</span>    *    masking : true,
<span class='linenumber'>2843</span>    *    direction : tau.ui.PopoverController.RIGHT_DIRECTION  
<span class='linenumber'>2844</span>    *    });
<span class='linenumber'>2845</span>    * 
<span class='linenumber'>2846</span>    * });
<span class='linenumber'>2847</span>    * 
<span class='linenumber'>2848</span>    * 
<span class='linenumber'>2849</span>    * @param {tau.ui.Controller} ctrl 
<span class='linenumber'>2850</span>    * @param {tau.ui.Component} component
<span class='linenumber'>2851</span>    * @param {Object} [opts] &lt;code>PopoverController&lt;/code>를 표시하기 위한 옵션
<span class='linenumber'>2852</span>    * @param {Boolean} [opts.masking] toggle이 방식이 아닌 masking처리 방식으로 삭제 처리 
<span class='linenumber'>2853</span>    * @param {String} [opts.direction] direction 의 4가지 방향 
<span class='linenumber'>2854</span>    * &lt;ul>
<span class='linenumber'>2855</span>    *  &lt;li>&lt;code>'tau.ui.PopoverController.UP_DIRECTION'&lt;/code>&lt;/li>
<span class='linenumber'>2856</span>    *  &lt;li>&lt;code>'tau.ui.PopoverController.DOWN_DIRECTION'&lt;/code>&lt;/li>
<span class='linenumber'>2857</span>    *  &lt;li>&lt;code>'tau.ui.PopoverController.LEFT_DIRECTION'&lt;/code>&lt;/li>
<span class='linenumber'>2858</span>    *  &lt;li>&lt;code>'tau.ui.PopoverController.RIGHT_DIRECTION'&lt;/code>&lt;/li>
<span class='linenumber'>2859</span>    * &lt;/ul>
<span class='linenumber'>2860</span>    * @param 
<span class='linenumber'>2861</span> 
<span class='linenumber'>2862</span>    */</span><span class="WHIT">
<span class='linenumber'>2863</span> </span><span class="WHIT">  </span><span class="NAME">presentCtrl</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ctrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">component</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2864</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ctrl</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Controller</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2865</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified controller is not an instance of '</span><span class="WHIT">
<span class='linenumber'>2866</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'tau.ui.Controller: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2867</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2868</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">component</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">tau.ui.Component</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2869</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">'Specified component is not an instance of '</span><span class="WHIT">
<span class='linenumber'>2870</span> </span><span class="WHIT">          </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'tau.ui.Component: '</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">component</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2871</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2872</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">masking</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2873</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.DOWN_DIRECTION</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2874</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2875</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts.masking</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2876</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT">  </span><span class="NAME">opts.masking</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="STRN">'boolean'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2877</span> </span><span class="WHIT">          </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">"Specified opts.masking is not boolean type :"</span><span class="WHIT">
<span class='linenumber'>2878</span> </span><span class="WHIT">              </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">opts.masking</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2879</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2880</span> </span><span class="WHIT">        </span><span class="NAME">masking</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.masking</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2881</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2882</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">opts.direction</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2883</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">opts.direction</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.DOWN_DIRECTION</span><span class="WHIT">
<span class='linenumber'>2884</span> </span><span class="WHIT">            </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">opts.direction</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.UP_DIRECTION</span><span class="WHIT">
<span class='linenumber'>2885</span> </span><span class="WHIT">            </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">opts.direction</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.LEFT_DIRECTION</span><span class="WHIT">
<span class='linenumber'>2886</span> </span><span class="WHIT">            </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">opts.direction</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.RIGHT_DIRECTION</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2887</span> </span><span class="WHIT">          </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">TypeError</span><span class="PUNC">(</span><span class="STRN">"Specified opts.direction is incorrect value :"</span><span class="WHIT">
<span class='linenumber'>2888</span> </span><span class="WHIT">              </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">opts.direction</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2889</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2890</span> </span><span class="WHIT">        </span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">opts.direction</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2891</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2892</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2893</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.visible</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2894</span> </span><span class="WHIT">      </span><span class="NAME">this.dismiss</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2895</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2896</span> </span><span class="WHIT">      </span><span class="NAME">this.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2897</span> </span><span class="WHIT">      </span><span class="NAME">this._controller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">ctrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2898</span> </span><span class="WHIT">      </span><span class="NAME">this._targetComponent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">component</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2899</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">scene</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">component.getScene</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2900</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rootCtrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getRootController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2901</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getPositionPopoverCtrl</span><span class="PUNC">(</span><span class="NAME">component.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2902</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">directionPosition</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._getDirectionPos</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>2903</span> </span><span class="WHIT">          </span><span class="NAME">component.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._directionSize</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2904</span> </span><span class="WHIT">      </span><span class="NAME">this.visible</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2905</span> </span><span class="WHIT">      </span><span class="COMM">//popover position</span><span class="WHIT">
<span class='linenumber'>2906</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">popoverDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2907</span> </span><span class="WHIT">      </span><span class="NAME">popoverDom.style.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2908</span> </span><span class="WHIT">      </span><span class="NAME">popoverDom.style.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="PUNC">+</span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2909</span> </span><span class="WHIT">      </span><span class="COMM">//popover size</span><span class="WHIT">
<span class='linenumber'>2910</span> </span><span class="WHIT">      </span><span class="NAME">popoverDom.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.size.width</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2911</span> </span><span class="WHIT">      </span><span class="NAME">popoverDom.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.size.height</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2912</span> </span><span class="WHIT">      </span><span class="COMM">//popover content size</span><span class="WHIT">
<span class='linenumber'>2913</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">popoverContentDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.PopoverController.CONTENT_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2914</span> </span><span class="WHIT">      </span><span class="NAME">popoverContentDom.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.size.width</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2915</span> </span><span class="WHIT">                                      </span><span class="PUNC">-</span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2916</span> </span><span class="WHIT">      </span><span class="NAME">popoverContentDom.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">this.size.height</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>2917</span> </span><span class="WHIT">                                      </span><span class="PUNC">-</span><span class="NAME">this._contentMargin</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2918</span> </span><span class="WHIT">      </span><span class="COMM">//direction position</span><span class="WHIT">
<span class='linenumber'>2919</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">popoverDirectionDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.PopoverController.DIRECTION_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2920</span> </span><span class="WHIT">      </span><span class="NAME">popoverDirectionDom.style.top</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">directionPosition.y</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2921</span> </span><span class="WHIT">      </span><span class="NAME">popoverDirectionDom.style.left</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">directionPosition.x</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2922</span> </span><span class="WHIT">      </span><span class="NAME">this._settingDirectionStyle</span><span class="PUNC">(</span><span class="NAME">popoverDirectionDom</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2923</span> </span><span class="WHIT">      </span><span class="COMM">//Event</span><span class="WHIT">
<span class='linenumber'>2924</span> </span><span class="WHIT">      </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">rootCtrl.$subDelegators</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">pushUnique</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2925</span> </span><span class="WHIT">      </span><span class="NAME">ctrl.setParent</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2926</span> </span><span class="WHIT">      </span><span class="COMM">//insert DOM</span><span class="WHIT">
<span class='linenumber'>2927</span> </span><span class="WHIT">      </span><span class="NAME">tau.util.dom.appendChild</span><span class="PUNC">(</span><span class="NAME">scene.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2928</span> </span><span class="WHIT">      </span><span class="COMM">//masking</span><span class="WHIT">
<span class='linenumber'>2929</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maskingDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.PopoverController.MASKING_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2930</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">masking</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2931</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">that</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2932</span> </span><span class="WHIT">        </span><span class="NAME">this._maskingFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2933</span> </span><span class="WHIT">          </span><span class="NAME">that.dismiss</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2934</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2935</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.hasTouch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2936</span> </span><span class="WHIT">          </span><span class="NAME">maskingDom.addEventListener</span><span class="PUNC">(</span><span class="STRN">'touchend'</span><span class="PUNC">,</span><span class="NAME">this._maskingFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2937</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2938</span> </span><span class="WHIT">          </span><span class="NAME">maskingDom.addEventListener</span><span class="PUNC">(</span><span class="STRN">'click'</span><span class="PUNC">,</span><span class="NAME">this._maskingFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2939</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2940</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2941</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2942</span> </span><span class="WHIT">        </span><span class="NAME">maskingDom.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2943</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2944</span> </span><span class="WHIT">      </span><span class="COMM">//starting</span><span class="WHIT">
<span class='linenumber'>2945</span> </span><span class="WHIT">      </span><span class="NAME">ctrl.doStart</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2946</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">    </span><span class="WHIT">
<span class='linenumber'>2947</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2948</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2949</span>    * &lt;code>PopoverController&lt;/code>를 삭제하는 함수이다.
<span class='linenumber'>2950</span>    */</span><span class="WHIT">
<span class='linenumber'>2951</span> </span><span class="WHIT">  </span><span class="NAME">dismiss</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2952</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this._maskingFn</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2953</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">maskingDom</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getDOM</span><span class="PUNC">(</span><span class="NAME">tau.ui.PopoverController.MASKING_KEY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2954</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">tau.rt.hasTouch</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2955</span> </span><span class="WHIT">        </span><span class="NAME">maskingDom.removeEventListener</span><span class="PUNC">(</span><span class="STRN">'touchend'</span><span class="PUNC">,</span><span class="NAME">this._maskingFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2956</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2957</span> </span><span class="WHIT">        </span><span class="NAME">maskingDom.removeEventListener</span><span class="PUNC">(</span><span class="STRN">'click'</span><span class="PUNC">,</span><span class="NAME">this._maskingFn</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">        </span><span class="WHIT">
<span class='linenumber'>2958</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>2959</span> </span><span class="WHIT">      </span><span class="WHIT">
<span class='linenumber'>2960</span> </span><span class="WHIT">      </span><span class="NAME">this._maskingFn</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2961</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2962</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rt</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.getRuntime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2963</span> </span><span class="WHIT">    </span><span class="NAME">rt.unsubscribeEvent</span><span class="PUNC">(</span><span class="NAME">tau.rt.Event.ORIENTATION</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._handleOrientationChange</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2964</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">rootCtrl</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">rt.getModule</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getRootController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2965</span> </span><span class="WHIT">    </span><span class="NAME">tau.arr</span><span class="PUNC">(</span><span class="NAME">rootCtrl.$subDelegators</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2966</span> </span><span class="WHIT">    </span><span class="NAME">this.visible</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2967</span> </span><span class="WHIT">    </span><span class="NAME">this.renderer.release</span><span class="PUNC">(</span><span class="NAME">this.$renderData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2968</span> </span><span class="WHIT">    </span><span class="NAME">this._controller.setParent</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2969</span> </span><span class="WHIT">    </span><span class="NAME">this._controller.removeBubble</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2970</span> </span><span class="WHIT">    </span><span class="NAME">this._controller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2971</span> </span><span class="WHIT">    </span><span class="NAME">this._targetComponent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2972</span> </span><span class="WHIT">    </span><span class="NAME">this.doDestroy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2973</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2974</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2975</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2976</span>    * doDestroy 함수는 lifecycle 관련 메소드로 시스템이 호출하므로 직접적으로 호출하지 않는다.
<span class='linenumber'>2977</span>    */</span><span class="WHIT">
<span class='linenumber'>2978</span> </span><span class="WHIT">  </span><span class="NAME">doDestroy</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2979</span> </span><span class="WHIT">    </span><span class="NAME">tau.ui.PopoverController.$super.doDestroy.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2980</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2981</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2982</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2983</span>    * resize시 &lt;code>PopoverController&lt;/code>를 삭제하는 이벤트 핸들
<span class='linenumber'>2984</span>    * @private 
<span class='linenumber'>2985</span>    */</span><span class="WHIT">
<span class='linenumber'>2986</span> </span><span class="WHIT">  </span><span class="NAME">_handleOrientationChange</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2987</span> </span><span class="WHIT">    </span><span class="NAME">this.dismiss</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2988</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>2989</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>2990</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>2991</span>    * &lt;code>PopoverController&lt;/code>가 위치해야할 x, y 좌표를 리턴
<span class='linenumber'>2992</span>    * @private
<span class='linenumber'>2993</span>    * @param element component의 element 
<span class='linenumber'>2994</span>    * @param direction &lt;code>PopoverController&lt;/code>의 direction
<span class='linenumber'>2995</span>    * @returns {object}
<span class='linenumber'>2996</span>    */</span><span class="WHIT">
<span class='linenumber'>2997</span> </span><span class="WHIT">  </span><span class="NAME">_getPositionPopoverCtrl</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>2998</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>2999</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">winWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.innerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3000</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">winHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.innerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3001</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.util.dom.getXY</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3002</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3003</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3004</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3005</span> </span><span class="WHIT">        </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">elementLeft</span><span class="PUNC">+</span><span class="NAME">element.offsetWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3006</span> </span><span class="WHIT">        </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">elementTop</span><span class="PUNC">+</span><span class="NAME">element.offsetHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="WHIT">
<span class='linenumber'>3007</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3008</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">popoverSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.size</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3009</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">5</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3010</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3011</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">areaPosition</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._checkPosition</span><span class="PUNC">(</span><span class="NAME">position.x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3012</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkWidthSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.width</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3013</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkHeightSize</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.height</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3014</span> </span><span class="WHIT">    </span><span class="COMM">////up and down direction X좌표 위치 찾기.</span><span class="WHIT">
<span class='linenumber'>3015</span> </span><span class="WHIT">    </span><span class="COMM">//position이 왼쪽에 쏠려 있으면 popover의 width를 고려해서 위치를 잡는다.</span><span class="WHIT">
<span class='linenumber'>3016</span> </span><span class="WHIT">    </span><span class="COMM">//1. element의 x좌표가 popover width/2보다 크면 가운데 위치 시킨다.</span><span class="WHIT">
<span class='linenumber'>3017</span> </span><span class="WHIT">    </span><span class="COMM">//2. element의 x좌표가 popover width/2보다 작으면 왼쪽에 paddingSize 떨어진 곳에 위치시킨다.</span><span class="WHIT">
<span class='linenumber'>3018</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.DOWN_DIRECTION</span><span class="WHIT">
<span class='linenumber'>3019</span> </span><span class="WHIT">        </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.UP_DIRECTION</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3020</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">areaPosition.areaX</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3021</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">winWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">checkWidthSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3022</span> </span><span class="WHIT">          </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.width</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3023</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3024</span> </span><span class="WHIT">          </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">winWidth</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3025</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3026</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3027</span> </span><span class="WHIT">        </span><span class="COMM">//area 왼쪽 또는 가운데는 사이즈 체크후 위치 체크</span><span class="WHIT">
<span class='linenumber'>3028</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">checkWidthSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3029</span> </span><span class="WHIT">          </span><span class="COMM">//가운데 위치 시키다.</span><span class="WHIT">
<span class='linenumber'>3030</span> </span><span class="WHIT">          </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.width</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3031</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3032</span> </span><span class="WHIT">          </span><span class="COMM">//왼쪽으로 쏠려 있게 위치 시키다.</span><span class="WHIT">
<span class='linenumber'>3033</span> </span><span class="WHIT">          </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3034</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3035</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3036</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.UP_DIRECTION</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3037</span> </span><span class="WHIT">        </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">element.offsetHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3038</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3039</span> </span><span class="WHIT">        </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">element.offsetHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3040</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3041</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3042</span> </span><span class="WHIT">      </span><span class="COMM">////left and right direction Y좌표 위치 찾기.</span><span class="WHIT">
<span class='linenumber'>3043</span> </span><span class="WHIT">      </span><span class="COMM">//position이 오른쪽에 쏠려 있으면 popover의 width를 고려해서 위치를 잡는다.</span><span class="WHIT">
<span class='linenumber'>3044</span> </span><span class="WHIT">      </span><span class="COMM">//1. element의 y좌표가 popover height/2보다 크면 가운데 위치 시킨다.</span><span class="WHIT">
<span class='linenumber'>3045</span> </span><span class="WHIT">      </span><span class="COMM">//2. element의 x좌표가 popover height/2보다 작으면 아래에 paddingSize 떨어진 곳에 위치시킨다.</span><span class="WHIT">
<span class='linenumber'>3046</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">areaPosition.areaY</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3047</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">winHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">checkHeightSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3048</span> </span><span class="WHIT">          </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.height</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3049</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3050</span> </span><span class="WHIT">          </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">winHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3051</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3052</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3053</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">checkHeightSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3054</span> </span><span class="WHIT">          </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.height</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3055</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3056</span> </span><span class="WHIT">          </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">paddingSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3057</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3058</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3059</span> </span><span class="WHIT">      </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">direction</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.LEFT_DIRECTION</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3060</span> </span><span class="WHIT">        </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">popoverSize.width</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">element.offsetWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3061</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3062</span> </span><span class="WHIT">        </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">element.offsetWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3063</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3064</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3065</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3066</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3067</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>3068</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>3069</span>    * 4구역으로 분할하여 현재 x, y 좌표가 어느쪽 구역인지 리턴함
<span class='linenumber'>3070</span>    * @private 
<span class='linenumber'>3071</span>    * @param x element의 중심 x좌표 
<span class='linenumber'>3072</span>    * @param y element의 중심 y좌표 
<span class='linenumber'>3073</span>    * @returns {object}
<span class='linenumber'>3074</span>    */</span><span class="WHIT">
<span class='linenumber'>3075</span> </span><span class="WHIT">  </span><span class="NAME">_checkPosition</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3076</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">winWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.innerWidth</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3077</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">winHeight</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">window.innerHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3078</span> </span><span class="WHIT">    </span><span class="COMM">//width 구역을 2구역으로 나눔 왼쪽 , 오른쪽 구석</span><span class="WHIT">
<span class='linenumber'>3079</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">widthRange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">winWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3080</span> </span><span class="WHIT">    </span><span class="COMM">//height 구역을 2구역으로 나눔 위쪽 , 아래쪽 구석</span><span class="WHIT">
<span class='linenumber'>3081</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">heightRange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">winHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3082</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">areaX</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">areaY</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3083</span> </span><span class="WHIT">    </span><span class="COMM">//areaX: 1은 왼쪽구석 , 2는 오른쪽 구석</span><span class="WHIT">
<span class='linenumber'>3084</span> </span><span class="WHIT">    </span><span class="COMM">//areaY: 1은 위쪽구석 , 2는 아래쪽 구석</span><span class="WHIT">
<span class='linenumber'>3085</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NAME">widthRange</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3086</span> </span><span class="WHIT">      </span><span class="COMM">//왼쪽구석이다.</span><span class="WHIT">
<span class='linenumber'>3087</span> </span><span class="WHIT">      </span><span class="NAME">result.areaX</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3088</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3089</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NAME">heightRange</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3090</span> </span><span class="WHIT">      </span><span class="COMM">//위쪽 구석이다.</span><span class="WHIT">
<span class='linenumber'>3091</span> </span><span class="WHIT">      </span><span class="NAME">result.areaY</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3092</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3093</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3094</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3095</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>3096</span>    * direction 에 따른 삼각형의 위치좌표값을 리턴한다.
<span class='linenumber'>3097</span>    * @private 
<span class='linenumber'>3098</span>    * @param element component의 element 
<span class='linenumber'>3099</span>    * @param direction
<span class='linenumber'>3100</span>    * @param directionSize
<span class='linenumber'>3101</span>    * @returns {x,y}
<span class='linenumber'>3102</span>    */</span><span class="WHIT">
<span class='linenumber'>3103</span> </span><span class="WHIT">  </span><span class="NAME">_getDirectionPos</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3104</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3105</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">tau.util.dom.getXY</span><span class="PUNC">(</span><span class="NAME">element</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3106</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementLeft</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3107</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elementTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xy</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3108</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">position</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3109</span> </span><span class="WHIT">        </span><span class="NAME">x</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">elementLeft</span><span class="PUNC">+</span><span class="NAME">element.offsetWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3110</span> </span><span class="WHIT">        </span><span class="NAME">y</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">elementTop</span><span class="PUNC">+</span><span class="NAME">element.offsetHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="WHIT">
<span class='linenumber'>3111</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3112</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">eleOffsetHeightHalf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetHeight</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3113</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">eleOffsetWidthHalf</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">element.offsetWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3114</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">direction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3115</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.UP_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3116</span> </span><span class="WHIT">      </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3117</span> </span><span class="WHIT">      </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">eleOffsetHeightHalf</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3118</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3119</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.DOWN_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3120</span> </span><span class="WHIT">      </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3121</span> </span><span class="WHIT">      </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">eleOffsetHeightHalf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3122</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3123</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.RIGHT_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3124</span> </span><span class="WHIT">      </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">eleOffsetWidthHalf</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3125</span> </span><span class="WHIT">      </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3126</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3127</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.LEFT_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3128</span> </span><span class="WHIT">      </span><span class="NAME">result.x</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.x</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">eleOffsetWidthHalf</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3129</span> </span><span class="WHIT">      </span><span class="NAME">result.y</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">position.y</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">directionSize</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3130</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3131</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3132</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3133</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>3134</span> </span><span class="WHIT">  </span><span class="WHIT">
<span class='linenumber'>3135</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='linenumber'>3136</span>    * direction에 맞게 삼각형을 스타일을 setting
<span class='linenumber'>3137</span>    * @param dom direction 삼각형의 dom객체 
<span class='linenumber'>3138</span>    * @param direction 
<span class='linenumber'>3139</span>    */</span><span class="WHIT">
<span class='linenumber'>3140</span> </span><span class="WHIT">  </span><span class="NAME">_settingDirectionStyle</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dom</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">direction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3141</span> </span><span class="WHIT">    </span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">direction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>3142</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.UP_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3143</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderRightColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3144</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderLeftColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3145</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderBottomWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'0px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3146</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3147</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.DOWN_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3148</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderRightColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3149</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderLeftColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3150</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderTopWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'0px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3151</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3152</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.RIGHT_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3153</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderTopColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3154</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderBottomColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3155</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderLeftWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'0px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3156</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3157</span> </span><span class="WHIT">    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">tau.ui.PopoverController.LEFT_DIRECTION</span><span class="PUNC">:</span><span class="WHIT">
<span class='linenumber'>3158</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderTopColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3159</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderBottomColor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'transparent'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3160</span> </span><span class="WHIT">      </span><span class="NAME">dom.style.borderRightWidth</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'0px'</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3161</span> </span><span class="WHIT">      </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3162</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3163</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>3164</span> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>3165</span> </span></pre></body></html>